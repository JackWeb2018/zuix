### Usage

#### Local install

Download **[zuix.min.js](https://genielabs.github.io/zuix/js/zuix.min.js)** and include it in the ```head``` section of the page.

<pre><code class="language-html">
    <script src="js/zuix.min.js"></script>
</code></pre>

#### CDN

Link the script as an external resource by adding the following line in the ```head``` section of the page:

<pre><code class="language-html">
    <script src="https://genielabs.github.io/zuix/js/zuix.min.js"></script>
</code></pre>

#### NPM / Bower

<mark>(TODO: add npm and bower)</mark>

### Getting started

To start using **ZUIX** add the following line before the end of the ```body``` of your page.

<pre><code class="language-html">
    <script type="text/javascript">zuix.componentize();</script>
</code></pre>

This guide is organized in three sections with different
difficulty grades:

- Content Management <small>(beginner)</small>
- View Template and Data Binding <small>(intermediate-)</small>
- Component Management <small>(intermediate+)</small>

<small><strong>P.S.</strong> Just in case you already started wondering, the *beginner* grade stands for "With basic HTML and Javascript knowledge".</small>

#### Content Management

With *Content Management* we are referring here to the capability of
dynamically loading into a page some content that is placed in
other files.

This way, it is possible to structure a web site or application into modules
that can be conveniently organized in the directory tree.

For example, the following page template

<div style="margin: 24px">
<div self="size-1of2 center" layout="column center-center" style="height: 320px">
<div self="size-x1" layout="column center-center" style="background-color: #E6DEC7;">header</div>
<div self="size-x3" layout="column center-center" style="background-color: #E1F5F3;">main content</div>
<div self="size-x1" layout="column center-center" style="background-color: #E6DEC7;">footer</div>
</div>
</div>

could be implemented with the following files:

- site/layout/header.html
- site/content/main.html
- site/layout/footer.html
- **index.html**

where the ```index.html``` is the main page that will include the other files.

<a id="Getting_Started--Content_Loading"></a>
##### Loading content

To include a content, just add a ```div``` (or any other tag supposed to be a container element)
with the attribute ```data-ui-include``` set to the path of the content that
you want to be loaded.

<small><strong>EXAMPLE PAGE - </strong> **HTML** file ```index.html```</small>
<pre data-line="9,11,13"><code class="language-html">
<html>
    <head>
        <!-- ... Script/CSS includes ... -->
        <script src="js/zuix.min.js"></script>
        <!-- ... -->
    </head>
    <body>
        <!-- header -->
        <div data-ui-include="site/layout/header"></div>
        <!-- page content -->
        <div data-ui-include="site/content/main"></div>
        <!-- footer -->
        <div data-ui-include="site/layout/footer"></div>
    </body>
</html>
</code></pre>

The ```data-ui-include``` attribute used at lines 9-11-13, will instruct *ZUIX*
to load the specified content into each ```div``` element.

Notice that the value of the ```data-ui-include``` attribute is the URL of the file to include
<u>without</u> the ```.html``` extension.

The following example shows how a ```div``` will looks like after
the content ```site/common/links``` is included into it.

<small><strong>EXAMPLE</strong> - **HTML** file [site/common/links.html](https://genielabs.github.io/zuix/site/common/links.html)</small>
<pre data-line="1"><code class="language-html">
    <!-- site/common/links --->
    <div layout="row center-spread">
        <a href="https://github.com/genielabs/zuix">ZUIX on GitHub</a>
        <a href="https://github.com/genielabs">@genielabs</a>
        <a href="https://genielabs.github.io/HomeGenie/">HomeGenie</a>
    </div>
</code></pre>

Element including the above content

<pre data-line="1"><code class="language-html">
    <!-- include common links -->
    <div data-ui-include="site/common/links"></div>
</code></pre>

<small><strong>PROCESSED OUTPUT</strong> - resulting ```div``` after content is loaded into it</small>
<pre data-line="1,4"><code class="language-html">
    <!-- include common links -->
    <div data-ui-include="site/common/links" data-ui-loaded="true"
         data-ui-component="site/common/links">
        <!-- site/common/links --->
        <div layout="row center-spread">
            <a href="https://github.com/genielabs/zuix">ZUIX on GitHub</a>
            <a href="https://github.com/genielabs">@genielabs</a>
            <a href="https://genielabs.github.io/HomeGenie/">HomeGenie</a>
        </div>
    </div>
</code></pre>

<small><strong>RESULT</strong></small>

<div data-ui-include="site/common/links" data-ui-options="main.options.content_no_css"></div>

<p>&nbsp;</p>

It is also possible to include content that is located on a different server by
specifying the absolute URL:

<pre><code class="language-html">
    <div data-ui-include="https://genielabs.github.io/zuix/site/common/links"></div>
</code></pre>

##### Lazy loading

<mark>TODO: show use of ```data-ui-lazyload``` and ```data-ui-forceload``` attributes</mark>

##### Styling content

When including a content, after loading the ```.html``` file,
*ZUIX* will also try to load a ```.css``` style
file with the same location/basename.

If the style file is found, all style definitions contained in it,
will be applied to the container where the content has been loaded.

<small><strong>EXAMPLE - </strong> **HTML** file [site/common/links.html](https://genielabs.github.io/zuix/site/common/links.html)</small>
<pre><code class="language-html">
<!-- site/common/links --->
<div layout="row center-spread">
    <a href="https://github.com/genielabs/zuix">ZUIX on GitHub</a>
    <a href="https://github.com/genielabs">@genielabs</a>
    <a href="https://genielabs.github.io/HomeGenie/">HomeGenie</a>
</div>
</code></pre>

<small><strong>EXAMPLE - </strong> **CSS** file [site/common/links.css](https://genielabs.github.io/zuix/site/common/links.css)</small>
<pre data-line="1,9"><code class="language-css">
div[layout] {
    padding: 16px;
    margin: 24px;
    background-color: #1c88e6;
    -webkit-box-shadow: 9px 10px 36px -7px rgba(0,0,0,0.58);
    -moz-box-shadow: 9px 10px 36px -7px rgba(0,0,0,0.58);
    box-shadow: 9px 10px 36px -7px rgba(0,0,0,0.58);
}
a {
    color: white;
    font-size: 18px;
}
</code></pre>

Element including the above content

<pre><code class="language-html">
    <!-- include common links -->
    <div data-ui-include="site/common/links"></div>
</code></pre>

<small><strong>PROCESSED OUTPUT</strong> resulting ```div``` after content is loaded into it</small>
<pre data-line="12,20"><code class="language-html">
<!-- include common links -->
<div data-ui-include="site/common/links"  data-ui-loaded="true"
     data-ui-component="site/common/links">
    <!-- site/common/links --->
    <div layout="row center-spread">
        <a href="https://github.com/genielabs/zuix">ZUIX on GitHub</a>
        <a href="https://github.com/genielabs">@genielabs</a>
        <a href="https://genielabs.github.io/HomeGenie/">HomeGenie</a>
    </div>
</div>
<style type="text/css">
[data-ui-component="site/common/links"] div[layout] {
    padding: 16px;
    margin: 24px;
    background-color: #1c88e6;
    -webkit-box-shadow: 9px 10px 36px -7px rgba(0,0,0,0.58);
    -moz-box-shadow: 9px 10px 36px -7px rgba(0,0,0,0.58);
    box-shadow: 9px 10px 36px -7px rgba(0,0,0,0.58);
}
[data-ui-component="site/common/links"] a {
    color: white;
    font-size: 18px;
}
</style>
</code></pre>

<small><strong>RESULT</strong></small>
<div data-ui-include="site/common/links"
     data-ui-options="main.options.content"
     data-ui-forceload="true"></div>

<p>&nbsp;</p>

So, as shown in the processed output, the ```.css``` style definitions
are applied only to the loaded content via the ```data-ui-component``` constraint,
making possible to keep **global style** files separated from **content-local style** files.


#### View Templates <small></small>

In a more generic fashion, we call it **View Template** (or just *View*),
when we refer to that particular kind of content where some elements
in it are bound to fields of a *data model* and, so, that dynamically
change the shown data accordingly to it.

The ```data-ui-field``` attribute, placed on elements of a view template,
is used to bind them to the associated fields in the model.

<small><strong>EXAMPLE - HTML</strong> View Template</small>
<pre data-line="3,6"><code class="language-html">
<!-- View Template - Article item summary -->
<div class="article">
    <h3 data-ui-field="title">
        Article Title
    </h3>
    <div data-ui-field="summary">
        This is the place holder for the article summary.
    </div>
</div>
</code></pre>

<small><strong>DATA MODEL</strong> Example instance</small>
<pre data-line="2,3"><code class="language-js">
model = {
    title: 'Pizza recipe',
    summary: 'Classic homemade pizza recipe, including ...'
}
</code></pre>

<small><strong>RESULT</strong></small>
<div self="size-1of2" class="zuix-example article mdl-shadow--6dp">
<h4 data-ui-field="title">Pizza recipe</h4>
<div data-ui-field="summary">
    Classic homemade pizza recipe, including pizza dough and toppings, step-by-step instructions with photos.
</div>
</div>
<style>
.zuix-example.article {
margin: 12px 36px 24px;
padding: 0px 12px 12px;
opacity: 0.6;
}
.zuix-example.article h4 {
margin-top: 0; margin-bottom: 0;
}
</style>

A *View* can be either implemented in a file, like already described for
[loading content](#Getting_Started--Content_Loading), or as an **inline** View, that is so
placed in the same page rather than on a its own file.

###### Inline View Template

A view is declared inline by adding the ```data-ui-view``` attribute to its root element.
The value of this attribute is meant to be a unique identifier and shall not match the path
of any other view placed in a file or inline in the same page, unless we want to *override* it.

<small><strong>EXAMPLE - </strong> Inline View Template</small>
<pre data-line="2"><code class="language-html">
<!-- definition of a inline view template -->
<span data-ui-view="inline/common/contact_chip"
      class="mdl-chip mdl-chip--contact">
    <img class="mdl-chip__contact" src="site/images/avatar_01.png">
    <span class="mdl-chip__text">Contact Name</span>
</span>
</code></pre>

Inclusion of the above view in the same page

<pre><code class="language-html">
    <div data-ui-include="inline/common/contact_chip"></div>
</code></pre>

<small><strong>RESULT</strong></small>
<div class="content-padding">
<span data-ui-view="inline/common/contact_chip" class="mdl-chip mdl-chip--contact mdl-shadow--4dp">
<img data-ui-field="image" class="mdl-chip__contact" src="site/images/avatar_01.png">
<span data-ui-field="name" class="mdl-chip__text">Contact Name</span>
</span>
</div>

##### Data Binding

So, to bind elements of a view template to fields of a given data model, we set the ```data-ui-field``` attribute
on these elements with the name of the model field that we want to bind to.

<a id="Getting_Started--Basic_Binding"></a>
###### Basic Binding

When providing a simple data model like the one described in the previous example,
the model's field is automatically mapped to a certain element's property
depending on the type of the binding element.
For instance, if the element is an ```image```, then the mapped property
will be ```.src```, while for a ```div``` or a ```p``` it will be
the ```.innerHTML``` property.

<small><strong>EXAMPLE - </strong> Inline View Template with bound fields</small>
<pre><code class="language-html">
<!-- definition of a inline view template -->
<span data-ui-view="inline/common/contact_chip" class="mdl-chip mdl-chip--contact">
    <img data-ui-field="image" class="mdl-chip__contact" src="site/images/avatar_01.png">
    <span data-ui-field="name" class="mdl-chip__text">Contact Name</span>
</span>
</code></pre>

Inclusion of the above view with the data model specified by the ```data-bind-model``` attribute

<pre data-line="4,7,11,15"><code class="language-html">
<div layout="row center-spread">
    <!-- Foo Bar chip -->
    <div data-ui-include="inline/common/contact_chip"
         data-bind-model="foo_bar_contact"></div>
    <!-- Jane Doe chip -->
    <div data-ui-include="inline/common/contact_chip"
         data-bind-model="jane_doe_contact"></div>
</div>
<script>
// example inline data model
foo_bar_contact = {
    image: 'site/images/avatar_02.png',
    name: 'Foo Bar'
};
jane_doe_contact = {
    image: 'site/images/avatar_01.png',
    name: 'Jane Doe'
};
</script>
</code></pre>

<small><strong>RESULT</strong></small>
<div data-ui-view="chip_example_result" layout="row center-spread">
<div data-ui-include="inline/common/contact_chip"
     data-id="0" data-bind-model="chip_adapter"></div>
<div data-ui-include="inline/common/contact_chip"
     data-id="1" data-bind-model="chip_adapter"></div>
<script>
var chip_items = {
    "0": { name: 'Foo Bar', image: 'site/images/avatar_02.png'},
    "1": { name: 'Jane Doe', image: 'site/images/avatar_01.png'},
    "2": { name: 'Mikey M.', image: 'site/images/avatar_03.png'}
};
// example model view adapter
var chip_adapter = function(element, field) {
    var id = this.getAttribute('data-id');
    var value = chip_items[id][field];
    switch (field) {
        case 'name':
            element.innerHTML = value;
            break;
        case 'image':
            element.src = value;
            break;
    }
    console.log(this, id, element, field, chip_items[id][field]);
};
</script>
</div>


###### Binding Adapters

Sometimes it might be required to have more control over
how the value of a model's field affects the view.
For this purpose *Binding Adapters* can be used rather than
*[Basic Binding](#Getting_Started--Basic_Binding)*.

A *binding adapter* is a function that gets called when the data model
associated to a view is updated.

    function vm_binding_adapter(element, field) {
        // adapter code ...
    }

where ```element``` is the view element that needs to be updated,
```field``` is the name of the bound field in the model and the
context object **this**, is the view itself.

<small><strong>EXAMPLE - </strong> Using a binding adapter</small>
<pre data-line="3,6,16"><code class="language-html">
<div layout="row center-spread">
    <div data-ui-include="inline/common/contact_chip"
         data-bind-model="chip_adapter"
         data-id="0"></div>
    <div data-ui-include="inline/common/contact_chip"
         data-bind-model="chip_adapter"
         data-id="1"></div>
</div>
<script>
// items list
chip_items = {
    "0": { name: 'Foo Bar', image: 'site/images/avatar_02.png'},
    "1": { name: 'Jane Doe', image: 'site/images/avatar_01.png'}
};
// example adapter
chip_adapter = function(element, field) {
    // the context 'this', is the View itself
    var id = this.getAttribute('data-id');
    // get the value of 'field' in the data model
    var value = chip_items[id][field];
    // use the value to update the bound 'element'
    switch (field) {
        case 'name':
            element.innerHTML = value;
            break;
        case 'image':
            // show place-holder if no image is provided
            if (value == '')
                element.src = 'site/images/chip_placeholder.png';
            else
                element.src = value;
            break;
    }
};
</script>
</code></pre>

<small><strong>RESULT</strong></small>
<div data-ui-include="chip_example_result"></div>


##### Behaviors

A behavior is basically a function that describe how a view
will behave upon certain events like on user interaction events.
For example a view could animate if tapped.

<small><strong>EXAMPLE - </strong> Implmenting behavior</small>
<pre data-line="4,22"><code class="language-html">
<div layout="row center-left">
<div data-ui-include="inline/common/contact_chip"
     data-id="2" data-bind-model="chip_adapter"
     data-ui-options="chip_view_options"></div>
</div>
<script>
chip_view_behavior = {
    'mouseover': function () {
        zuix.$(this).css('cursor', 'pointer');
    },
    'mouseout': function () {
        zuix.$(this).css('cursor', 'default')
            .find('img')
                .animateCss('swing');
    },
    'click': function() {
        zuix.$(this).animateCss('pulse')
            .find('img')
                .animateCss('bounce');
    }
};
chip_view_options = {
    behavior: chip_view_behavior
}
</script>
</code></pre>

<small><strong>RESULT</strong></small>

<div layout="row center-left">
<div data-ui-include="inline/common/contact_chip"
     data-id="2" data-bind-model="chip_adapter"
     data-ui-options="chip_view_options"></div>
</div>
<script>
// items list
var chip_view_behavior = {
    'mouseover': function () {
        zuix.$(this).css('cursor', 'pointer');
    },
    'mouseout': function () {
        zuix.$(this).css('cursor', 'default')
            .find('img')
            .animateCss('swing');
    },
    'click': function() {
        zuix.$(this).animateCss('pulse')
            .find('img')
            .animateCss('bounce');
    }
};
var chip_view_options = {
    behavior: chip_view_behavior,
    on: {
        'click': function() {
            console.log('CLICKED!!');
        }
    }
};
</script>

##### Events

<p></p>
<p>.</p>
<p>.</p>
<p>.</p>
<p></p>

<p>&nbsp;</p>
<p>&nbsp;</p>

----

<mark>DRAFT TEXT BELOW THIS LINE</mark>

----

<p>&nbsp;</p>
<p>&nbsp;</p>

<p>.</p>



#### Component Management

A component is like a [content template](#Content-Templates) (html/css/data model) with the
plus of a piece of JavaScript code associated to it.

This JavaScript code is the ****Controller**** of the component and
it implements the logic and behavior of it upon user interaction or
when the bound data model is updated.

##### Loading a component

To load a component, the ```data-ui-load``` attribute is used,
where its value is the name of the view template
that has to be applied to the component.

<p></p>

<small><strong>NOTE:</strong></small>
zuix will first look for an <em>inline view</em> matching the ```data-ui-view```
value. If none found it will try to load it from <em>file</em>, by appending the ```.html```
suffix to the template name.

##### The Controller <small>component logic</small>

While in the previous steps we didn't need any JavaScript coding,
adding the controller for the component logic will indeed require
to code a JavaScript handler for it.
The handler can be specified either inline or into a sperate JavaScript
file that will be loaded automatically if no inline controller is defined.


<style type="text/css">
    /*
     * Custom keyword styles
     */
    .token.keyword.keyword-data-ui-load, .token.keyword.keyword-load {
        color: #f92672;
    }
    .token.zuix_obj {
        color: purple;
    }
    .token.zuix_ctr {
        color: gray;
    }
</style>



<small>
    <strong>INLINE CONTROLLER (METHOD 1)</strong>
    The controller is specified in the ```data-ui-controller```
    attribute.
</small>
<pre><code class="language-html keyword-start line-numbers">
    <div data-ui-load="simple_view" data-ui-controller="exampleController"/>
    <script>
    var exampleController = zuix.controller(function(cp){
        cp.create = function() {
            cp.view().html('Helllo World!');
        }
    });
    </script>
</code></pre>


<small>
    <strong>INLINE CONTROLLER (METHOD 2)</strong>
    The controller is passed with the options
    of the ```zuix.load(view,options)``` method.
</small>
<pre><code class="language-html keyword-start line-numbers">
    <script>
    var componentContext = zuix.load('simple_view', {
        controller: zuix.controller(function(cp){
            cp.create = function() {
                cp.view().html('Helllo World!');
            }
        }),
        ready: function (context) {
            console.log('component loading complete');
            console.log(context);
        }
    });
    componentContext.append(my_container);
    </script>
</code></pre>

##### Applying a same Controller to different Views


<p></p>
<p>.</p>
<p>.</p>
<p>.</p>
<p></p>

##### Component Life-Cycle



#### Hooks

<p></p>
<p>.</p>
<p>.</p>
<p>.</p>
<p></p>


#### About caching


<p></p>
<p>.</p>
<p>.</p>
<p>.</p>
<p></p>

#### Guidelines


<p></p>
<p>.</p>
<p>.</p>
<p>.</p>
<p></p>


### More examples

<p>.</p>

<!-- zuix "ui/layout/actions-view" layout -->
<div data-ui-load="ui/layout/actions-view" layout="row center-center">
<div style="height: 96px;" align="center" class="content-padding mdl-button mdl-js-button mdl-js-ripple-effect">
<i class="material-icons md-48">dashboard</i>
<br>
<small>ZUIX</small>
</div>
<div style="height: 96px;" align="center" class="content-padding mdl-button mdl-js-button mdl-js-ripple-effect">
<i class="material-icons md-48">school</i>
<br>
<small>Getting Started</small>
</div>
<div style="height: 96px;" align="center" class="content-padding mdl-button mdl-js-button mdl-js-ripple-effect">
<i class="material-icons md-48">import_contacts</i>
<br>
<small>API Docs</small>
</div>
</div>

<p>.</p>

...

##### Example 1 - Loading external hosted component

<small>HTML</small>
<pre><code class="language-markup">
    <div data-ui-load="https://codepen.io/genielabs/pen/RomJZy"></div>
</code></pre>
<small>JavaScript</small>
<pre><code class="language-js">
    // load a component from CodePen
    // and override its controller logic
    // with an inline one
    zuix.load('https://codepen.io/genielabs/pen/RomJZy', {
        container: zuix.field('my-container'),
        controller: zuix.controller(function(cp) {
            // inline controller function
            // TODO: implement your own controller logic
        },
        ready: function (context) {
            // component loaded and ready
            console.log(context);
        }
    });
</code></pre>
<!--
<small>Result</small>
<div self="size1of2">
    <div data-ui-load="https://codepen.io/genielabs/pen/RomJZy"
         data-ui-options="main.options.codepen_example_01"
    ></div>
</div>

<small>Component on CodePen</small>
<p data-height="430" data-theme-id="26976" data-slug-hash="RomJZy" data-default-tab="js,result" data-user="genielabs" data-embed-version="2" data-pen-title="zuix test" class="codepen">See the Pen <a href="https://codepen.io/genielabs/pen/RomJZy/">zuix test</a> by Gene (<a href="https://codepen.io/genielabs">@genielabs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

-->



<p></p>
<p></p>
<p></p>
<small>**ZUIX** Quick Start Guide. &copy; Generoso Martello 2016-2017.</small>