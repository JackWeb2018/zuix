/*

 Copyright 2015-2017 G-Labs. All Rights Reserved.
         https://genielabs.github.io/zuix

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
'use strict';!function(w){if("object"==typeof exports)module.exports=w();else if("function"==typeof define&&define.amd)define(w);else{var m;"undefined"!=typeof window?m=window:"undefined"!=typeof global?m=global:"undefined"!=typeof self&&(m=self);m.zuix=w()}}(function(){return function m(n,p,b){function f(a,g){if(!p[a]){if(!n[a]){var h="function"==typeof require&&require;if(!g&&h)return h(a,!0);if(c)return c(a,!0);throw Error("Cannot find module '"+a+"'");}h=p[a]={exports:{}};n[a][0].call(h.exports,
function(c){var e=n[a][1][c];return f(e?e:c)},h,h.exports,m,n,p,b)}return p[a].exports}for(var c="function"==typeof require&&require,a=0;a<b.length;a++)f(b[a]);return f}({1:[function(m,n,p){function b(b){var c=this;c._worker=null;c._taskList=[];c._requests=[];null==b&&(b=function(){});c.taskQueue=function(a,d,g){c._taskList.push({tid:a,fn:d,status:0,priority:g,end:function(){this.status=2;b(c,"load:next",{task:this.tid});c._taskList.splice(this.index,1);c.taskCheck()}});c._taskList.sort(function(a,
c){return a.priority>c.priority?1:c.priority>a.priority?-1:0});c.taskCheck()};c.taskCheck=function(){for(var a=0;a<c._taskList.length;a++){if(0==c._taskList[a].status){c._taskList[a].status=1;b(c,"load:begin",{task:c._taskList[a].tid});c._taskList[a].index=a;c._taskList[a].fn.call(c._taskList[a]);return}if(1==c._taskList[a].status||2==c._taskList[a].status)return}b(c,"load:end")}}b.prototype.queue=function(b,c,a){return this.taskQueue(b,c,a)};b.prototype.requestLock=function(b){return null!=b._taskerLock?
!1:b._taskerLock=!0};b.prototype.releaseLock=function(b){setTimeout(function(){delete b._taskerLock},10)};b.prototype.lockLater=function(b,c,a){var d=this;null==b._taskerLock?c():null==b._taskerTimeout&&(b._taskerTimeout=!0,b._taskerTimeout=setTimeout(function(){delete b._taskerTimeout;d.lockLater(b,c,a)},a));return!0};n.exports=b},{}],2:[function(m,n,p){n.exports={isNoU:function(b){return"undefined"===typeof b||null===b},isFunction:function(b){return"function"===typeof b},objectEquals:function(b,
f){if(null===b||void 0===b||null===f||void 0===f)return b===f;if(b.constructor!==f.constructor)return!1;if(b instanceof Function||b instanceof RegExp)return b===f;if(b===f||b.valueOf()===f.valueOf())return!0;if(Array.isArray(b)&&b.length!==f.length||b instanceof Date||!(b instanceof Object)||!(f instanceof Object))return!1;var c=Object.keys(b);return Object.keys(f).every(function(a){return-1!==c.indexOf(a)})&&c.every(function(a){return util.objectEquals(b[a],f[a])})},propertyFromPath:function(b,f){if("string"===
typeof f){f=f.replace(/\[(\w+)]/g,".$1");f=f.replace(/^\./,"");for(var c=f.split("."),a=b,d=0,g=c.length;d<g;++d){var h=c[d];if("undefined"!==typeof a[h])a=a[h];else return}return a}},cloneObject:function f(c){if(null===c||"object"!==typeof c)return c;var a=c.constructor(),d;for(d in c)a[d]=f(c[d]);return a},evalJs:eval}},{}],3:[function(m,n,p){function b(e){a(this,e.type,e)}function f(e,a,c){var d=!1;k.each(h,function(){if(this.element===e&&this.path===a&&this.handler==c)return console.log("handler already registered",
e,a,c),d=!0,!1});d||(h.push({element:e,path:a,handler:c}),e.addEventListener(a,b,!1))}function c(e,a,c){var d=1,l=-1;k.each(h,function(b){this.element===e&&this.path===a&&this.handler==c&&(d--,l=b)});-1!==l&&h.splice(l,1);0==d&&e.removeEventListener(a,b)}function a(e,a,c){var b=k(e);k.each(h,function(){this.element===e&&this.path===a&&this.handler.call(b,c)})}function d(e){this._selection=[];"undefined"===typeof e&&(e=document.documentElement);if(e instanceof d)return e;if(e instanceof HTMLCollection||
e instanceof NodeList||Array.isArray(e))this._selection=e;else if(e instanceof HTMLElement||e instanceof Node)this._selection=[e];else if("string"===typeof e)this._selection=document.documentElement.querySelectorAll(e);else if(null!==e)throw console.log("ZxQuery cannot wrap object of this type.",typeof e,e),e;return this}var g=m("./Util.js"),h=[];d.prototype.length=function(){return this._selection.length};d.prototype.parent=function(e){return g.isNoU(e)?new d(this._selection[0].parentNode):new d(k.getClosest(this._selection[0],
e))};d.prototype.children=function(e){return g.isNoU(e)?new d(this._selection[0].children):new d(this._selection[0].querySelectorAll(e))};d.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};d.prototype.get=function(e){g.isNoU(e)&&(e=0);return this._selection[e]};d.prototype.eq=function(e){return new d(this._selection[e])};d.prototype.find=function(e){return new d(this._selection[0].querySelectorAll(e))};d.prototype.each=function(e){k.each(this._selection,
e);return this};d.prototype.attr=function(e,a){if(g.isNoU(a))return this._selection[0].getAttribute(e);this.each(function(c,b){this.get().setAttribute(e,a)});return this};d.prototype.trigger=function(e,a){var c;window.CustomEvent?c=new CustomEvent(e,{detail:a}):(c=document.createEvent("CustomEvent"),c.initCustomEvent(e,!0,!0,a));this.each(function(e,a){a.dispatchEvent(c)});return this};d.prototype.one=function(e,a){var c=!1;this.on(e,function(b,d){c||(c=!0,k(this).off(e,a),a.call(this,b,d))});return this};
d.prototype.on=function(a,c){var b=a.match(/\S+/g)||[];this.each(function(a,e){k.each(b,function(a,b){f(e,b,c)})});return this};d.prototype.off=function(a,b){var d=a.match(/\S+/g)||[];this.each(function(a,e){k.each(d,function(a,d){c(e,d,b)})});return this};d.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};d.prototype.position=function(){return null!=this._selection[0]?k.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};d.prototype.css=function(a,
c){if(g.isNoU(c))return this._selection[0].style[a];this.each(function(b,d){d.style[a]=c});return this};d.prototype.addClass=function(a){var c=a.match(/\S+/g)||[];k.each(this._selection,function(b,d){d.classList?k.each(c,function(a,e){d.classList.add(e)}):d.className+=" "+a});return this};d.prototype.hasClass=function(a){return k.hasClass(this._selection[0],a)};d.prototype.removeClass=function(a){var c=a.match(/\S+/g)||[];k.each(this._selection,function(b,d){d.classList?k.each(c,function(a,e){d.classList.remove(e)}):
d.className=d.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};d.prototype.prev=function(){return new d(this._selection[0].previousElementSibling)};d.prototype.next=function(){return new d(this._selection[0].nextElementSibling)};d.prototype.html=function(a){if(g.isNoU(a))return this._selection[0].innerHTML;this.each(function(c,b){b.innerHTML=a});return this};d.prototype.append=function(a){"string"===typeof a?this._selection[0].innerHTML+=a:this._selection[0].appendChild(a);
return this};d.prototype.prepend=function(a){"string"===typeof a?this._selection[0].innerHTML=a+this._selection[0].innerHTML:this._selection[0].insertBefore(a,this._selection[0].innerHTML.firstElementChild);return this};d.prototype.display=function(a){if(g.isNoU(a))return this._selection[0].style.display;k.each(this._selection,function(c,b){b.style.display=a});return this};d.prototype.visibility=function(a){if(g.isNoU(a))return this._selection[0].style.visibility;k.each(this._selection,function(c,
b){b.style.visibility=a});return this};d.prototype.show=function(){return this.display("")};d.prototype.hide=function(){return this.display("none")};var k=function(a){return new d(a)};k.find=function(a){return k().find(a)};k.each=function(a,c){if(null!=a)for(var b=0,d=a.length;b<d;b++){var g=a[b];g instanceof Element&&(g=k(g));if(!1===c.call(g,b,a[b]))break}return this};k.hasClass=function(a,c){var b=c.match(/\S+/g)||[],d=!1;k.each(b,function(c,b){if(d=a.classList?a.classList.contains(b):(new RegExp("(^| )"+
b+"( |$)","gi")).test(a.className))return!1});return d};k.ajax=function(a){var c;c=g.isNoU(a)||g.isNoU(a.url)?a:a.url;var b=new XMLHttpRequest;b.open("GET",c);b.onload=function(){200===b.status?g.isFunction(a.success)&&a.success(b.responseText):g.isFunction(a.error)&&a.error(b);g.isFunction(a.then)&&a.then(b)};b.send();return this};k.wrapElement=function(a,c){var b=document.createElement(a);"string"===typeof c?b.innerHTML=c:b.appendChild(c);return b};k.wrapCss=function(a,c){for(var b=/([.,\w])([^/{};]+)({)/g,
d,g=null,h="";d=b.exec(c);){if(null!=g){var g=c.substring(g.index,d.index),f=/(.*)[^s]\{([^\}]+)[\}]/g.exec(g);if(null!=f&&1<f.length){var m=f[1].split(",");k.each(m,function(c,b){h+="\n"+a+"\n"+b;c<m.length-1&&(h+=", ")});h+=" {"+f[2]+"}\n"}else console.log("ZUIX WARNING: z$.wrapCss was unable to parse rule.",f,g)}g=d}null!=g&&(h+=a+" "+c.substring(g.index));""!=h&&(c=h);return c};k.appendCss=function(a,c){var b=null,d;"string"===typeof a?(d=document.head||document.getElementsByTagName("head")[0],
b=document.createElement("style"),b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a))):a instanceof Element&&(b=a);g.isNoU(c)||d.removeChild(c);g.isNoU(b)||d.appendChild(b);return b};k.getClosest=function(a,b){for(;a&&a!==document;a=a.parentNode)if(a.matches(b))return a;return null};k.getPosition=function(a){for(var b=k.isInView(a),c=0,d=0;a;){if("BODY"==a.tagName)var g=a.scrollTop||document.documentElement.scrollTop,c=c+(a.offsetLeft-(a.scrollLeft||document.documentElement.scrollLeft)+
a.clientLeft),d=d+(a.offsetTop-g+a.clientTop);else c+=a.offsetLeft-a.scrollLeft+a.clientLeft,d+=a.offsetTop-a.scrollTop+a.clientTop;a=a.offsetParent}return{x:c,y:d,visible:b}};k.isInView=function(a){if(null===a.offsetParent)return!1;a=a.getBoundingClientRect();return 0<a.bottom&&0<a.right&&a.left<(window.innerWidth||document.documentElement.clientWidth)&&a.top<(window.innerHeight||document.documentElement.clientHeight)};k.ZxQuery=d;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||
Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var c=a.length;0<=--c&&a.item(c)!==this;);return-1<c});(function(){function a(c,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(c,b.bubbles,b.cancelable,b.detail);return d}if("function"===typeof window.CustomEvent)return!1;
a.prototype=window.Event.prototype;window.CustomEvent=a})();n.exports=k},{"./Util.js":2}],4:[function(m,n,p){m=m("./zuix/Zuix.js");"object"===typeof n&&n.exports?n.exports=m.call(this):this.zuix=m.call(this)},{"./zuix/Zuix.js":7}],5:[function(m,n,p){function b(a,c){this._options=null;this.contextId=null==a||null==a.contextId?null:a.contextId;this.componentId=null;this.trigger=function(a,b,k){"function"===typeof c&&c(a,b,k)};this.behavior=this._controller=this._style=this._css=this._view=this._model=
this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}var f=m("../helpers/ZxQuery"),c=m("../helpers/Util");b.prototype.container=function(a){if(null==a)return this._container;this._container=a;return this};b.prototype.view=function(a){if("undefined"===typeof a)return this._view;"string"===typeof a?(a={content:a},this.trigger(this,"html:parse",a),a=a.content,null!=this._container?(this._view=this._container,this._view.innerHTML+=a):(a=f.wrapElement("div",
a),null!=this._view?this._view.innerHTML=a.innerHTML:this._view=a),f(this._view).find("script").each(function(a,c){"true"!==this.attr("zuix-loaded")&&(this.attr("zuix-loaded","true"),eval.call(window,c.innerHTML))}),this.trigger(this,"view:process",f(this._view))):(a instanceof f.ZxQuery&&(a=a.get()),null!=this._container?(this._view=f.wrapElement("div",a.outerHTML).firstElementChild,this._view.removeAttribute("data-ui-view"),this._container.appendChild(this._view),this._view=this._container):this._view=
a);a=f(this._view);!1===this._options.css?a.addClass("zuix-css-ignore"):a.removeClass("zuix-css-ignore");this.modelToView();return this};b.prototype.style=function(a){if("undefined"===typeof a)return this._style;null==a||a instanceof Element?(this._css=a instanceof Element?a.innerText:a,this._style=f.appendCss(a,this._style)):"string"===typeof a&&(this._css=a,a=f.wrapCss('[data-ui-component="'+this.componentId+'"]:not(.zuix-css-ignore)',a),a={content:a},this.trigger(this,"css:parse",a),a=a.content,
this._style=f.appendCss(a,this._style));return this};b.prototype.model=function(a){if("undefined"===typeof a)return this._model;this._model=a;this.modelToView();return this};b.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};b.prototype.options=function(a){if(null==a)return this._options;this._options=a;null!=a.componentId&&(this.componentId=a.componentId);this.container(a.container);this.view(a.view);"undefined"!==typeof a.css&&this.style(a.css);
this.controller(a.controller);this.model(a.model);return this};b.prototype.on=function(a,c){this._c.on(a,c);return this};b.prototype.loadCss=function(a,b){var g=this,h=g.componentId+".css"+(b?"?"+(new Date).getTime():"");c.isNoU(a)&&(a={});c.isNoU(a.caching)||(b=a.caching);c.isNoU(a.path)||(h=a.path);f.ajax({url:h,success:function(b){g.style(b);c.isFunction(a.success)&&a.success.call(g)},error:function(b){console.log(b,g);c.isFunction(a.error)&&a.error.call(g,b)},then:function(){c.isFunction(a.then)&&
a.then.call(g)}});return this};b.prototype.loadHtml=function(a,b){var g=this,h=g.componentId;c.isNoU(a)&&(a={});c.isNoU(a.caching)||(b=a.caching);c.isNoU(a.path)||(h=a.path);var k=f().find('[data-ui-view="'+h+'"]:not([data-ui-component*=""])');0<k.length()?(h=k.get(0),g.view()===h||null!=g.container()&&g.container().contains(h)?g.view(h):g.view(h.outerHTML),c.isFunction(a.success)&&a.success.call(g),c.isFunction(a.then)&&a.then.call(g)):(h==g.componentId&&(h+=".html"+(b?"?"+(new Date).getTime():"")),
f.ajax({url:h,success:function(b){g.view(b);c.isFunction(a.success)&&a.success.call(g)},error:function(b){console.log(b,g);c.isFunction(a.error)&&a.error.call(g,b)},then:function(){c.isFunction(a.then)&&a.then.call(g)}}));return this};b.prototype.viewToModel=function(){var a=this;this._model={};f(this._view).find("[data-ui-field]").each(function(b,c){if(0<this.parent("pre,code").length())return!0;var h=this.attr("data-ui-field"),f="";switch(c.tagName.toLowerCase()){case "img":f=c.src;break;case "input":f=
c.value;break;default:f=c.innerHTML}if(0<h.indexOf(".")){for(var h=h.split("."),e=a._model,m=0;m<h.length-1;m++)"undefined"===typeof e[h[m]]&&(e[h[m]]={}),e=e[h[m]];e[h[h.length-1]]=f}else a._model[h]=f});return this};b.prototype.modelToView=function(){if(null!=this._view&&null!=this._model){var a=this;f(this._view).find("[data-ui-field]").each(function(b,g){if(0<this.parent("pre,code").length())return!0;var h=this.attr("data-bind-to");null==h&&(h=this.attr("data-ui-field"));if("function"===typeof a._model)a._model.call(f(a._view),
this,h);else{var k=c.propertyFromPath(a._model,h);if("function"===typeof k)k.call(f(a._view),this,h);else if(null!=k)switch(g.tagName.toLowerCase()){case "img":g.src=k;break;case "input":g.value=k;break;default:g.innerHTML=k}}})}return this};n.exports=b},{"../helpers/Util":2,"../helpers/ZxQuery":3}],6:[function(m,n,p){function b(b){var a=this;this._view=null;this.context=b;this._fieldCache=[];this.destroy=this.create=null;this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(b,
c){a._childNodes.push(c)})};this.restoreView=function(){0<this._childNodes.length&&(a.view().html(""),f.each(a._childNodes,function(b,c){a.view().append(c)}),this._childNodes.length=0)};this.on=function(a,b){this.addEvent(this.view(),a,b);return this};this.mapEvent=function(a,b,c,d){null!=b&&(b.off(c,this.eventRouter),a[c]=d,b.on(c,this.eventRouter))};this.eventRouter=function(d){"function"===typeof b._behaviorMap[d.type]&&b._behaviorMap[d.type].call(a.view(),d,d.detail);"function"===typeof b._eventMap[d.type]&&
b._eventMap[d.type].call(a.view(),d,d.detail)};var d=b.options(),g=null;if(null!=d.on)for(var h in d.on)g=d.on[h],a.addEvent(a.view(),h,g);if(null!=d.behavior)for(var k in d.behavior)g=d.behavior[k],a.addBehavior(a.view(),k,g);b.controller().call(this,this);return this}var f=m("../helpers/ZxQuery");b.prototype.addEvent=function(b,a,d){this.mapEvent(this.context._eventMap,b,a,d);return this};b.prototype.addBehavior=function(b,a,d){this.mapEvent(this.context._behaviorMap,b,a,d);return this};b.prototype.field=
function(b){var a=this,d=null;"undefined"===typeof this._fieldCache[b]?(d=this.view().find("[data-ui-field="+b+"]"),null!=d&&(d.on=function(b,c,k,e){if("string"===typeof c){var m=c;c=function(){a.trigger(m,k,e)}}f.ZxQuery.prototype.on.call(d,b,c)},this._fieldCache[b]=d)):d=this._fieldCache[b];return d};b.prototype.clearCache=function(){this._fieldCache.length=0};b.prototype.view=function(b){if(null!=this.context.view()||this._view!==this.context.view())this._view=f(this.context.view());if(null!=b)return this._view.find(b);
if(null!==this._view)return this._view;throw{message:"Not attacched to a view yet.",source:this};};b.prototype.model=function(b){if(null==b)return this.context.model();this.context.model(b);return this};b.prototype.options=function(){return this.context.options()};b.prototype.trigger=function(b,a,d){null==this.context._eventMap[b]&&!0!==d&&this.addEvent(this.view(),b,null);!0===d?this.context.trigger(this.context,b,a):this.view().trigger(b,a);return this};b.prototype.expose=function(b,a){this.context[b]=
a;return this};b.prototype.loadCss=function(b){this.context.loadCss(b);return this};b.prototype.loadHtml=function(b){this.saveView();this.context.loadHtml(b);return this};b.prototype.for=function(b){return this};n.exports=b},{"../helpers/ZxQuery":3}],7:[function(m,n,p){function b(){return this}function f(a){t.requestLock(f)?(q(a).find("[data-ui-load]:not([data-ui-loaded=true]),[data-ui-include]:not([data-ui-loaded=true])").each(function(a,b){this.visibility("hidden");var d=b.lazyContainer||q.getClosest(b,
"[data-ui-lazyload=scroll]");b.lazyContainer=d;if(!(null!=d&&"force"==d.getAttribute("data-ui-lazyload")||k()&&"false"!=this.attr("data-ui-lazyload")))return c(b),!0;if(null!==d&&(-1==F.indexOf(d)&&(F.push(d),q(d).on("scroll",function(){f(d)})),!q.getPosition(b).visible))return-1==v.indexOf(b)&&v.push(b),!0;var E=v.indexOf(b);-1<E&&v.splice(E,1);c(b)}),t.releaseLock(f)):t.lockLater(f,function(){f(a)},200)}function c(b){var c=q(b);if("true"===c.attr("data-ui-loaded")||0<c.parent("pre,code").length())console.log("ZUIX",
"WARN","Skipped",b);else{c.attr("data-ui-loaded","true");var d=c.attr("data-ui-options");l.isNoU(d)?d={}:(d=l.propertyFromPath(window,d),d=l.cloneObject(d)||{});l.isNoU(d.view)&&!c.isEmpty()?(d.view=b,d.viewDeferred=!0):l.isNoU(d.view)&&l.isNoU(d.container)&&c.isEmpty()&&(d.container=b);b=c.attr("data-ui-load");l.isNoU(b)&&(b=c.attr("data-ui-include"),c.attr("data-ui-component",b),l.isNoU(d.controller)&&(d.controller=function(){}));var e=c.attr("data-bind-model");!l.isNoU(e)&&0<e.length&&(d.model=
l.propertyFromPath(window,e));e=c.attr("data-ui-context");l.isNoU(e)||(d.contextId=e);c=c.attr("data-ui-priority");l.isNoU(c)||(d.priority=c);a(b,d)}}function a(a,b){var c=null;l.isNoU(b)?(b={},c=new D(b,h)):l.isNoU(b.contextId)?(!1===b&&(b={}),b.contextId="zuix-ctx-"+ ++J,c=d(b)):(c=g(b.contextId),null!==c?c.options(b):c=d(b));c.componentId!=a&&(c.componentId=a);l.isFunction(b.ready)&&(c.ready=b.ready);l.isFunction(b.error)&&(c.error=b.error);if(l.isNoU(b.view)){var f=e(c.componentId);null!==f&&
l.isNoU(c.controller())&&c.controller(f.controller);if(null!==f&&null!=f.view){if(c.view(f.view),!1!==b.css)return c.loadCss({caching:!r,error:function(a){console.log(a,c)},then:function(){u(c)}}),c}else if(l.isNoU(c.view()))return t.queue("html:"+c.componentId,function(){var a=this;c.loadHtml({caching:!r,success:function(){!1!==b.css?c.loadCss({caching:!r,error:function(a){console.log(a,c)},then:function(){u(c,a)}}):u(c,a)},error:function(a){console.log(a,c);l.isFunction(b.error)&&c.error.call(c,
a)}})},b.priority),c}else c.view(b.view);u(c);return c}function d(a){a=new D(a,h);z.push(a);return a}function g(a){var b=null;a instanceof q.ZxQuery&&(a=a.get());q.each(z,function(c,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||l.objectEquals(d.contextId,a))return b=d,!1});return b}function h(a,b,c){l.isFunction(A[b])&&A[b].call(a,c);"view:process"==b&&f(c)}function k(a){null!=a&&(G=!a);return!B&&!G}function e(a){var b=null;q.each(y,function(c,d){if(l.objectEquals(d.componentId,a))return b=
d,!1});return b}function u(a,b){if("undefined"===typeof a.options().controller&&null===a.controller())if(l.isFunction(C[a.componentId]))a.controller(C[a.componentId]),x(a),l.isNoU(b)||b.end();else{var c=function(b){q.ajax({url:a.componentId+".js"+(r?"":"?"+(new Date).getTime()),success:function(b){console.log("@@@",a.componentId+".js"+(r?"":"?"+(new Date).getTime()));try{var c=b.indexOf("function"),d=b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,d-4));var e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+
11));var f=b.indexOf("//<--controller");0<f&&(b=b.substring(0,f));a.controller(H(b))}catch(g){console.log(Error(),g,b,a),l.isFunction(a.error)&&a.error.call(a,g)}},error:function(b){console.log(b,Error(),a);l.isFunction(a.error)&&a.error.call(a,b)},then:function(){x(a);b.end()}})};l.isNoU(b)?t.queue("js:"+a.componentId,function(){c(this)},a.options().priority):c(b)}else x(a),l.isNoU(b)||b.end()}function x(a){if(!l.isNoU(a.view())){if(!a.options().viewDeferred&&null===e(a.componentId)){var b=a.view()===
a.container()?a.view().innerHTML:a.view().outerHTML,b=q.wrapElement("div",b);y.push({componentId:a.componentId,view:b.innerHTML,controller:a.controller()})}l.isFunction(a.controller())&&(b=a._c=new I(a),l.isNoU(b.view())||(b.view().attr("data-ui-component",a.componentId),l.isNoU(a.model())&&!l.isNoU(a.view())&&a.viewToModel(),b.trigger("view:apply"),a.options().viewDeferred&&(a.options().viewDeferred=!1,b.saveView(),!1!==a.options().css&&a.loadCss({caching:!r}),!1!==a.options().html&&a.loadHtml({caching:!r})),
b.view().css("visibility","")),l.isFunction(b.create)&&b.create(),b.trigger("view:create"));l.isFunction(a.ready)&&a.ready.call(a)}}function H(a){var b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(c){console.log(this,c,a)}return b}var l=m("../helpers/Util"),q=m("../helpers/ZxQuery");p=m("../helpers/TaskQueue");var D=m("./ComponentContext"),I=m("./ContextController"),y=[],J=0,z=[],A=[],C={},v=[],F=[],t=new p(function(a,b,c){h(a,b,c)}),B=!1,G=!1,r=!1;navigator&&navigator.userAgent&&
(B=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));B&&console.log(navigator.userAgent,"is a bot, ignoring 'data-ui-lazyload' option.");b.prototype.controller=function(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return C[b]=a});return a};b.prototype.field=function(a,b){return q(b).find('[data-ui-field="'+a+'"]')};b.prototype.componentize=function(a){f(a);return this};b.prototype.load=a;b.prototype.unload=function(a){l.isNoU(a)||l.isNoU(a._c)||(l.isNoU(a._c.view())||
a._c.view().attr("data-ui-component",null),l.isFunction(a._c.destroy)&&a._c.destroy());return this};b.prototype.context=g;b.prototype.trigger=function(a,b,c){h(a,b,c);return this};b.prototype.hook=function(a,b){l.isNoU(b)||(A[a]=b);return this};b.prototype.lazyLoad=k;b.prototype.httpCaching=function(a){null!=a&&(r=!a);return!r};b.prototype.$=q;b.prototype.TaskQueue=p;b.prototype.ZxQuery=q.ZxQuery;b.prototype.dumpCache=function(){console.log("ZUIX","Component Cache",y)};b.prototype.dumpContexts=function(){console.log("ZUIX",
"Loaded Component Instances",z)};n.exports=function(a){var c=new b;document.addEventListener("DOMContentLoaded",function(a){c.componentize()});return c}},{"../helpers/TaskQueue":1,"../helpers/Util":2,"../helpers/ZxQuery":3,"./ComponentContext":5,"./ContextController":6}]},{},[4])(4)});
//# sourceMappingURL=zuix.min.js.map
