/*

 Copyright 2015-2017 G-Labs. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp={scope:{},findInternal:function(d,k,l){d instanceof String&&(d=String(d));for(var m=d.length,n=0;n<m;n++){var q=d[n];if(k.call(l,q,n,d))return{i:n,v:q}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,k,l){if(l.get||l.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[k]=l.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,k,l,m){if(k){l=$jscomp.global;d=d.split(".");for(m=0;m<d.length-1;m++){var n=d[m];n in l||(l[n]={});l=l[n]}d=d[d.length-1];m=l[d];k=k(m);k!=m&&null!=k&&$jscomp.defineProperty(l,d,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,l){return $jscomp.findInternal(this,d,l).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var k=0;return $jscomp.iteratorPrototype(function(){return k<d.length?{done:!1,value:d[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(d,k){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var l=0,m={next:function(){if(l<d.length){var n=l++;return{value:k(n,d[n]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6-impl","es3");
function Zuix(){function d(a){this._options=null;this.contextId=e.isNoU(a)||e.isNoU(a.contextId)?null:a.contextId;this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=this.componentId=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}function k(a){var b=this;this.context=a;this.componentId=a.componentId;this.view=function(){return a.view()};this.model=function(){return a.model()};this.expose=function(b,c){a[b]=c};this.behavior=
function(){return a.behavior};this.mapEvent=function(a,b,c,f){e.isNoU(b)||(b=g(b),b.off(c,this.eventRouter),a[c]=f,b.on(c,this.eventRouter))};this._fieldCache=[];this.api=this.event=this.refresh=this.destroy=this.pause=this.resume=this.create=null;this.trigger=function(c,f){e.isNoU(a._eventMap[c])&&this.addEvent(b.view(),c,null);g(b.view()).trigger(c,f)};this.on=function(a,c){this.addEvent(b.view(),a,c)};this.invoke=function(a,c){e.isFunction(b.api)&&b.api(a,c)};this.eventRouter=function(c){e.isFunction(a._behaviorMap[c.type])&&
a._behaviorMap[c.type].call(b.view(),c,c.detail);e.isFunction(a._eventMap[c.type])&&a._eventMap[c.type].call(b.view(),c,c.detail)};var c=a.options(),f=null;if(!e.isNoU(c.on))for(var d in c.on)f=c.on[d],b.addEvent(b.view(),d,f);if(!e.isNoU(c.behavior))for(var h in c.behavior)f=c.behavior[h],b.addBehavior(b.view(),h,f);a.controller().call(this,this);return this}function l(a){return a}function m(a,b){return g(b).find('[data-ui-field\x3d"'+a+'"]').get(0)}function n(a){g(a).find("[data-ui-load],[data-ui-include]").each(function(){var a=
g(this);if("true"===a.attr("data-ui-loaded")||0<a.parent("pre,code").length())console.log("ZUIX","WARN","Skipped",this);else{a.attr("data-ui-loaded","true");var c=a.attr("data-ui-options");e.isNoU(c)?c={}:(c=e.propertyFromPath(window,c),c=e.cloneObject(c)||{});e.isNoU(c.view)&&!a.isEmpty()?c.view=this:e.isNoU(c.view)&&e.isNoU(c.container)&&a.isEmpty()&&(c.container=this);var f=a.attr("data-ui-load");e.isNoU(f)&&(f=a.attr("data-ui-include"),a.attr("data-ui-component",f),e.isNoU(c.controller)&&(c.controller=
function(){}));a=a.attr("data-bind-model");!e.isNoU(a)&&0<a.length&&(c.model=e.propertyFromPath(window,a));q(f,c)}})}function q(a,b){var c=null;e.isNoU(b)?(b={},c=new d(b)):e.isNoU(b.contextId)?(!1===b&&(b={}),b.contextId="zuix-ctx-"+ ++E,c=A(b)):(c=B(b.contextId),null!==c?c.options(b):c=A(b));c.componentId!=a&&(c.componentId=a);a=C(c.componentId);null!==a&&e.isNoU(c.controller())&&c.controller(a.controller);e.isFunction(b.ready)&&(c.ready=b.ready);e.isFunction(b.error)&&(c.error=b.error);if(e.isNoU(b.view)){if(null!==
a?c.view(a.view):(a=g().find('[data-ui-view\x3d"'+c.componentId+'"]'),0<a.length()&&c.view(a.get(0))),e.isNoU(c.view()))return t.queue("html:"+c.componentId,function(){var a=this;g.ajax({url:c.componentId+".html?"+(new Date).getTime(),success:function(f){c.view(f);a.end();!1!==b.css?F(c,function(){u(c)}):u(c)},error:function(f){a.end();console.log(f,c);e.isFunction(b.error)&&c.error(c,f)}})}),c}else c.view(b.view);u(c);return c}function G(a){e.isNoU(a)||e.isNoU(a._c)||(e.isNoU(a._c.view())||a._c.view().removeAttribute("data-ui-component"),
e.isFunction(a._c.destroy)&&a._c.destroy())}function B(a){var b=null;g.each(v,function(c,f){if(a instanceof Node&&f.view()===a||e.objectEquals(f.contextId,a))return b=f,!1});return b}function A(a){a=new d(a);v.push(a);return a}function C(a){var b=null;g.each(w,function(c,f){if(e.objectEquals(f.componentId,a))return b=f,!1});return b}function F(a,b){t.queue("css:"+a.componentId,function(){var c=this;g.ajax({url:a.componentId+".css?"+(new Date).getTime(),success:function(f){a.style(f);c.end();e.isFunction(b)&&
b.call(a)},error:function(f){c.end();console.log(f,a);e.isFunction(b)&&b.call(a)}})})}function u(a){"undefined"===typeof a.options().controller&&null===a.controller()?t.queue("js:"+a.componentId,function(){var b=this;g.ajax({url:a.componentId+".js?"+(new Date).getTime(),success:function(c){try{var f=c.indexOf(".load");1<f&&(c=c.substring(0,f-4));var d=c.indexOf(".controller");1<d&&(c=c.substring(d+11));a.controller(H(c))}catch(z){console.log(z,c,a);e.isFunction(a.error)&&a.error(a,z);return}x(a);
b.end()},error:function(c){b.end();x(a);console.log(c,a);e.isFunction(a.error)&&a.error(a,c)}})}):x(a)}function x(a){if(!e.isNoU(a.view())){if(null===C(a.componentId)){var b=a.view()===a.container()?a.view().innerHTML:a.view().outerHTML,b=g.wrapElement("div",b);w.push({componentId:a.componentId,view:b.innerHTML,controller:a.controller()})}e.isFunction(a.controller())&&(b=a._c=new k(a),e.isNoU(b.view())||b.view().setAttribute("data-ui-component",b.componentId),e.isFunction(b.create)&&b.create(),b.trigger("view:create"),
a.updateModelView(),e.isFunction(b.resume)&&b.resume());e.isFunction(a.ready)&&a.ready(a)}}function H(a){var b=function(a){};"string"===typeof a&&(b=D(a));return b}function p(a,b,c){e.isFunction(r[b])&&r[b].call(a,b,c)}function I(a,b){if(e.isNoU(b))return r[a];r[a]=b;return this}function y(){var a=this;a._worker=null;a._taskList=[];a.taskQueue=function(b,c){a._taskList.push({tid:b,fn:c,status:0,end:function(){this.status=2}});a.check()};a.check=function(){null!=a._worker&&clearTimeout(a._worker);
a._worker=setTimeout(function(){a.taskCheck()},10)};a.taskCheck=function(){for(var b=-1,c=0;c<a._taskList.length;c++)if(-2!=b&&0==a._taskList[c].status)b=c;else{if(1==a._taskList[c].status){a.check();p(a,"load:step",{task:a._taskList[c].tid});return}if(2==a._taskList[c].status){p(this,"load:next",{task:a._taskList[c].tid});a._taskList.splice(c,1);a.check();return}}0<=b?(a._taskList[b].status=1,a._taskList[b].fn.call(a._taskList[b]),a.check(),p(a,"load:begin",{task:a._taskList[b].tid})):p(a,"load:end")}}
function h(a){this._selection=[];"undefined"===typeof a&&(a=document.documentElement);if(a instanceof h)return a;if(a instanceof HTMLCollection||a instanceof NodeList||Array.isArray(a))this._selection=a;else if(a instanceof HTMLElement||a instanceof Node)this._selection=[a];else if("string"===typeof a)this._selection=document.documentElement.querySelectorAll(a);else if(null!==a)throw console.log(typeof a),a;return this}var w=[],v=[];d.prototype.options=function(a){if(e.isNoU(a))return this._options;
this._options=a;e.isNoU(a)||(e.isNoU(a.componentId)||(this.componentId=a.componentId),this.container(a.container),this.view(a.view),"undefined"!==typeof a.css&&this.style(a.css),this.controller(a.controller),this.model(a.model));return this};d.prototype.ready=function(a){};d.prototype.error=function(a,b){};d.prototype.on=function(a,b){return this._c.on(a,b)};d.prototype.invoke=function(a,b){return this._c.invoke(a,b)};d.prototype.model=function(a){if("undefined"===typeof a)return this._model;this._model=
a;this.updateModelView();return this};d.prototype.updateModelView=function(){if(!e.isNoU(this._view)&&!e.isNoU(this._model)){var a=this;g(this._view).find("[data-ui-field]").each(function(b,c){c=g(this);b=c.attr("data-bind-to");e.isNoU(b)&&(b=c.attr("data-ui-field"));if(e.isFunction(a._model))a._model.call(a._view,this,b);else if(c=e.propertyFromPath(a._model,b),e.isFunction(c))c.call(a._view,this,b);else if(!e.isNoU(c))switch(this.tagName.toLowerCase()){case "img":this.src=c;break;case "input":this.value=
c;break;default:this.innerHTML=c}})}};d.prototype.style=function(a){if("undefined"===typeof a)return this._style;null==a||a instanceof Element?(this._css=a instanceof Element?a.innerText:a,this._style=g.appendCss(a,this._style)):"string"===typeof a&&(this._css=a,a=g.wrapCss('[data-ui-component\x3d"'+this.componentId+'"]:not(.zuix-css-ignore)',a),a={content:a},p(this,"css:parse",a),a=a.content,this._style=g.appendCss(a,this._style));return this};d.prototype.view=function(a){if("undefined"===typeof a)return this._view;
"string"===typeof a?(a={content:a},p(this,"html:parse",a),a=a.content,e.isNoU(this._container)?this._view=g.wrapElement("div",a):(this._view=this._container,this._view.innerHTML+=a),g(this._view).find("script").each(function(){"true"!==this.getAttribute("zuix-loaded")&&(this.setAttribute("zuix-loaded","true"),D.call(window,this.innerHTML))}),p(this,"view:process",this._view),n(this._view),this.updateModelView()):e.isNoU(this._container)?this._view=a:(this._view=g.wrapElement("div",a.outerHTML).firstElementChild,
this._view.removeAttribute("data-ui-view"),this._container.appendChild(this._view),this._view=this._container);a=g(this._view);!1===this._options.css?a.addClass("zuix-css-ignore"):a.removeClass("zuix-css-ignore");return this};d.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};d.prototype.container=function(a){if(e.isNoU(a))return this._container;this._container=a;return this};k.prototype.addEvent=function(a,b,c){this.mapEvent(this.context._eventMap,
a,b,c);return this};k.prototype.addBehavior=function(a,b,c){this.mapEvent(this.context._behaviorMap,a,b,c);return this};k.prototype.field=function(a,b){var c=b?"@"+a:a;"undefined"===typeof this._fieldCache[c]?(a=b?g(a).get(0):g(this.view()).find("[data-ui-field\x3d"+a+"]").get(0),e.isNoU(a)||(this._fieldCache[c]=a)):a=this._fieldCache[c];return a};k.prototype.clearCache=function(){this._fieldCache.length=0};var D=eval,E=0,r=[],e={isNoU:function(a){return"undefined"===typeof a||null===a},isFunction:function(a){return"function"===
typeof a},objectEquals:function(a,b){if(null===a||void 0===a||null===b||void 0===b)return a===b;if(a.constructor!==b.constructor)return!1;if(a instanceof Function||a instanceof RegExp)return a===b;if(a===b||a.valueOf()===b.valueOf())return!0;if(Array.isArray(a)&&a.length!==b.length||a instanceof Date||!(a instanceof Object)||!(b instanceof Object))return!1;var c=Object.keys(a);return Object.keys(b).every(function(a){return-1!==c.indexOf(a)})&&c.every(function(c){return e.objectEquals(a[c],b[c])})},
propertyFromPath:function(a,b){if("string"===typeof b){b=b.replace(/\[(\w+)]/g,".$1");b=b.replace(/^\./,"");b=b.split(".");for(var c=0,f=b.length;c<f;++c){var d=b[c];if("undefined"!==typeof a[d])a=a[d];else return}return a}},cloneObject:function b(c){if(null===c||"object"!==typeof c)return c;var f=c.constructor(),d;for(d in c)f[d]=b(c[d]);return f}};y.prototype.queue=function(b,c){return this.taskQueue(b,c)};var t=new y;h.prototype.length=function(){return this._selection.length};h.prototype.parent=
function(b){return e.isNoU(b)?new h(this._selection[0].parentNode):new h(g.getClosest(this._selection[0],b))};h.prototype.children=function(b){return e.isNoU(b)?new h(this._selection[0].children):new h(this._selection[0].querySelectorAll(b))};h.prototype.get=function(b){e.isNoU(b)&&(b=0);return this._selection[b]};h.prototype.eq=function(b){return new h(this._selection[b])};h.prototype.find=function(b){return new h(this._selection[0].querySelectorAll(b))};h.prototype.each=function(b){g.each(this._selection,
b);return this};h.prototype.attr=function(b,c){if(e.isNoU(c))return this._selection[0].getAttribute(b);this.each(function(f,d){this.setAttribute(b,c)});return this};h.prototype.trigger=function(b,c){var f;window.CustomEvent?f=new CustomEvent(b,{detail:c}):(f=document.createEvent("CustomEvent"),f.initCustomEvent(b,!0,!0,c));this.each(function(b,c){this.dispatchEvent(f)});return this};h.prototype.one=function(b,c){var f=!1;this.on(b,function(d,e){f||(f=!0,g(this).off(b,c),c.call(this,d,e))});return this};
h.prototype.on=function(b,c){var d=b.match(/\S+/g)||[];this.each(function(b,f){var e=this;g.each(d,function(b,d){e.addEventListener(d,c,!1)})});return this};h.prototype.off=function(b,c){var d=b.match(/\S+/g)||[];this.each(function(b,f){var e=this;g.each(d,function(b,d){e.removeEventListener(d,c)})});return this};h.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};h.prototype.css=function(b,c){if(e.isNoU(c))return this._selection[0].style[b];this.each(function(d,
e){this.style[b]=c});return this};h.prototype.addClass=function(b){var c=b.match(/\S+/g)||[];g.each(this._selection,function(d,e){if(this.classList){var f=this;g.each(c,function(b,c){f.classList.add(c)})}else this.className+=" "+b});return this};h.prototype.hasClass=function(b){b=b.match(/\S+/g)||[];var c=!1,d=this._selection[0];g.each(b,function(b,f){if(c=d?d.classList.contains(f):(new RegExp("(^| )"+f+"( |$)","gi")).test(d.className))return!1});return c};h.prototype.removeClass=function(b){var c=
b.match(/\S+/g)||[];g.each(this._selection,function(d,e){if(this.classList){var f=this;g.each(c,function(b,c){f.classList.remove(c)})}else this.className=this.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};h.prototype.prev=function(){return new h(this._selection[0].previousElementSibling)};h.prototype.next=function(){return new h(this._selection[0].nextElementSibling)};h.prototype.html=function(b){if(e.isNoU(b))return this._selection[0].innerHTML;
this.each(function(c,d){this.innerHTML=b});return this};h.prototype.display=function(b){g.each(this._selection,function(c,d){this.style.display=b});return this};h.prototype.show=function(){return this.display("")};h.prototype.hide=function(){return this.display("none")};var g=function(b){return new h(b)};g.find=function(b){return g().find(b)};g.each=function(b,c){for(var d=0,e=b.length;d<e&&!1!==c.call(b[d],d,b[d]);d++);return this};g.ajax=function(b){var c;c=e.isNoU(b)||e.isNoU(b.url)?b:b.url;var d=
new XMLHttpRequest;d.open("GET",c);d.onload=function(){200===d.status?e.isFunction(b.success)&&b.success(d.responseText):e.isFunction(b.error)&&b.error(d)};d.send();return this};g.wrapElement=function(b,c){b=document.createElement(b);"string"===typeof c?b.innerHTML=c:b.appendChild(c);return b};g.wrapCss=function(b,c){for(var d=/([.,\w])([^/{};]+)({)/g,e,g=null,h="";e=d.exec(c);)null!=g&&(h+=b+" "+c.substring(g.index,e.index)),g=e;null!=g&&(h+=b+" "+c.substring(g.index));""!=h&&(c=h);return c};g.appendCss=
function(b,c){var d=null,g;"string"===typeof b?(g=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style"),d.type="text/css",d.styleSheet?d.styleSheet.cssText=b:d.appendChild(document.createTextNode(b))):b instanceof Element&&(d=b);e.isNoU(c)||g.removeChild(c);e.isNoU(d)||g.appendChild(d);return d};g.getClosest=function(b,c){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||
Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var c=b.length;0<=--c&&b.item(c)!==this;);return-1<c});for(;b&&b!==document;b=b.parentNode)if(b.matches(c))return b;return null};return this.zuix=this.zuix||{controller:l,load:q,unload:G,componentize:n,context:B,hook:function(b,c){I(b,c);return this},$:g,field:m,TaskQueue:y,ZQuery:h,dumpCache:function(){console.log("ZUIX","Component Cache",w)},dumpContexts:function(){console.log("ZUIX",
"Loaded Component Instances",v)}}}(function(d,k){"function"===typeof define&&define.amd?define(["zuix"],function(){return d.zuix=k.call(d)}):"object"===typeof module&&module.exports?module.exports=k.call(d):d.zuix=k.call(d)})(this,Zuix);
//# sourceMappingURL=zuix.min.js.map
