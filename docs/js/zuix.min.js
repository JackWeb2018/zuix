/*

 Copyright 2015-2017 G-Labs. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp={scope:{},findInternal:function(d,k,l){d instanceof String&&(d=String(d));for(var m=d.length,n=0;n<m;n++){var q=d[n];if(k.call(l,q,n,d))return{i:n,v:q}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,k,l){if(l.get||l.set)throw new TypeError("ES3 does not support getters and setters.");d!=Array.prototype&&d!=Object.prototype&&(d[k]=l.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,k,l,m){if(k){l=$jscomp.global;d=d.split(".");for(m=0;m<d.length-1;m++){var n=d[m];n in l||(l[n]={});l=l[n]}d=d[d.length-1];m=l[d];k=k(m);k!=m&&null!=k&&$jscomp.defineProperty(l,d,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,l){return $jscomp.findInternal(this,d,l).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(d){var k=0;return $jscomp.iteratorPrototype(function(){return k<d.length?{done:!1,value:d[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(d,k){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var l=0,m={next:function(){if(l<d.length){var n=l++;return{value:k(n,d[n]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6-impl","es3");
(function(){function d(a){this._options=null;this.contextId=e.isNoU(a)||e.isNoU(a.contextId)?null:a.contextId;this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=this.componentId=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}function k(a){var b=this;this.context=a;this.componentId=a.componentId;this.view=function(){return a.view()};this.model=function(){return a.model()};this.expose=function(b,c){a[b]=c};this.behavior=
function(){return a.behavior};this._fieldCache=[];this.api=this.event=this.refresh=this.destroy=this.pause=this.resume=this.create=null;this.trigger=function(c,h){e.isNoU(a._eventMap[c])&&this.addEvent(b.view(),c,null);f(b.view()).trigger(c,h)};this.on=function(a,c){this.addEvent(b.view(),a,c)};this.invoke=function(a,c){e.isFunction(b.api)&&b.api(a,c)};this.eventRouter=function(c){e.isFunction(a._behaviorMap[c.type])&&a._behaviorMap[c.type].call(b.view(),c,c.detail);e.isFunction(a._eventMap[c.type])&&
a._eventMap[c.type].call(b.view(),c,c.detail)};var c=a.options();if(!e.isNoU(c.on))for(var h in c.on){var d=c.on[h];b.addEvent(b.view(),h,d)}if(!e.isNoU(c.behavior))for(h in c.behavior)d=c.behavior[h],b.addBehavior(b.view(),h,d);a.controller().call(this,this);return this}function l(a){return a}function m(a,b){return f(b).find('[data-ui-field\x3d"'+a+'"]').get(0)}function n(a){f(a).find("[data-ui-load],[data-ui-include]").each(function(){if(!0===f(this).attr("data-ui-loaded")||0<f(this).parent("pre,code").length())console.log("ZUIX",
"WARN","Skipped",this);else{f(this).attr("data-ui-loaded",!0);var a;e.isNoU(f(this).attr("data-ui-options"))?a={}:(a=e.propertyFromPath(window,f(this).attr("data-ui-options")),a=e.cloneObject(a));e.isNoU(a.view)&&!f(this).isEmpty()?a.view=this:e.isNoU(a.view)&&e.isNoU(a.container)&&f(this).isEmpty()&&(a.container=this);var c=f(this).attr("data-ui-load");e.isNoU(c)&&(c=f(this).attr("data-ui-include"),f(this).attr("data-ui-component",c),e.isNoU(a.controller)&&(a.controller=null));q(c,a)}})}function q(a,
b){var c=null;e.isNoU(b)?(b={},c=new d(b)):e.isNoU(b.contextId)?(!1===b&&(b={}),b.contextId="zuix-ctx-"+ ++B,c=new d(b),r.push(c)):(c=C(b.contextId),null!==c?c.options(b):(c=new d(b),r.push(c)));c.componentId!=a&&(c.componentId=a);a=A(c.componentId);null!==a&&e.isNoU(c.controller())&&c.controller(a.controller);e.isFunction(b.ready)&&(c.ready=b.ready);e.isFunction(b.error)&&(c.error=b.error);if(e.isNoU(b.view)){if(null!==a?c.view(a.view):(a=f().find('[data-ui-view\x3d"'+c.componentId+'"]'),0<a.length()&&
c.view(a.get(0))),e.isNoU(c.view()))return u.queue("html:"+c.componentId,function(){var a=this;f.ajax({url:c.componentId+".html?"+(new Date).getTime(),success:function(h){c.view(h);a.end();!1!==b.css?D(c,function(){v(c)}):v(c)},error:function(h){a.end();console.log(h,c);e.isFunction(b.error)&&c.error(c,h)}})}),c}else c.view(b.view);v(c);return c}function E(a){e.isNoU(a)||e.isNoU(a._c)||(e.isNoU(a._c.view())||a._c.view().removeAttr("data-ui-component"),e.isFunction(a._c.destroy)&&a._c.destroy())}function C(a){var b=
null;f.each(r,function(c,h){if(e.objectEquals(h.contextId,a))return b=h,!1});return b}function A(a){var b=null;f.each(w,function(c,h){if(e.objectEquals(h.componentId,a))return b=h,!1});return b}function D(a,b){u.queue("css:"+a.componentId,function(){var c=this;f.ajax({url:a.componentId+".css?"+(new Date).getTime(),success:function(h){a.style(h);c.end();e.isFunction(b)&&b.call(a)},error:function(h){c.end();console.log(h,a);e.isFunction(b)&&b.call(a)}})})}function v(a){"undefined"===typeof a.options().controller&&
null===a.controller()?u.queue("js:"+a.componentId,function(){var b=this;f.ajax({url:a.componentId+".js?"+(new Date).getTime(),success:function(c){try{var h=c.indexOf(".load");1<h&&(c=c.substring(0,h-4));var d=c.indexOf(".controller");1<d&&(c=c.substring(d+11));a.controller(F(c))}catch(z){console.log(z,c,a);e.isFunction(a.error)&&a.error(a,z);return}x(a);b.end()},error:function(c){b.end();x(a);console.log(c,a);e.isFunction(a.error)&&a.error(a,c)}})}):x(a)}function x(a){if(!e.isNoU(a.view())){if(null===
A(a.componentId)){var b=f.wrapElement("div",a.view().outerHTML);w.push({componentId:a.componentId,view:b.innerHTML,controller:a.controller()})}f(a.view()).one("create",function(){f(a.view()).find("script").each(function(){if("true"!==this.getAttribute("zuix-loaded")){this.setAttribute("zuix-loaded","true");var a=document.createElement("script");a.setAttribute("zuix-loaded","true");a.onload=function(){};!e.isNoU(this.type)&&0<this.type.length&&(a.type=this.type);!e.isNoU(this.text)&&0<this.text.length&&
(a.text=this.text);!e.isNoU(this.src)&&0<this.src.length&&(a.src=this.src);this.parentNode.insertBefore(a,this)}});G(a)}).trigger("create")}}function G(a){if(e.isFunction(a.controller())){var b=a._c=new k(a);e.isNoU(b.view())||f(b.view()).attr("data-ui-component",b.componentId);e.isFunction(b.create)&&b.create();e.isFunction(b.resume)&&b.resume();e.isFunction(b.refresh)&&b.refresh()}e.isFunction(a.ready)&&a.ready(a)}function F(a){var b=function(a){};"string"===typeof a&&(b=H(a));return b}function p(a,
b,c){e.isFunction(t[b])&&t[b].call(a,b,c)}function I(a,b){if(e.isNoU(b))return t[a];t[a]=b;return this}function y(){var a=this;a._worker=null;a._taskList=[];a.taskQueue=function(b,c){a._taskList.push({tid:b,fn:c,status:0,end:function(){this.status=2}});a.check()};a.check=function(){null!=a._worker&&clearTimeout(a._worker);a._worker=setTimeout(function(){a.taskCheck()},10)};a.taskCheck=function(){for(var b=-1,c=0;c<a._taskList.length;c++)if(-2!=b&&0==a._taskList[c].status)b=c;else{if(1==a._taskList[c].status){a.check();
p(a,"load:step",{task:a._taskList[c].tid});return}if(2==a._taskList[c].status){p(this,"load:next",{task:a._taskList[c].tid});a._taskList.splice(c,1);a.check();return}}0<=b?(a._taskList[b].status=1,a._taskList[b].fn.call(a._taskList[b]),a.check(),p(a,"load:begin",{task:a._taskList[b].tid})):p(a,"load:end")}}function g(a){this._selection=[];"undefined"===typeof a&&(a=document.documentElement);if(a instanceof g)return a;if(a instanceof HTMLCollection||a instanceof NodeList||Array.isArray(a))this._selection=
a;else if(a instanceof HTMLElement||a instanceof Node)this._selection=[a];else if("string"===typeof a)this._selection=document.documentElement.querySelectorAll(a);else if(null!==a)throw console.log(typeof a),a;return this}var w=[],r=[];d.prototype.options=function(a){if(e.isNoU(a))return this._options;this._options=a;e.isNoU(a)||(e.isNoU(a.componentId)||(this.componentId=a.componentId),this.container(a.container),this.view(a.view),"undefined"!==typeof a.css&&this.style(a.css),this.model(a.model),
this.controller(a.controller));return this};d.prototype.ready=function(a){};d.prototype.error=function(a,b){};d.prototype.on=function(a,b){return this._c.on(a,b)};d.prototype.invoke=function(a,b){return this._c.invoke(a,b)};d.prototype.model=function(a){if("undefined"===typeof a)return this._model;this._model=a;this.updateModelView();return this};d.prototype.updateModelView=function(){if(!e.isNoU(this._view)&&!e.isNoU(this._model)){var a=this;f(this._view).find("[data-ui-field]").each(function(b,
c){b=f(this);c=b.attr("data-bind-to");e.isNoU(c)&&(c=b.attr("data-ui-field"));b=e.propertyFromPath(a._model,c);e.isNoU(b)||(this.innerHTML=b)})}};d.prototype.style=function(a){if("undefined"===typeof a)return this._style;null==a||a instanceof Element?(this._css=a instanceof Element?a.innerText:a,this._style=f.appendCss(a,this._style)):"string"===typeof a&&(this._css=a,a=f.wrapCss('[data-ui-component\x3d"'+this.componentId+'"]:not(.zuix-css-ignore)',a),a={content:a},p(this,"css:parse",a),a=a.content,
this._style=f.appendCss(a,this._style));return this};d.prototype.view=function(a){if("undefined"===typeof a)return this._view;"string"===typeof a?(a={content:a},p(this,"html:parse",a),a=a.content,e.isNoU(this._container)?this._view=f.wrapElement("div",a):(this._view=this._container,this._view.innerHTML+=a),p(this,"view:process",this._view),n(this._view),this.updateModelView()):e.isNoU(this._container)?this._view=a:(this._view=f.wrapElement("div",a.outerHTML).firstElementChild,this._view.removeAttribute("data-ui-view"),
this._container.appendChild(this._view));a=f(this._view);!1===this._options.css?a.addClass("zuix-css-ignore"):a.removeClass("zuix-css-ignore");return this};d.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};d.prototype.container=function(a){if(e.isNoU(a))return this._container;this._container=a;return this};k.prototype.addEvent=function(a,b,c){e.isNoU(a)||(f(a).off(b,this.eventRouter),this.context._eventMap[b]=c,f(a).on(b,this.eventRouter))};
k.prototype.addBehavior=function(a,b,c){e.isNoU(a)||(f(a).off(b,this.eventRouter),this.context._behaviorMap[b]=c,f(a).on(b,this.eventRouter))};k.prototype.field=function(a,b){var c=b?"@"+a:a;"undefined"===typeof this._fieldCache[c]?(a=b?f(a).get(0):f(this.view()).find("[data-ui-field\x3d"+a+"]").get(0),e.isNoU(a)||(this._fieldCache[c]=a)):a=this._fieldCache[c];return a};k.prototype.clearCache=function(){this._fieldCache.length=0};var H=eval,B=0,t=[],e={isNoU:function(a){return"undefined"===typeof a||
null===a},isFunction:function(a){return"function"===typeof a},objectEquals:function(a,b){if(null===a||void 0===a||null===b||void 0===b)return a===b;if(a.constructor!==b.constructor)return!1;if(a instanceof Function||a instanceof RegExp)return a===b;if(a===b||a.valueOf()===b.valueOf())return!0;if(Array.isArray(a)&&a.length!==b.length||a instanceof Date||!(a instanceof Object)||!(b instanceof Object))return!1;var c=Object.keys(a);return Object.keys(b).every(function(a){return-1!==c.indexOf(a)})&&c.every(function(c){return e.objectEquals(a[c],
b[c])})},propertyFromPath:function(a,b){if("string"===typeof b){b=b.replace(/\[(\w+)]/g,".$1");b=b.replace(/^\./,"");b=b.split(".");for(var c=0,d=b.length;c<d;++c){var e=b[c];if("undefined"!==typeof a[e])a=a[e];else return}return a}},cloneObject:function b(c){if(null===c||"object"!==typeof c)return c;var d=c.constructor(),e;for(e in c)d[e]=b(c[e]);return d}};y.prototype.queue=function(b,c){return this.taskQueue(b,c)};var u=new y;g.prototype.length=function(){return this._selection.length};g.prototype.parent=
function(b){return e.isNoU(b)?new g(this._selection[0].parentNode):new g(f.getClosest(this._selection[0],b))};g.prototype.children=function(b){return e.isNoU(b)?new g(this._selection[0].children):new g(this._selection[0].querySelectorAll(b))};g.prototype.get=function(b){e.isNoU(b)&&(b=0);return this._selection[b]};g.prototype.eq=function(b){return new g(this._selection[b])};g.prototype.find=function(b){return new g(this._selection[0].querySelectorAll(b))};g.prototype.each=function(b){f.each(this._selection,
b);return this};g.prototype.attr=function(b,c){if(e.isNoU(c))return this._selection[0].getAttribute(b);this.each(function(d,e){this.setAttribute(b,c)});return this};g.prototype.trigger=function(b,c){var d;window.CustomEvent?d=new CustomEvent(b,{detail:c}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c));this.each(function(b,c){this.dispatchEvent(d)});return this};g.prototype.one=function(b,c){var d=!1;this.on(b,function(e,h){d||(d=!0,f(this).off(b,c),c.call(this,e,h))});return this};
g.prototype.on=function(b,c){var d=b.match(/\S+/g)||[];this.each(function(b,e){var h=this;f.each(d,function(b,d){h.addEventListener(d,c,!1)})});return this};g.prototype.off=function(b,c){var d=b.match(/\S+/g)||[];this.each(function(b,e){var h=this;f.each(d,function(b,d){h.removeEventListener(d,c)})});return this};g.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};g.prototype.css=function(b,c){if(e.isNoU(c))return this._selection[0].style[b];this.each(function(d,
e){this.style[b]=c});return this};g.prototype.addClass=function(b){var c=b.match(/\S+/g)||[];f.each(this._selection,function(d,e){if(this.classList){var h=this;f.each(c,function(b,c){h.classList.add(c)})}else this.className+=" "+b});return this};g.prototype.hasClass=function(b){b=b.match(/\S+/g)||[];var c=!1,d=this._selection[0];f.each(b,function(b,e){if(c=d?d.classList.contains(e):(new RegExp("(^| )"+e+"( |$)","gi")).test(d.className))return!1});return c};g.prototype.removeClass=function(b){var c=
b.match(/\S+/g)||[];f.each(this._selection,function(d,e){if(this.classList){var h=this;f.each(c,function(b,c){h.classList.remove(c)})}else this.className=this.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};g.prototype.prev=function(){return new g(this._selection[0].previousElementSibling)};g.prototype.next=function(){return new g(this._selection[0].nextElementSibling)};g.prototype.html=function(b){if(e.isNoU(b))return this._selection[0].innerHTML;
this.each(function(c,d){this.innerHTML=b});return this};g.prototype.show=function(){f.each(this._selection,function(b,c){this.style.display=""});return this};g.prototype.hide=function(){f.each(this._selection,function(b,c){this.style.display="none"});return this};var f=function(b){return new g(b)};f.find=function(b){return f().find(b)};f.each=function(b,c){for(var d=0,e=b.length;d<e&&!1!==c.call(b[d],d,b[d]);d++);return this};f.ajax=function(b){url=e.isNoU(b)||e.isNoU(b.url)?b:b.url;var c=new XMLHttpRequest;
c.open("GET",url);c.onload=function(){200===c.status?e.isFunction(b.success)&&b.success(c.responseText):e.isFunction(b.error)&&b.error(c)};c.send();return this};f.wrapElement=function(b,c){b=document.createElement(b);"string"===typeof c?b.innerHTML=c:b.append(c);return b};f.wrapCss=function(b,c){for(var d=/([.,\w])([^/{};]+)({)/g,e,f=null,g="";e=d.exec(c);)null!=f&&(g+=b+" "+c.substring(f.index,e.index)),f=e;null!=f&&(g+=b+" "+c.substring(f.index));""!=g&&(c=g);return c};f.appendCss=function(b,c){var d=
null;if("string"===typeof b){var f=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css";d.styleSheet?d.styleSheet.cssText=b:d.appendChild(document.createTextNode(b))}else b instanceof Element&&(d=b);e.isNoU(c)||f.removeChild(c);e.isNoU(d)||f.appendChild(d);return d};f.getClosest=function(b,c){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||
Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);for(var c=b.length;0<=--c&&b.item(c)!==this;);return-1<c});for(;b&&b!==document;b=b.parentNode)if(b.matches(c))return b;return null};this.zuix=this.zuix||{controller:l,load:q,unload:E,componentize:n,hook:function(b,c){I(b,c);return this},$:f,field:m,TaskQueue:y,ZQuery:g,dumpCache:function(){console.log("ZUIX","Component Cache",w)},dumpContexts:function(){console.log("ZUIX",
"Loaded Component Instances",r)}};return zuix}).apply(window);
//# sourceMappingURL=zuix.min.js.map
