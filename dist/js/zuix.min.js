/*
 @license
 Copyright 2015-2019 G-Labs. All Rights Reserved.
         https://zuixjs.github.io/zuix

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
'use strict';(function(q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define([],q):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).zuix=q()})(function(){return function(){function q(u,w,a){function k(b,g){if(!w[b]){if(!u[b]){var e="function"==typeof require&&require;if(!g&&e)return e(b,!0);if(f)return f(b,!0);g=Error("Cannot find module '"+b+"'");throw g.code="MODULE_NOT_FOUND",
g;}g=w[b]={exports:{}};u[b][0].call(g.exports,function(a){return k(u[b][1][a]||a)},g,g.exports,q,u,w,a)}return w[b].exports}for(var f="function"==typeof require&&require,e=0;e<a.length;e++)k(a[e]);return k}return q}()({1:[function(q,u,w){function a(d){m=d}function k(){null!==p&&(cancelAnimationFrame(p),p=null);g++;if(g<b.length&&!m.willBreak())return e(),!0;(g>=b.length||m.willBreak())&&f();return!1}function f(d){g=-1;b.length=0;b=[];m.status(null!=d?d:"done")}function e(){const d=b[g];if(null==d)return!1;
const h=function(){null!==p&&(cancelAnimationFrame(p),p=null);m.doWork(d.item,function(){p=requestAnimationFrame(k)})||k()};if(d.cancelable)if(m.willBreak())f("stopped");else if(null==p)p=requestAnimationFrame(h);else return!1;else h();return!0}a.prototype.isReady=function(){return 0===b.length||-1===g};a.prototype.getJobs=function(){return b};a.prototype.setJobs=function(d){0<b.length?(g=-1,b.length=0):(b=d.slice(),m.status("start",b),k())};a.prototype.append=function(d){this.isReady()?this.setJobs(d):
Array.prototype.push.apply(b,d)};let b=[],g=-1,m=null,p=null;u.exports=function(d){return new a(d)}},{}],2:[function(q,u,w){function a(a){f=window?window.console:{};e=window?window:{};this._timers={};this.args=function(b,a,d){b="%c "+a+" %c"+(new Date).toISOString()+" %c"+b;a=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var h=0;h<d.length;h++)if("string"==typeof d[h]&&0===
d[h].indexOf("timer:")){const l=d[h].split(":");if(3===l.length){let c;switch(l[2]){case "start":this._timers[l[1]]=(new Date).getTime();b+=" %cSTART "+l[1];a.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":c=(new Date).getTime()-this._timers[l[1]],b+=" %cSTOP "+l[1]+" "+c+" ms",200<c?a.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<c?a.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):a.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}}b+=
" \n%c ";a.push("background-color:transparent;color:inherit;");for(h=a.length-1;0<=h;h--)Array.prototype.unshift.call(d,a[h]);Array.prototype.unshift.call(d,b);Array.prototype.push.call(d,"\n\n")};this.log=function(g,p){"function"===typeof b&&b.call(a,g,p);e.zuixNoConsoleOutput||(this.args(a,g,p),f.log.apply(f,p))}}const k="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" ");let f=null,e=null,
b=null;a.prototype.monitor=function(a){b=a};a.prototype.console=function(b){if(b)window.console=f;else for(window.console={},b=0;b<k.length;b++)window.console[k[b]]||(window.console[k[b]]=function(){})};a.prototype.i=a.prototype.info=a.prototype.l=a.prototype.log=function(){this.log("INFO",arguments);return this};a.prototype.w=a.prototype.warn=function(){this.log("WARN",arguments);return this};a.prototype.e=a.prototype.error=function(){this.log("ERROR",arguments);return this};a.prototype.d=a.prototype.debug=
function(){this.log("DEBUG",arguments);return this};a.prototype.t=a.prototype.trace=function(){this.log("TRACE",arguments);return this};u.exports=function(b){return new a(b)}},{}],3:[function(q,u,w){function a(){this.observableList=[]}function k(b){let a="";for(;b&&b.__path__;){const f=b;b=b.__parents__[0];a=null!=b&&null!=b.__path__?"['"+f.__path__+"']."+a:f.__path__+(a.startsWith("[")?"":".")+a}return a}function f(b){const a=[];b.__parents__.forEach(function(b){a.push(...f(b))});a.push(...b.__listeners__);
return a}function e(b){f(b).forEach(function(a){b.unsubscribe(a)})}a.prototype.observable=function(b){const a=this;let m;var p=this.observableList.filter(function(d){return b===d.proxy||b===d.target});1===p.length&&(m=p[0]);null==m&&(p={context:null,get:function(d,b){if("observableTarget"===b)return d;let a=d[b];if("undefined"!==typeof a){var c=[],v=this.context.observable(d);if("object"===typeof a){const d=this.context.observable(a);-1===d.__parents__.indexOf(v)&&(d.__parents__.push(v),d.__path__=
b);c.push(...f(d));a=d.proxy}else c.push(...f(v));var h=k(v)+b;c.forEach(function(c){c.get(d,b,a,h)});return a}},set:function(d,b,a){let c=JSON.parse(JSON.stringify(d));var v=d[b];"object"===typeof v&&e(this.context.observable(v));d[b]=a;v=this.context.observable(d);const h=k(v)+b;f(v).forEach(function(v){v.set(d,b,a,h,c)});return!0},deleteProperty:function(d,b){let a=d[b];"object"===typeof a&&e(this.context.observable(a));return delete d[b]}},Object.assign(p,{context:this}),m=Proxy.revocable(b,p),
m.target=b,m.__parents__=[],m.__listeners__=[],m.subscribe=function(d){a.observableList.forEach(function(b){if(b!==m&&-1!==b.__listeners__.indexOf(d))throw Error("Listener already registered.");});m.__listeners__.push(d);return m},m.unsubscribe=function(d){d=m.__listeners__.indexOf(d);-1!==d&&m.__listeners__.splice(d,1);0===m.__listeners__.length&&(m.revoke(),a.observableList=a.observableList.filter(function(d){if(d===m)return!1;const b=d.__parents__.indexOf(m);return-1!==b&&(d.__parents__.splice(b,
1),0===d.__parents__.length&&0===d.__listeners__.length)?(d.unsubscribe(null),!1):!0}));return m},this.observableList.push(m));return m};u.exports=a},{}],4:[function(q,u,w){function a(a){const e=this;e._worker=null;e._taskList=[];e._requests=[];null==a&&(a=function(){});e.taskQueue=function(b,f,m){e._taskList.push({tid:b,fn:f,status:0,priority:m,step:function(b){k.t(b,"load:step");a(e,"load:step",{task:b})},end:function(){this.status=2;k.t(this.tid,"load:next","timer:task:stop");a(e,"load:next",{task:this.tid});
e._taskList.splice(this.index,1);e.taskCheck();null!=this._callback&&this._callback.call(this)},callback:function(b){this._callback=b}});k.t(b,"task added",m,"priority");e._taskList.sort(function(b,d){return b.priority>d.priority?1:d.priority>b.priority?-1:0});e.taskCheck()};e.taskCheck=function(){for(let b=0;b<e._taskList.length;b++){if(0===e._taskList[b].status){e._taskList[b].status=1;k.t(e._taskList[b].tid,"load:begin","timer:task:start");a(e,"load:begin",{task:e._taskList[b].tid});e._taskList[b].index=
b;e._taskList[b].fn.call(e._taskList[b]);return}if(1===e._taskList[b].status||2===e._taskList[b].status)return}k.t("load:end");a(e,"load:end")}}const k=q("./Logger")("TaskQueue.js");a.prototype.callback=function(a){};a.prototype.queue=function(a,e,b){return this.taskQueue(a,e,b)};u.exports=a},{"./Logger":2}],5:[function(q,u,w){u.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},isNoU:function(a){return"undefined"===typeof a||null===a},isFunction:function(a){return"function"===
typeof a},objectEquals:function(a,k){if(null===a||void 0===a||null===k||void 0===k)return a===k;if(a.constructor!==k.constructor)return!1;if(a instanceof Function||a instanceof RegExp)return a===k;if(a===k||a.valueOf()===k.valueOf())return!0;if(Array.isArray(a)&&a.length!==k.length||a instanceof Date||!(a instanceof Object)||!(k instanceof Object))return!1;const f=Object.keys(a);return Object.keys(k).every(function(a){return-1!==f.indexOf(a)})&&f.every(function(e){return util.objectEquals(a[e],k[e])})},
propertyFromPath:function(a,k){if("string"===typeof k){k=k.match(/\[(".*?"|'.*?'|(.*?))\]|".*?"|'.*?'|[0-9a-zA-Z_$]+/g);for(let f=0;f<k.length;f++){let e=k[f];e.startsWith("[")&&e.endsWith("]")&&(e=e.substring(1,e.length-1).trim());e.startsWith('"')&&e.endsWith('"')?e=e.substring(1,e.length-1):e.startsWith("'")&&e.endsWith("'")&&(e=e.substring(1,e.length-1));if("undefined"!==typeof a[e])a=a[e];else return}return a}},cloneObject:function f(k){if(null===k||"object"!==typeof k)return k;let e=k;try{e=
k.constructor();for(let b in k)k.hasOwnProperty(b)&&(e[b]=f(k[b]))}catch(b){}return e},hasPassiveEvents:function(){let k=!1;try{const f=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("testPassive",null,f);window.removeEventListener("testPassive",null,f)}catch(f){}return k},dom:{queryAttribute:function(k,f,e){const b=k.split(",");let g="";b.forEach(function(m,k){g=null!=f?g+("["+m+'="'+f+'"]'):g+("["+m+"]");e&&(g+=e.get(k));k<b.length-1&&(g+=",")});return g},getAttribute:function(k,
f){let e;if("string"===typeof f&&-1!==f.indexOf(",")){f=f.split(",");for(let b=0;b<f.length;b++){const g=k.getAttribute(f[b]);if(null!=g){e=g;break}}}else e=k.getAttribute(f);return e},setAttribute:function(k,f,e){"string"===typeof f&&-1!==f.indexOf(",")?f.split(",").forEach(function(b){k.setAttribute(b,e)}):k.setAttribute(f,e)},cssNot:function(k,f){const e=k.split(",");let b="";e.forEach(function(g,m){b=g.startsWith(".")?b+(":not("+g+")"):null!=f?b+(":not(["+g+'="'+f+'"])'):b+(":not(["+g+"])");m<
e.length-1&&(b+=",")});return function(b){return{get:function(e){const f=b.split(",");return e>=f.length||null==e?f[0]:f[e]}}}(b)}}}},{}],6:[function(q,u,w){function a(c){e(this,c.type,c)}function k(c,b,e,f){let v=!1;l.each(h,function(){if(this.element===c&&this.path===b&&this.handler===e)return m.w("Handler already registered",c,b,e),v=!0,!1});v||(h.push({element:c,path:b,handler:e,opgions:f}),c.addEventListener(b,a,!d||null!=f&&!1===f.passive?!1:{passive:!0}))}function f(c,b,d){let v=1,n=-1;l.each(h,
function(a){this.element===c&&this.path===b&&this.handler===d&&(v--,n=a)});-1!==n&&h.splice(n,1);0===v&&c.removeEventListener(b,a)}function e(c,b,d){const a=l(c);l.each(h,function(){this.element===c&&this.path===b&&this.handler.call(a,d,a)})}function b(c){l.each(h,function(){this.element===c&&(m.t("Removing event handler",this.element,this.path,this.handler),f(this.element,this.path,this.handler))})}function g(c){this._selection=[];"undefined"===typeof c&&(c=document.documentElement);if(c instanceof
g)return c;if(c instanceof HTMLCollection||c instanceof NodeList){const b=this._selection=[];l.each(c,function(c,d){b.push(d)})}else if(Array.isArray(c))this._selection=c;else if(c===window||c instanceof HTMLElement||c instanceof Node)this._selection=[c];else if("string"===typeof c)this._selection=document.documentElement.querySelectorAll(c);else if(null!==c)throw m.e("ZxQuery cannot wrap object of this type.",typeof c,c),Error("ZxQuery cannot wrap object of this type.");return this}const m=q("./Logger")("TaskQueue.js"),
p=q("./Util.js");let d=p.hasPassiveEvents();const h=[];g.prototype.length=function(){return this._selection.length};g.prototype.parent=function(c){return p.isNoU(c)?new g(this._selection[0].parentNode):new g(l.getClosest(this._selection[0],c))};g.prototype.children=function(c){return p.isNoU(c)?new g(this._selection[0].children):new g(this._selection[0].querySelectorAll(c))};g.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};g.prototype.get=
function(c){p.isNoU(c)&&(c=0);return this._selection[c]};g.prototype.eq=function(c){const b=this._selection;let d=b[c];1<arguments.length&&(d=[],l.each(arguments,function(c,a){null!=b[a]&&d.push(b[a])}));return new g(d)};g.prototype.find=function(c){return new g(this._selection[0].querySelectorAll(c))};g.prototype.each=function(c){l.each(this._selection,c);return this};g.prototype.attr=function(c,b){const d=this;if("object"===typeof c)l.each(c,function(c,b){d.each(function(d,a){p.dom.setAttribute(a,
c,b)})});else{if("undefined"==typeof b)return p.dom.getAttribute(this._selection[0],c);null===b?this._selection[0].removeAttribute(c):this.each(function(d,a){p.dom.setAttribute(this.get(),c,b)})}return this};g.prototype.trigger=function(c,b){let d;window.CustomEvent?d=new CustomEvent(c,{detail:b}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(c,!0,!0,b));this.each(function(c,b){b.dispatchEvent(d)});return this};g.prototype.one=function(c,b){let d=!1;this.on(c,function(a,v){d||(d=!0,l(this).off(c,
b),b.call(this,a,v,this))});return this};g.prototype.on=function(c,b){const d=c.match(/\S+/g)||[];let a;"function"!==typeof b&&(a=b,b=a.handler);this.each(function(c,v){l.each(d,function(c,d){k(v,d,b,a)})});return this};g.prototype.off=function(c,b){const d=c.match(/\S+/g)||[];this.each(function(c,a){l.each(d,function(c,d){f(a,d,b)})});return this};g.prototype.reset=function(){this.each(function(c,d){b(d)});return this};g.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,
"").length};g.prototype.position=function(){return null!=this._selection[0]?l.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};g.prototype.css=function(c,b){const d=this;if("object"===typeof c)l.each(c,function(c,b){d.each(function(d,a){a.style[c]=b})});else{if(p.isNoU(b))return this._selection[0].style[c];d.each(function(d,a){a.style[c]=b})}return this};g.prototype.addClass=function(c){const b=c.match(/\S+/g)||[];l.each(this._selection,function(d,a){a.classList?l.each(b,function(c,b){a.classList.add(b)}):
a.className+=" "+c});return this};g.prototype.hasClass=function(c){return l.hasClass(this._selection[0],c)};g.prototype.removeClass=function(c){const b=c.match(/\S+/g)||[];l.each(this._selection,function(d,a){a.classList?l.each(b,function(c,b){a.classList.remove(b)}):a.className=a.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};g.prototype.prev=function(){return new g(this._selection[0].previousElementSibling)};g.prototype.next=function(){return new g(this._selection[0].nextElementSibling)};
g.prototype.html=function(c){if(p.isNoU(c))return this._selection[0].innerHTML;this.each(function(b,d){d.innerHTML=c});return this};g.prototype.checked=function(c){if(p.isNoU(c)){const c=this._selection[0].checked;return null!=c&&"false"!=c&&(c||"checked"==c)}this.each(function(b,d){d.checked=c});return this};g.prototype.value=function(c){if(p.isNoU(c))return this._selection[0].value;this.each(function(b,d){d.value=c});return this};g.prototype.append=function(c){"string"===typeof c?this._selection[0].innerHTML+=
c:this._selection[0].appendChild(c);return this};g.prototype.insert=function(c,b){c=this.children().get(c);null!==c?this._selection[0].insertBefore(b,c):this._selection[0].appendChild(b);return this};g.prototype.prepend=function(c){"string"===typeof c?this._selection[0].innerHTML=c+this._selection[0].innerHTML:this._selection[0].insertBefore(c,this._selection[0].firstElementChild);return this};g.prototype.detach=function(){const c=this._selection[0],b=c.parentNode;null!=b&&(c.__zuix_oldParent=b,c.__zuix_oldIndex=
Array.prototype.indexOf.call(b.children,c),b.removeChild(c),m.t("Detached from parent",b,c));return this};g.prototype.attach=function(){const c=this._selection[0];null!=c.parentNode&&null!=c.__zuix_oldParent&&c.parentNode.removeChild(c);null==c.parentNode&&null!=c.__zuix_oldParent&&(l(c.__zuix_oldParent).insert(c.__zuix_oldIndex,c),c.__zuix_oldParent=null,delete c.__zuix_oldParent,delete c.__zuix_oldIndex);return this};g.prototype.display=function(c){if(p.isNoU(c))return this._selection[0].style.display;
l.each(this._selection,function(b,d){d.style.display=c});return this};g.prototype.visibility=function(c){if(p.isNoU(c))return this._selection[0].style.visibility;l.each(this._selection,function(b,d){d.style.visibility=c});return this};g.prototype.show=function(c){return this.display(null==c?"":c)};g.prototype.hide=function(){return this.display("none")};const l=function(c){return new g(c)};l.find=function(c){return l().find(c)};l.each=function(c,b){const d=null==c?0:Object.keys(c).length;if(0<d){let a=
0;for(let e in c)if(c.hasOwnProperty(e)){let v=c[e];v instanceof Element&&(v=l(v));if(!1===b.call(v,e,c[e],v))break;a++;if(a>=d)break}}return this};l.ajax=function(c){let b;b=p.isNoU(c)||p.isNoU(c.url)?c:c.url;const d=new XMLHttpRequest;d.onload=function(){200===d.status?p.isFunction(c.success)&&c.success(d.responseText):p.isFunction(c.error)&&c.error(d,d.statusText,d.status);p.isFunction(c.then)&&c.then(d)};d.onerror=function(b,d,a){p.isFunction(c.error)&&c.error(b,d,a)};"function"==typeof c.beforeSend&&
c.beforeSend(d);try{d.open("GET",b),d.send()}catch(M){p.isFunction(c.error)&&c.error(d,d.statusText,d.status,M)}return this};l.hasClass=function(c,b){b=b.match(/\S+/g)||[];let d=!1;l.each(b,function(b,a){if(d=c.classList?c.classList.contains(a):(new RegExp("(^| )"+a+"( |$)","gi")).test(c.className))return!1});return d};l.classExists=function(c){c=c.match(/\S+/g)||[];let b=!1;l.each(c,function(c,d){c=document.styleSheets;if(null!=c)for(let a=0;a<c.length;a++)try{const e=c[a].rules||c[a].cssRules;if(null!=
e)for(let c=0;c<e.length;c++)if(e[c].selectorText===d){b=!0;break}}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;}});return b};l.wrapElement=function(c,b){c=document.createElement(c);"string"===typeof b?c.innerHTML=b:c.appendChild(b);return c};l.wrapCss=function(c,b,d){const a=/(([a-zA-Z0-9\240-\377=:-_\n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let e="",f;b=b.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"");do if((f=a.exec(b))&&1<f.length){var h=f[2];if(null!=h&&0<h.length){h=
h.replace(/\n/g,"");const b=h.split(",");let a=!1;l.each(b,function(f,h){"."===h.trim()?e+="\n"+d+" ":"@"===h.trim()[0]?(e+=h+" ",h.trim().toLowerCase().startsWith("@media")&&(a=!0)):e+="\n"+h.trim()+c+" ";f<b.length-1&&(e+=", ")});a?(h=l.wrapCss(c,f[1].substring(f[2].length).replace(/^{([^\0]*?)}$/,"$1"),d),e+="{\n  "+h+"\n}"):e+=f[1].substring(f[2].length)+"\n"}else m.w("z$.wrapCss was unable to parse rule.",h,f)}while(f);""!==e&&(b=e);return b};l.appendCss=function(c,b,d){const a=document.head||
document.getElementsByTagName("head")[0];let e=null;p.isNoU(b)?(b=document.getElementById(d),null!=b&&a.removeChild(b)):a.removeChild(b);"string"===typeof c?(e=document.createElement("style"),e.type="text/css",e.id=d,e.styleSheet?e.styleSheet.cssText=c:e.appendChild(document.createTextNode(c))):c instanceof Element&&(e=c);p.isNoU(e)||a.appendChild(e);return e};l.replaceCssVars=function(c,b){const d=new RegExp(/\B\$var\[(.*[^\[\]])]/g);let a="",e=0,h=0,f;for(;f=d.exec(c);){let d=f[0];if(1<f.length){var l=
f[1];let c=b;if(0<l.indexOf(".")){l=l.split(".");for(let b=0;b<l.length-1&&(c=c[l[b]],"undefined"!==typeof c);b++);"undefined"!==typeof c&&(d=c[l[l.length-1]],e++)}else"undefined"!==typeof c[l]&&(d=c[l],e++)}a+=c.substr(h,f.index-h)+d;h=f.index+f[0].length}0<e&&(c=a+=c.substr(h));return c};l.replaceBraces=function(c,b){const d=new RegExp(/{?{.*?}?}/g);let a="",e=0,f=0;for(var h;h=d.exec(c);){if("string"===typeof h[0]&&(0===h[0].trim().length||0<=h[0].indexOf("\n"))){h=c.substr(f,h.index-f)+h[0];a+=
h;f+=h.length;continue}let d=h[0];if("function"===typeof b){const c=b(h[0]);p.isNoU(c)||(d=c,e++)}a+=c.substr(f,h.index-f)+d;f=h.index+h[0].length}return 0<e?a+=c.substr(f):null};l.getClosest=function(c,b){for(c=c.parentNode;c&&c!==document;c=c.parentNode)if(c.matches(b))return c;return null};l.getPosition=function(c,b){var d;{var a=d=0,e=c.getBoundingClientRect();let b=c;for(;b;){if("body"===b.tagName.toLowerCase()){const c=b.scrollTop||document.documentElement.scrollTop;d+=b.offsetLeft-(b.scrollLeft||
document.documentElement.scrollLeft)+b.clientLeft;a+=b.offsetTop-c+b.clientTop}else d+=b.offsetLeft-b.scrollLeft+b.clientLeft,a+=b.offsetTop-b.scrollTop+b.clientTop;b=b.offsetParent}d={x:d,y:a,rect:e}}d.visible=!1;e=c.offsetParent;if(null!=e){if(e!==document.body){for(a=e.offsetParent;null!=a&&null!==a.offsetParent&&a.offsetHeight===a.scrollHeight;)a=a.offsetParent;null!=a&&(e=a)}a=e.getBoundingClientRect();e===document.body&&(a={x:a.x,y:a.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,
height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight});null==b&&(b=0);e=c.getBoundingClientRect();b=!(e.left-1>a.right-b||e.right+1<a.left+b||e.top-1>a.bottom-b||e.bottom+1<a.top+b);d.visible=b;d.frame={dx:(e.left+e.width/2-a.left)/a.width,dy:(e.top+e.height/2-a.top)/a.height};c=l(c);!b&&c.hasClass("--ui--visible")?
(c.removeClass("--ui--visible"),d.event="exit"):b?b&&(c.hasClass("--ui--visible")?d.event="scroll":(d.event="enter",c.addClass("--ui--visible"))):d.event="off-scroll"}return d};l.ZxQuery=g;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);let c=
b.length;for(;0<=--c&&b.item(c)!==this;);return-1<c});(function(){function b(b,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};const d=document.createEvent("CustomEvent");d.initCustomEvent(b,c.bubbles,c.cancelable,c.detail);return d}if("function"===typeof window.CustomEvent)return!1;b.prototype=window.Event.prototype;window.CustomEvent=b})();String.prototype.hashCode=function(){let b=0;if(0===this.length)return b;for(let c=0;c<this.length;c++){let d=this.charCodeAt(c);b=(b<<5)-b+d;b|=0}return b};
String.prototype.startsWith||(String.prototype.startsWith=function(b,d){return this.substr(!d||0>d?0:+d,b.length)===b});u.exports=l},{"./Logger":2,"./Util.js":5}],7:[function(q,u,w){q=q("./zuix/Zuix.js");"object"===typeof u&&u.exports?u.exports=q.call(this):this.zuix=q.call(this)},{"./zuix/Zuix.js":14}],8:[function(q,u,w){u.exports=function(a){return null}},{}],9:[function(q,u,w){function a(d,a,l){m=d;this._options=null;this.contextId=null==a||null==a.contextId?null:a.contextId;this.componentId=null;
this.trigger=function(b,d,a){"function"===typeof l&&l(b,d,a)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this._modelListener=Object.assign({context:null,get:function(b,d,a,e){},set:function(c,d,a,h,l){c instanceof Element&&(h=h.split(".")[0],a=c);const g=e(this.context.view());if(g.get()){let e=g.find(b.dom.queryAttribute(f.dataBindTo,h));null==e.get()&&(e=g.find(b.dom.queryAttribute(f.dataUiField,
h)));e.get()&&this.context.dataBind(e.get(),a);this.context._c&&"function"===typeof this.context._c.update&&this.context._c.update(c,d,a,h,l)}}},{context:this});this._viewObserver=new g(this);this.options(a);return this}const k=q("../helpers/Logger")("ComponentContext.js"),f=q("./OptionAttributes"),e=q("../helpers/ZxQuery"),b=q("../helpers/Util"),g=q("./ViewObserver");let m=null;const p=[];a.prototype.dispose=function(){this._viewObserver.stop();b.isNoU(this._c)||(b.isNoU(this._c.view())||(this._c.view().attr(f.dataUiComponent,
null),this._c.view().reset(),b.isNoU(this._c._fieldCache)||e.each(this._c._fieldCache,function(b,d){d.reset()})),b.isFunction(this._c.destroy)&&this._c.destroy.call(this,this));this.model(null);this._c.view().detach();const d=this._container;null!=d&&null!=d.parentNode&&d.parentNode.removeChild(d)};a.prototype.container=function(b){if(null==b)return this._container;b instanceof e.ZxQuery&&(b=b.get());this._container=b;return this};a.prototype.view=function(d){if("undefined"===typeof d)return this._view;
if(null===d)throw Error("View cannot be set to null.");d instanceof e.ZxQuery&&(d=d.get());if(d===this._view)return this;k.t(this.componentId,"view:attach","timer:view:start");if("string"===typeof d){d={content:d};this.trigger(this,"html:parse",d);d=d.content;const a=e.wrapElement("div",d);null!=a.firstElementChild&&(null!=b.dom.getAttribute(a.firstElementChild,f.dataUiView)?1===a.children.length&&(d=a.firstElementChild.innerHTML):d=a.innerHTML);null!=this._container?(this._view=this._container,this._view.innerHTML+=
d):null!=this._view?this._view.innerHTML=d:this._view=a;e(this._view).find("script").each(function(b,d){"true"!==this.attr(f.zuixLoaded)&&(this.attr(f.zuixLoaded,"true"),eval.call(window,d.innerHTML))});this.trigger(this,"view:process",e(this._view))}else null!=this._container?(this._view=e.wrapElement("div",d.outerHTML).firstElementChild,this._view.removeAttribute(f.dataUiView),this._container.appendChild(this._view),this._view=this._container):this._view=d;d=e(this._view);!1===this._options.css?
d.addClass("zuix-css-ignore"):d.removeClass("zuix-css-ignore");d.find(b.dom.queryAttribute(f.dataUiLoad)).each(function(b,c){this.attr(f.dataUiLoaded,"false")});const a=this.getCssId();d.attr(a,"");null!=this._container||null!=this._style?(d.find("*"+b.dom.cssNot(f.dataUiLoad).get()+b.dom.cssNot(f.dataUiInclude).get()).each(function(b,c){this.attr(a,"")}),this._viewObserver.start(),d.attr("_ctrl_",null)):d.attr("_ctrl_","");this.modelToView();k.t(this.componentId,"view:attach","timer:view:stop");
return this};a.prototype.style=function(d){if("undefined"===typeof d)return this._style;k.t(this.componentId,"view:style","timer:view:start");if(null==d||d instanceof Element)this._css=d instanceof Element?d.innerText:d,this._style=e.appendCss(d,this._style,this.componentId);else if("string"===typeof d){this._css=d;d={content:d};this.trigger(this,"css:parse",d);d=d.content;const a="["+this.getCssId()+"]";d=e.wrapCss(a+":not(.zuix-css-ignore)",d,a+b.dom.queryAttribute(f.dataUiLoad,this.componentId)+
":not(.zuix-css-ignore),"+a+b.dom.queryAttribute(f.dataUiInclude,this.componentId)+":not(.zuix-css-ignore)");this._style=e.appendCss(d,this._style,this.componentId)}k.t(this.componentId,"view:style","timer:view:stop");return this};a.prototype.model=function(d){if("undefined"===typeof d)return this._model;if(this._model===d)return this;null!==this._model&&"function"!==typeof this._model&&m.observable(this._model).unsubscribe(this._modelListener);this._model=d;null!=d&&("function"!==typeof d&&(this._model=
m.observable(d).subscribe(this._modelListener).proxy),this.modelToView(),null!=this._c&&b.isFunction(this._c.update)&&this._c.update.call(this._c,null,null,null,null,this._c));return this};a.prototype.controller=function(b){if("undefined"===typeof b)return this._controller;this._controller=b;return this};a.prototype.options=function(b){if(null==b)return this._options;const d=this._options=this._options||{};Object.assign(d,b);this.componentId=d.componentId||this.componentId;null==p[this.componentId]&&
(p[this.componentId]=p.length,p.length++);this.container(d.container);this.view(d.view);"undefined"!==typeof d.css&&this.style(d.css);this.controller(d.controller);this.model(d.model);return this};a.prototype.on=function(b,a){this._c.on(b,a);return this};a.prototype.loadCss=function(d,a){const f=this;b.isNoU(d)&&(d={});b.isNoU(d.caching)||(a=d.caching);let c=f.componentId+".css";b.isNoU(d.path)||(c=d.path);a||(c+="?"+(new Date).getTime());e.ajax({url:m.getResourcePath(c),success:function(c){f.style(c);
b.isFunction(d.success)&&d.success.call(f,c,f)},error:function(c){k.e(c,f);b.isFunction(d.error)&&d.error.call(f,c,f)},then:function(){b.isFunction(d.then)&&d.then.call(f,f)}});return this};a.prototype.loadHtml=function(d,a){const h=this;let c=h.componentId;b.isNoU(d)&&(d={});b.isNoU(d.caching)||(a=d.caching);b.isNoU(d.path)||(c=d.path);var g=m.store("zuix.inlineViews");null==g&&(g=[],m.store("zuix.inlineViews",g));if(null!=g[c])h.view(g[c]),b.isFunction(d.success)&&d.success.call(h,g[c],h),b.isFunction(d.then)&&
d.then.call(h,h);else{const l=e().find(b.dom.queryAttribute(f.dataUiView,c,b.dom.cssNot(f.dataUiComponent)));0<l.length()?(a=l.get(0),g[c]=a.innerHTML,h.view()===a||null!=h.container()&&h.container().contains(a)?(l.attr(f.dataUiView,null),h._view=a,this.trigger(this,"view:process",e(h.view()))):h.view(a.innerHTML),b.isFunction(d.success)&&d.success.call(h,a.innerHTML,h),b.isFunction(d.then)&&d.then.call(h,h)):(g=b.isNoU(d.cext)?".html":d.cext,c==h.componentId&&(c+=g+(a?"":"?"+(new Date).getTime())),
e.ajax({url:m.getResourcePath(c),success:function(c){h.view(c);b.isFunction(d.success)&&d.success.call(h,c,h)},error:function(c){k.e(c,h);b.isFunction(d.error)&&d.error.call(h,c,h)},then:function(){b.isFunction(d.then)&&d.then.call(h,h)}}))}return this};a.prototype.viewToModel=function(){k.t(this.componentId,"view:model","timer:vm:start");const d={};e(this._view).find(b.dom.queryAttribute(f.dataUiField)).each(function(a,e){if(0<this.parent("pre,code").length())return!0;a=this.attr(f.dataUiField);
e=!b.isNoU(e.innerHTML)&&b.isIE()?e.cloneNode(!0):e;if(0<a.indexOf(".")){a=a.split(".");let b=d;for(let c=0;c<a.length-1;c++)"undefined"===typeof b[a[c]]&&(b[a[c]]={}),b=b[a[c]];b[a[a.length-1]]=e}else d[a]=e});this._model=m.observable(d).subscribe(this._modelListener).proxy;k.t(this.componentId,"view:model","timer:vm:stop");return this};a.prototype.modelToView=function(){k.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){const d=this;e(this._view).find(b.dom.queryAttribute(f.dataUiField)).each(function(a,
g){if(0<this.parent("pre,code").length())return!0;a=this.attr(f.dataBindTo);null==a&&(a=this.attr(f.dataUiField));const c=e(d._view);if("function"===typeof d._model)d._model.call(c,this,a,c);else{const e=b.propertyFromPath(d._model,a);"function"===typeof e?e.call(c,this,a,c):null!=e&&d.dataBind(g,e)}})}k.t(this.componentId,"model:view","timer:mv:stop");return this};a.prototype.dataBind=function(a,e){e=e.observableTarget||e;switch(a.tagName.toLowerCase()){case "img":a.src=b.isNoU(e.src)?b.isNoU(e.innerHTML)?
e:e.innerHTML:e.src;e.alt&&(a.alt=e.alt);break;case "a":a.href=b.isNoU(e.href)?b.isNoU(e.innerHTML)?e:e.innerHTML:e.getAttribute("href");e.title&&(a.title=e.title);b.isNoU(e.href)||b.isNoU(e.innerHTML)||""===e.innerHTML.trim()||(a.innerHTML=e.innerHTML);break;case "input":a.value=b.isNoU(e.value)?b.isNoU(e.innerHTML)?e:e.innerHTML:e.value;break;default:if(a.innerHTML=b.isNoU(e.innerHTML)?e:e.innerHTML,null!=e.attributes)for(let d=0;d<e.attributes.length;d++){const c=e.attributes[d];c.specified&&c.name!==
f.dataUiField&&("+"===c.value[0]&&a.hasAttribute(c.name)&&(c.value=a.getAttribute(c.name)+" "+c.value.substring(1)),b.dom.setAttribute(a,c.name,c.value))}}};a.prototype.getCssId=function(){return"_cmp_"+p[this.componentId]};u.exports=a},{"../helpers/Logger":2,"../helpers/Util":5,"../helpers/ZxQuery":6,"./OptionAttributes":12,"./ViewObserver":13}],10:[function(q,u,w){function a(){}function k(b,a){null!=b&&(I=!b);null!=a&&(J=a);return!A&&!I}function f(b){null==b&&(b=document);E.indexOf(b)||E.push(b)}
function e(b){for(let a=0;a<F.length;a++){const c=F[a];if(c.element===b)return c.waiting}return null}function b(b){null==b&&0<E.length&&(b=E.unshift());b instanceof D.ZxQuery&&(b=b.get());e(b);var a=r.dom.queryAttribute(n.dataUiLoad,null,r.dom.cssNot(n.dataUiLoaded))+","+r.dom.queryAttribute(n.dataUiInclude,null,r.dom.cssNot(n.dataUiLoaded));a=D(b).find(a);a=Array.prototype.slice.call(a._selection);F.push({element:b,waiting:a});b=[];for(var c=0;c<a.length;c++){var d=a[c],x=+r.dom.getAttribute(d,n.dataUiPriority);
isNaN(x)&&(x=0);let e=0;var f=d.parentNode;let P=!1;for(;null!=f&&f!==document;){e++;if(null!=r.dom.getAttribute(f,n.dataUiView)){P=!0;break}f=f.parentNode}P||(f=new K,f.element=d,f.priority=x+1E3*e,b.push(f))}a=0;for(c=0;c<b.length;c++){d=!1;for(x=0;x<z.length;x++)if(b[c].element===z[x].element){d=!0;break}d||(d=b[c].element,x=r.dom.getAttribute(d,n.dataUiOptions),h(d,x),z.push(b[c]),a++)}t.t("componentize:count",z.length,a);(0===a||0===E.length&&0===z.length)&&B.trigger(this,"componentize:end")}
function g(){z.sort(function(b,a){return b.priority-a.priority});let b=null,a=0<z.length?z.shift():null;for(;null!=a&&null!=a.element;){const c=M(a.element);k()&&c?(a.lazy=!0,a.visible=D.getPosition(a.element,J).visible):(a.lazy=!1,a.visible=!0);if(null!=a.element&&a.visible){b={item:a,cancelable:a.lazy};break}if(0<z.length)a=z.shift();else break}return b}function m(a){b(a);a=g();null!=a&&L.append([a])}function p(b){var a=D(b);if(null!=a.attr(n.dataUiLoaded)||0<a.parent("pre,code").length())return!1;
a.attr(n.dataUiLoaded,"true");let c=a.attr(n.dataUiOptions);r.isNoU(c)?c={}:(c=r.propertyFromPath(window,c),c=r.cloneObject(c)||{});var e=a.attr(n.dataUiContext);if(!r.isNoU(e)){var x=B.context(e);null!==x&&(c=x.options());c.contextId=e}r.isNoU(c.view)&&!a.isEmpty()?(c.view=b,c.viewDeferred=!0):r.isNoU(c.view)&&r.isNoU(c.container)&&a.isEmpty()&&(c.container=b);e=a.attr(n.dataUiLoad);if(r.isNoU(e))if(e=a.attr(n.dataUiInclude),null!=e)e=d(e),a.attr(n.dataUiInclude,e),a.attr(n.dataUiComponent,""),r.isNoU(c.controller)&&
(c.controller=function(){});else return!1;else e=d(e),a.attr(n.dataUiLoad,e);x=a.attr(n.dataBindModel);!r.isNoU(x)&&0<x.length&&(c.model=r.propertyFromPath(window,x));a=a.attr(n.dataUiPriority);r.isNoU(a)||(c.priority=+a);D(b).one("component:ready",function(){f(b);m(b)});B.load(e,c);return!0}function d(b){if("@"===b[0]){let a=B.store("config"),c="https://zuixjs.github.io/zkit/lib/";null!=a&&null!=a[location.host]&&(a=a[location.host]);if(null!=a)switch(typeof a.libraryPath){case "object":D.each(a.libraryPath,
function(a,d){return b.startsWith(a+"/")?(c=d,!1):!0});break;case "string":c=a.libraryPath}b=c+b.substring(b.indexOf("/")+1)}return b}function h(b,a){"string"===typeof a&&(a=r.propertyFromPath(window,a));null!=b&&null!=a&&(null!=a.lazyLoad&&r.dom.setAttribute(b,n.dataUiLazyload,a.lazyLoad.toString().toLowerCase()),null!=a.contextId&&r.dom.setAttribute(b,n.dataUiContext,a.contextId.toString().toLowerCase()),null!=a.componentId&&r.dom.setAttribute(b,n.dataUiLoad,a.componentId.toString().toLowerCase()))}
function l(b){for(let a=0;a<y.length;a++){const c=y[a];if(c.element===b)return c}return null}function c(b){b={element:b};y.push(b);return b}function v(b){for(let a=0;a<C.length;a++){const c=C[a];if(c.element===b)return c}return null}function N(b){b={element:b};C.push(b);return b}function M(b){if("false"===r.dom.getAttribute(b,n.dataUiLazyload))return!1;let a=l(b);if(null==a){var d=r.dom.queryAttribute(n.dataUiLazyload,"scroll")+","+r.dom.queryAttribute(n.dataUiLazyload,"true");d=D.getClosest(b.parentNode,
d);if(null!=d)return a=c(b),b=v(d),null==b&&(b=N(d),"scroll"===r.dom.getAttribute(d,n.dataUiLazyload)&&function(b,a){let c=(new Date).getTime();D(a===document.body?window:a).on("scroll",function(){const b=(new Date).getTime();100<b-c&&(c=b,m(a))})}(this,d)),!0;if("true"===r.dom.getAttribute(b,n.dataUiLazyload))return a=c(b),!0}else return!0;return!1}const n=q("./OptionAttributes");a.prototype.componentize=function(b,a){B.trigger(this,"componentize:begin");if(null!=a){const c=e(b);null==c?F.push({element:b,
waiting:[a]}):c.push(a)}else f(b);m(b);return this};a.prototype.applyOptions=function(b,a){h(b,a);return this};a.prototype.resolvePath=function(b){return d(b)};a.prototype.willLoadMore=function(){return 0<z.length||0<E.length};a.prototype.lazyLoad=function(b,a){return k(b,a)};a.prototype.dequeue=function(b){for(let a=0;a<z.length;a++)if(z[a].element===b){z.splice(a,1);break}};a.prototype.setHost=function(b){B=b;return this};u.exports=function(){return new a};const t=q("../helpers/Logger")("ComponentContext.js"),
r=q("../helpers/Util"),D=q("../helpers/ZxQuery"),E=[],z=[],y=[],C=[],K=function(){return{element:null,priority:0,visible:!0,lazy:!1}},L=q("./../helpers/AsynChain")({doWork:function(b,a){D(b.element).one("component:ready",function(){a()});return p(b.element)},willBreak:function(){return!1},status:function(b){switch(b){case "done":m()}}});let I=!1,J=1,B=null,A=!1;navigator&&navigator.userAgent&&(A=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));A&&t.d(navigator.userAgent,
"is a bot, ignoring `lazy-loading` option.");const F=[]},{"../helpers/Logger":2,"../helpers/Util":5,"../helpers/ZxQuery":6,"./../helpers/AsynChain":1,"./OptionAttributes":12}],11:[function(q,u,w){function a(a){const e=this;this._view=null;this.context=a;this._fieldCache=[];this.destroy=this.update=this.create=this.init=null;this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(b,a){e._childNodes.push(a)})};this.restoreView=function(){0<this._childNodes.length&&
(e.view().html(""),k.each(e._childNodes,function(b,a){e.view().append(a)}),this._childNodes.length=0)};this.on=function(b,a){this.addEvent(b,a);return this};this.mapEvent=function(b,a,d,e){null!=a&&(a.off(d,this.eventRouter),b[d]=e,a.on(d,this.eventRouter))};this.eventRouter=function(b){const f=e.view();"function"===typeof a._behaviorMap[b.type]&&a._behaviorMap[b.type].call(f,b,b.detail,f);"function"===typeof a._eventMap[b.type]&&a._eventMap[b.type].call(f,b,b.detail,f)};const b=a.options();let f=
null;if(null!=b.on)for(let a in b.on)b.on.hasOwnProperty(a)&&(f=b.on[a],e.addEvent(a,f));if(null!=b.behavior)for(let a in b.behavior)b.behavior.hasOwnProperty(a)&&(f=b.behavior[a],e.addBehavior(a,f));a.controller().call(this,this);return this}const k=q("../helpers/ZxQuery");a.prototype.addEvent=function(a,e){this.mapEvent(this.context._eventMap,this.view(),a,e);return this};a.prototype.addBehavior=function(a,e){this.mapEvent(this.context._behaviorMap,this.view(),a,e);return this};a.prototype.field=
function(a){return null};a.prototype.clearCache=function(){this._fieldCache.length=0};a.prototype.view=function(a){if(null!=this.context.view()||this._view!==this.context.view())this.clearCache(),this._view=k(this.context.view());if(null!=a)return this._view.find(a);if(null!==this._view)return this._view;throw Error("Not attached to a view yet.");};a.prototype.model=function(a){if(null==a)return this.context.model();this.context.model(a);return this};a.prototype.options=function(){return this.context.options()};
a.prototype.trigger=function(a,e,b){null==this.context._eventMap[a]&&!0!==b&&this.addEvent(a,null);!0===b?(b=this.context.container(),null==b&&(b=this.context.view()),null!=b&&k(b).trigger(a,e),this.context.trigger(this.context,a,e)):this.view().trigger(a,e);return this};a.prototype.expose=function(a,e){if("object"===typeof a){const b=this;k.each(a,function(a,e){b.context[a]=e})}else this.context[a]=e;return this};a.prototype.loadCss=function(a){this.context.loadCss(a);return this};a.prototype.loadHtml=
function(a){this.saveView();this.context.loadHtml(a);return this};a.prototype.log={};a.prototype.for=function(a){return this};u.exports=a},{"../helpers/ZxQuery":6}],12:[function(q,u,w){q=Object.freeze({dataBindModel:"z-model,data-bind-model",dataBindTo:"z-bind,data-bind-to",dataUiComponent:"z-component",dataUiContext:"z-context,data-ui-context",dataUiField:"z-field,data-ui-field",dataUiInclude:"z-include,data-ui-include",dataUiLazyload:"z-lazy,data-ui-lazyload",dataUiLoad:"z-load,data-ui-load",dataUiLoaded:"z-loaded",
dataUiOptions:"z-options,data-ui-options",dataUiPriority:"z-priority,data-ui-priority",dataUiView:"z-view,data-ui-view",zuixLoaded:"zuix-loaded"});u.exports=q},{}],13:[function(q,u,w){function a(a){const b=this._context=a;this._mutationObserver=null;this._mutationCallback=function(a,e){const g=f.dom.queryAttribute(k.dataUiComponent);for(let d of a)"childList"===d.type&&d.addedNodes.forEach(function(a){if(a instanceof Element){let e=zuix.$(a).parent(g);if(null==e.attr("_ctrl_")){if(e.get()===b._container||
e.get()===b._view){var d=!1;for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name.startsWith("_cmp_")){d=!0;break}d||f.dom.setAttribute(a,b.getCssId(),"")}}else{d=0;do d++,e=e.parent(g);while(10>d&&null!=e.get()&&null!=e.attr("_ctrl_"));if(e.get()){e=zuix.context(e);d=!1;for(c=0;c<a.attributes.length;c++)if(a.attributes[c].name.startsWith("_cmp_")){d=!0;break}d||(f.dom.setAttribute(a,e.getCssId(),""),zuix.$(a).find("*").each(function(){this.attr(e.getCssId(),"")}))}}}})}}const k=q("./OptionAttributes"),
f=q("../helpers/Util");a.prototype.start=function(){this.stop();this._mutationObserver=new MutationObserver(this._mutationCallback);this._mutationObserver.observe(this._context._view,{attributes:!1,childList:!0,subtree:!0})};a.prototype.stop=function(){null!=this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)};u.exports=a},{"../helpers/Util":5,"./OptionAttributes":12}],14:[function(q,u,w){function a(){y.setHost(this);this._store=[];this._fieldCache=[];return this}
function k(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return I[b]=a});return a}function f(a,b,c){t.isNoU(c)&&(c=this);null==c._fieldCache&&(c._fieldCache={});let d=null;"undefined"===typeof c._fieldCache[a]?(d=r(b).find(t.dom.queryAttribute(C.dataUiField,a)),null!=d&&0<d.length()&&(c._fieldCache[a]=d,1===d.length()&&t.isNoU(d.field)&&(d.field=function(a){return f(a,d,d)}))):d=c._fieldCache[a];return d}function e(a){let b=zuix.store("config");null!=b&&null!=b[location.host]&&(b=b[location.host]);
a=y.resolvePath(a);!a.startsWith("//")&&0>a.indexOf("://")&&(a=(null!=b&&null!=b.resourcePath?b.resourcePath:"")+a);return a}function b(a,b){let d=h(a.componentId);null!==d&&null==b.controller&&null==a.controller()&&(a.controller(d.controller),n.t(a.componentId+":js","component:cached:js"));if(t.isNoU(b.view)){if(null!==d&&(null!=d.view&&(a.view(d.view),n.t(a.componentId+":html","component:cached:html")),!1!==b.css&&(b.css=!1,d.css_applied||(d.css_applied=!0,a.style(d.css),n.t(a.componentId+":css",
"component:cached:css")))),t.isNoU(a.view()))return F("resource-loader").queue(a.componentId+":html",function(){A[a.componentId]=this;a.loadHtml({cext:b.cext,caching:H,success:function(e){null==d&&(d=c(a));d.view=e;delete d.controller;!1!==b.css?(A[a.componentId].step(a.componentId+":css"),a.loadCss({caching:H,success:function(a){d.css=a},error:function(b){n.e(b,a)},then:function(){l(a,A[a.componentId])}})):l(a,A[a.componentId])},error:function(c){n.e(c,a);t.isFunction(b.error)&&a.error.call(a,c,
a)}})},b.priority),a}else a.view(b.view);null==a.controller()?F("resource-loader").queue(a.componentId+":js",function(){A[a.componentId]=this;l(a,A[a.componentId])},K.length):l(a);return a}function g(a){a=new E(zuix,a,p);K.push(a);return a}function m(a,b){let c=null;if(a instanceof r.ZxQuery)a=a.get();else if("string"===typeof a){const b=r.find(t.dom.queryAttribute(C.dataUiContext,a));0<b.length()&&(a=b.get())}r.each(K,function(b,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||t.objectEquals(d.contextId,
a))return c=d,!1});if("function"===typeof b&&(a instanceof Element||a instanceof r.ZxQuery))if(null!=c&&c.isReady)b.call(c,c);else r(a).one("component:ready",function(){c=zuix.context(this);b.call(c,c)});return c}function p(a,b,c){t.isFunction(L[b])&&L[b].call(a,c,a)}function d(a){null!=a&&(H=a);return H}function h(a){let b=null;r.each(G,function(c,d){if(t.objectEquals(d.componentId,a))return b=d,!1});return b}function l(a,b){if("undefined"===typeof a.options().controller&&null===a.controller())if(n.d(a.componentId,
"controller:load"),t.isNoU(b)||b.step(a.componentId+":js"),t.isFunction(I[a.componentId]))a.controller(I[a.componentId]),v(a,b);else{const c=function(b){const c=a.componentId+".js"+(H?"":"?"+(new Date).getTime());r.ajax({url:e(c),success:function(b){try{const c=b.indexOf("function"),d=b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,d-4));const e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+11));const x=b.indexOf("//<--controller");0<x&&(b=b.substring(0,x));b+='\n//# sourceURL="'+a.componentId+
'.js"\n';a.controller(M(b))}catch(Q){n.e(Error(),Q,b,a),t.isFunction(a.error)&&a.error.call(a,Q,a)}},error:function(b){n.e(b,Error(),a);t.isFunction(a.error)&&a.error.call(a,b,a)},then:function(){v(a,b)}})};t.isNoU(b)?F("resource-loader").queue(a.componentId+":js",function(){c(A[a.componentId]=this)},a.options().priority):c(b)}else v(a,b)}function c(a){var b=a.view().innerHTML;b=r.wrapElement("div",b);b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};G.push(b);n.t(a.componentId,
"bundle:added");return b}function v(a,b){A[a.componentId]=null;if(t.isNoU(a.view()))n.e(a.componentId,"component:view:undefined");else{let e=h(a.componentId);a.options().viewDeferred?n.w(a.componentId,"component:deferred:load"):null===e?e=c(a):null==e.controller&&(e.controller=a.controller());null!=b&&b.callback(function(){n.d(a.componentId,"controller:create:deferred");N(a._c)});var d=r(a.view());null==d.attr(C.dataUiContext)&&d.attr(C.dataUiContext,a.contextId);n.d(a.componentId,"component:initializing");
if(t.isFunction(a.controller())){d=a._c=new z(a);d.log=q("../helpers/Logger")(a.contextId);"function"===typeof d.init&&d.init();if(!t.isNoU(d.view()))if(null==d.view().attr(C.dataUiComponent)&&d.view().attr(C.dataUiComponent,""),t.isNoU(a.model())&&!t.isNoU(a.view())&&a.viewToModel(),d.trigger("view:apply"),a.options().viewDeferred){a.options().viewDeferred=!1;d.saveView();null===e&&(e={componentId:a.componentId,controller:a.controller()},G.push(e),n.t(a.componentId,"bundle:added"),n.d(a.componentId,
"component:deferred:load"));let c=-1;!1!==a.options().css&&(null==e.css?(-1===c&&(c=0),c++,a.loadCss({caching:H,success:function(b){null==e.css&&(e.css=b);n.d(a.componentId,"component:deferred:css",c)},then:function(){0===--c&&null!=b&&b.end()}})):a.style(e.css));!1!==a.options().html&&(null==e.view?(-1===c&&(c=0),c++,a.loadHtml({cext:a.options().cext,caching:H,success:function(b){null==e.view&&(e.view=b);n.d(a.componentId,"component:deferred:html",c)},error:function(b){n.e(b,a);t.isFunction(a.options().error)&&
a.options().error.call(a,b,a)},then:function(){0===--c&&null!=b&&b.end()}})):a.view(e.view));-1===c&&null!=b&&b.end()}else null!=b&&b.end();null==b&&(n.d(a.componentId,"controller:create"),N(d))}else n.w(a.componentId,"component:controller:undefined")}}function N(a){n.t(a.context.componentId,"controller:init","timer:init:start");a.view().find(t.dom.queryAttribute(C.dataUiLoaded,"false",t.dom.cssNot(C.dataUiComponent))).each(function(a,b){this.attr(C.dataUiLoaded,null)});a.field=function(b){b=f(b,
a.view(),a);b.on=function(b,c,d,e){if("string"===typeof c){const b=c;c=function(){a.trigger(b,d,e)}}return r.ZxQuery.prototype.on.call(this,b,c)};return b};t.isFunction(a.create)&&a.create();a.trigger("view:create");t.isFunction(a.context.ready)&&a.context.ready.call(a.context,a.context);a.trigger("component:ready",a.view(),!0);a.context.isReady=!0;n.t(a.context.componentId,"controller:init","timer:init:stop");n.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=B[a.context.componentId]){const c=
B[a.context.componentId];B[a.context.componentId]=null;let d;for(;null!=c&&null!=(d=c.shift());)b(d.c,d.o)}zuix.componentize(a.view())}function M(a){let b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(S){n.e(this,S,a)}return b}const n=q("../helpers/Logger")("Zuix.js"),t=q("../helpers/Util"),r=q("../helpers/ZxQuery"),D=q("../helpers/TaskQueue");w=q("../helpers/ObjectObserver");const E=q("./ComponentContext"),z=q("./ContextController"),y=q("./Componentizer")(),C=q("./OptionAttributes");
q("./ComponentCache");const K=[],L=[],I={},J=[],B={},A=[],F=function(a){t.isNoU(J[a])&&(J[a]=new D(function(a,b,c){p(a,b,c)}));return J[a]};let G=[],O=0,H=!0;const R=new w;a.prototype.field=function(a,b){return f.call(this,a,b)};a.prototype.load=function(a,c){{a=y.resolvePath(a);let d;t.isNoU(c)?(c={},d=new E(zuix,c,p)):(c.componentId=a,t.isNoU(c.contextId)?(!1===c&&(c={}),c.contextId="zuix-ctx-"+ ++O,d=g(c)):(d=m(c.contextId),null!==d?d.options(c):d=g(c)));d.componentId!=a&&(d.componentId=a);t.isFunction(c.ready)&&
(d.ready=c.ready);t.isFunction(c.error)&&(d.error=c.error);null==A[a]?(A[a]=!0,c=b(d,c)):(null==B[a]&&(B[a]=[]),B[a].push({c:d,o:c}),c=d)}return c};a.prototype.unload=function(a){if(a instanceof Element){const b=a;a=zuix.context(b);y.dequeue(b)}t.isNoU(a)||a.dispose();return this};a.prototype.controller=function(a){return k.call(this,a)};a.prototype.context=function(a,b){return m.call(this,a,b)};a.prototype.createComponent=function(a,b){null==b&&(b={});t.isNoU(b.contextId)&&(b.contextId="zuix-ctx-"+
++O);if(null!=m(b.contextId))throw Error("Context arelady exists.");b.container=document.createElement("div");b.componentId=a;y.applyOptions(b.container,b);return g(b)};a.prototype.trigger=function(a,b,c){p(a,b,c);return this};a.prototype.hook=function(a,b){t.isNoU(b)?delete L[a]:L[a]=b;return this};a.prototype.using=function(a,b,c){b=y.resolvePath(b);a=a.toLowerCase();const d=a+"-"+b.hashCode();if("component"===a)a=m(d),null==a?zuix.load(b,{contextId:d,view:"",priority:-10,ready:function(a){"function"===
typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{const e="style"===a;if(0===r.find(a+'[id="'+d+'"]').length()){const f=document.head||document.getElementsByTagName("head")[0],g=document.createElement(a);g.type=e?"text/css":"text/javascript";g.id=d;f.appendChild(g);const k=function(a){e?g.styleSheet?g.styleSheet.cssText=a:g.appendChild(document.createTextNode(a)):g.innerText?g.innerText=a:g.appendChild(document.createTextNode(a));c&&c(b,d)},l="_res/"+a+"/"+d;a=h(l);
null!=a?k(e?a.css:a.controller):r.ajax({url:b,success:function(a){G.push({componentId:l,view:null,css:e?a:null,controller:e?null:a,using:b});k(a)},error:function(){f.removeChild(g);c&&c(b)}})}else c&&c(b,d)}};a.prototype.lazyLoad=function(a,b){if(null!=a)y.lazyLoad(a,b);else return y.lazyLoad();return this};a.prototype.httpCaching=function(a){if(null!=a)d(a);else return d();return this};a.prototype.componentize=function(a){y.componentize(a);return this};a.prototype.store=function(a,b){null!=b&&(this._store[a]=
b);return this._store[a]};a.prototype.getResourcePath=function(a){return e(a)};a.prototype.observable=function(a){return R.observable(a)};a.prototype.bundle=function(a,b){if(t.isNoU(a))return G;if(a&&"boolean"===typeof a){n.t("bundle:start");const c=y.lazyLoad();y.lazyLoad(!1);y.componentize();"function"===typeof b&&(a=function(a){setTimeout(function(){y.willLoadMore()?(n.t("bundle:wait"),a(a)):(n.t("bundle:end"),y.lazyLoad(c),b())},1E3)},a(a))}else{for(let b=0;b<a.length;b++)a[b].css_applied&&delete a[b].css_applied,
"string"===typeof a[b].controller&&(a[b].controller=eval(a[b].controller));G=a}return this};a.prototype.$=r;a.prototype.TaskQueue=D;a.prototype.ObjectObserver=w;a.prototype.ZxQuery=r.ZxQuery;a.prototype.dumpCache=function(){return G};a.prototype.dumpContexts=function(){return K};u.exports=function(b){const c=new a;"loading"!=document.readyState?c.componentize():document.addEventListener("DOMContentLoaded",function(){c.componentize()});n.monitor(function(a,b){t.isFunction(c.monitor)&&c.monitor(a,Array.prototype.slice.call(b))});
return c}},{"../helpers/Logger":2,"../helpers/ObjectObserver":3,"../helpers/TaskQueue":4,"../helpers/Util":5,"../helpers/ZxQuery":6,"./ComponentCache":8,"./ComponentContext":9,"./Componentizer":10,"./ContextController":11,"./OptionAttributes":12}]},{},[7])(7)});
//# sourceMappingURL=zuix.min.js.map
