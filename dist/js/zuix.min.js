/*
 @license
 Copyright 2015-2019 G-Labs. All Rights Reserved.
         https://zuixjs.github.io/zuix

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
'use strict';(function(l){"object"===typeof exports&&"undefined"!==typeof module?module.exports=l():"function"===typeof define&&define.amd?define([],l):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).zuix=l()})(function(){return function(){function l(t,w,e){function g(b,a){if(!w[b]){if(!t[b]){var k="function"==typeof require&&require;if(!a&&k)return k(b,!0);if(d)return d(b,!0);a=Error("Cannot find module '"+b+"'");throw a.code="MODULE_NOT_FOUND",
a;}a=w[b]={exports:{}};t[b][0].call(a.exports,function(a){return g(t[b][1][a]||a)},a,a.exports,l,t,w,e)}return w[b].exports}for(var d="function"==typeof require&&require,b=0;b<e.length;b++)g(e[b]);return g}return l}()({1:[function(l,t,w){function e(a){u=a}function g(){null!==n&&(cancelAnimationFrame(n),n=null);a++;if(a<k.length&&!u.willBreak())return b(),!0;(a>=k.length||u.willBreak())&&d();return!1}function d(b){a=-1;k.length=0;k=[];u.status(null!=b?b:"done")}function b(){const b=k[a];if(null==b)return!1;
const f=function(){null!==n&&(cancelAnimationFrame(n),n=null);u.doWork(b.item,function(){n=requestAnimationFrame(g)})||g()};if(b.cancelable)if(u.willBreak())d("stopped");else if(null==n)n=requestAnimationFrame(f);else return!1;else f();return!0}e.prototype.isReady=function(){return 0===k.length||-1===a};e.prototype.getJobs=function(){return k};e.prototype.setJobs=function(b){0<k.length?(a=-1,k.length=0):(k=b.slice(),u.status("start",k),g())};e.prototype.append=function(a){this.isReady()?this.setJobs(a):
Array.prototype.push.apply(k,a)};let k=[],a=-1,u=null,n=null;t.exports=function(a){return new e(a)}},{}],2:[function(l,t,w){function e(a){d=window?window.console:{};b=window?window:{};this._timers={};this.args=function(a,b,d){a="%c "+b+" %c"+(new Date).toISOString()+" %c"+a;b=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var f=0;f<d.length;f++)if("string"==typeof d[f]&&0===
d[f].indexOf("timer:")){const h=d[f].split(":");if(3===h.length){let c;switch(h[2]){case "start":this._timers[h[1]]=(new Date).getTime();a+=" %cSTART "+h[1];b.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":c=(new Date).getTime()-this._timers[h[1]],a+=" %cSTOP "+h[1]+" "+c+" ms",200<c?b.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<c?b.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):b.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}}a+=
" \n%c ";b.push("background-color:transparent;color:inherit;");for(f=b.length-1;0<=f;f--)Array.prototype.unshift.call(d,b[f]);Array.prototype.unshift.call(d,a);Array.prototype.push.call(d,"\n\n")};this.log=function(e,g){"function"===typeof k&&k.call(a,e,g);b.zuixNoConsoleOutput||(this.args(a,e,g),d.log.apply(d,g))}}const g="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" ");let d=null,b=null,
k=null;e.prototype.monitor=function(a){k=a};e.prototype.console=function(a){if(a)window.console=d;else for(window.console={},a=0;a<g.length;a++)window.console[g[a]]||(window.console[g[a]]=function(){})};e.prototype.i=e.prototype.info=e.prototype.l=e.prototype.log=function(){this.log("INFO",arguments);return this};e.prototype.w=e.prototype.warn=function(){this.log("WARN",arguments);return this};e.prototype.e=e.prototype.error=function(){this.log("ERROR",arguments);return this};e.prototype.d=e.prototype.debug=
function(){this.log("DEBUG",arguments);return this};e.prototype.t=e.prototype.trace=function(){this.log("TRACE",arguments);return this};t.exports=function(a){return new e(a)}},{}],3:[function(l,t,w){function e(){this.observableList=[]}function g(a){let b="";for(;a&&a.__path__;){const d=a;a=a.__parents__[0];b=null!=a&&null!=a.__path__?"['"+d.__path__+"']."+b:d.__path__+(b.startsWith("[")?"":".")+b}return b}function d(a){const b=[];a.__parents__.forEach(function(a){b.push(...d(a))});b.push(...a.__listeners__);
return b}function b(a){d(a).forEach(function(b){a.unsubscribe(b)})}l("./ObservableListener");const k=l("./ObservableObject");e.prototype.observable=function(a){let e;const n=this.observableList.filter(function(b){return a===b.proxy||a===b.target});1===n.length&&(e=n[0]);null==e&&(e=new k(this,a,{context:null,get:function(a,b){if("observableTarget"===b)return a;let f=a[b];if("undefined"!==typeof f){var c=[],m=this.context.observable(a);if("object"===typeof f){const a=this.context.observable(f);-1===
a.__parents__.indexOf(m)&&(a.__parents__.push(m),a.__path__=b);c.push(...d(a));f=a.proxy}else c.push(...d(m));var G=g(m)+b;c.forEach(function(c){c.get(a,b,f,G)});return f}},set:function(a,f,h){let c=JSON.parse(JSON.stringify(a));var m=a[f];"object"===typeof m&&b(this.context.observable(m));a[f]=h;m=this.context.observable(a);const G=g(m)+f;d(m).forEach(function(b){b.set(a,f,h,G,c)});return!0},deleteProperty:function(a,f){let h=a[f];"object"===typeof h&&b(this.context.observable(h));return delete a[f]}}));
return e};t.exports=e},{"./ObservableListener":4,"./ObservableObject":5}],4:[function(l,t,w){function e(){}e.prototype.get=function(e,d,b,k){};e.prototype.set=function(e,d,b,k,a){};t.export=e},{}],5:[function(l,t,w){function e(e,d,b){Object.assign(b,{context:e});Object.assign(this,Proxy.revocable(d,b));this.handler=b;this.handler.context.observableList=this.handler.context.observableList||[];this.handler.context.observableList.push(this);this.target=d;this.__parents__=[];this.__listeners__=[]}l("./ObservableListener");
e.prototype.subscribe=function(e){const d=this;this.handler.context.observableList.forEach(function(b){if(b!==d&&-1!==b.__listeners__.indexOf(e))throw Error("Listener already registered.");});this.__listeners__.push(e);return this};e.prototype.unsubscribe=function(e){e=this.__listeners__.indexOf(e);-1!==e&&this.__listeners__.splice(e,1);if(0===this.__listeners__.length){this.revoke();const e=this;this.handler.context.observableList=this.handler.context.observableList.filter(function(b){if(b===e)return!1;
const d=b.__parents__.indexOf(e);return-1!==d&&(b.__parents__.splice(d,1),0===b.__parents__.length&&0===b.__listeners__.length)?(b.unsubscribe(null),!1):!0})}return this};t.exports=e},{"./ObservableListener":4}],6:[function(l,t,w){function e(e){const b=this;b._worker=null;b._taskList=[];b._requests=[];null==e&&(e=function(){});b.taskQueue=function(d,a,u){b._taskList.push({tid:d,fn:a,status:0,priority:u,step:function(a){g.t(a,"load:step");e(b,"load:step",{task:a})},end:function(){this.status=2;g.t(this.tid,
"load:next","timer:task:stop");e(b,"load:next",{task:this.tid});b._taskList.splice(this.index,1);b.taskCheck();null!=this._callback&&this._callback.call(this)},callback:function(a){this._callback=a}});g.t(d,"task added",u,"priority");b._taskList.sort(function(a,b){return a.priority>b.priority?1:b.priority>a.priority?-1:0});b.taskCheck()};b.taskCheck=function(){for(let d=0;d<b._taskList.length;d++){if(0===b._taskList[d].status){b._taskList[d].status=1;g.t(b._taskList[d].tid,"load:begin","timer:task:start");
e(b,"load:begin",{task:b._taskList[d].tid});b._taskList[d].index=d;b._taskList[d].fn.call(b._taskList[d]);return}if(1===b._taskList[d].status||2===b._taskList[d].status)return}g.t("load:end");e(b,"load:end")}}const g=l("./Logger")("TaskQueue.js");e.prototype.callback=function(e){};e.prototype.queue=function(e,b,g){return this.taskQueue(e,b,g)};t.exports=e},{"./Logger":2}],7:[function(l,t,w){t.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},isNoU:function(e){return"undefined"===
typeof e||null===e},isFunction:function(e){return"function"===typeof e},objectEquals:function(e,g){if(null===e||void 0===e||null===g||void 0===g)return e===g;if(e.constructor!==g.constructor)return!1;if(e instanceof Function||e instanceof RegExp)return e===g;if(e===g||e.valueOf()===g.valueOf())return!0;if(Array.isArray(e)&&e.length!==g.length||e instanceof Date||!(e instanceof Object)||!(g instanceof Object))return!1;const d=Object.keys(e);return Object.keys(g).every(function(b){return-1!==d.indexOf(b)})&&
d.every(function(b){return util.objectEquals(e[b],g[b])})},propertyFromPath:function(e,g){if("string"===typeof g){g=g.match(/\[(".*?"|'.*?'|(.*?))\]|".*?"|'.*?'|[0-9a-zA-Z_$]+/g);for(let d=0;d<g.length;d++){let b=g[d];b.startsWith("[")&&b.endsWith("]")&&(b=b.substring(1,b.length-1).trim());b.startsWith('"')&&b.endsWith('"')?b=b.substring(1,b.length-1):b.startsWith("'")&&b.endsWith("'")&&(b=b.substring(1,b.length-1));if("undefined"!==typeof e[b])e=e[b];else return}return e}},cloneObject:function d(g){if(null===
g||"object"!==typeof g)return g;let b=g;try{b=g.constructor();for(let k in g)g.hasOwnProperty(k)&&(b[k]=d(g[k]))}catch(k){}return b},hasPassiveEvents:function(){let g=!1;try{const d=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassive",null,d);window.removeEventListener("testPassive",null,d)}catch(d){}return g},deepFreeze:function(g,d,b){const k=this;Object.freeze(g);Object.getOwnPropertyNames(g).forEach(function(a){null==b&&(b="");b+=(""!==b?".":"")+a;-1!==
d.indexOf(b)||!g.hasOwnProperty(a)||null===g[a]||"object"!==typeof g[a]&&"function"!==typeof g[a]||Object.isFrozen(g[a])||(console.log(b),k.deepFreeze(g[a],d,b));b=null});return g},dom:{queryAttribute:function(g,d,b){const k=g.split(",");let a="";k.forEach(function(g,n){a=null!=d?a+("["+g+'="'+d+'"]'):a+("["+g+"]");b&&(a+=b.get(n));n<k.length-1&&(a+=",")});return a},getAttribute:function(g,d){let b;if("string"===typeof d&&-1!==d.indexOf(",")){d=d.split(",");for(let k=0;k<d.length;k++){const a=g.getAttribute(d[k]);
if(null!=a){b=a;break}}}else b=g.getAttribute(d);return b},setAttribute:function(g,d,b){if("string"===typeof d&&-1!==d.indexOf(",")){const k=this;d.split(",").forEach(function(a){k.setAttribute(g,a,b)})}else null===b?g.removeAttribute(d,b):g.setAttribute(d,b)},cssNot:function(g,d){const b=g.split(",");let k="";b.forEach(function(a,g){k=a.startsWith(".")?k+(":not("+a+")"):null!=d?k+(":not(["+a+'="'+d+'"])'):k+(":not(["+a+"])");g<b.length-1&&(k+=",")});return function(a){return{get:function(b){const d=
a.split(",");return b>=d.length||null==b?d[0]:d[b]},getAll:function(b){return a.split(",").join("")}}}(k)}}}},{}],8:[function(l,t,w){function e(c){b(this,c.type,c)}function g(c,a,b,d){let m=!1;h.each(f,function(){if(this.element===c&&this.path===a&&this.handler===b)return u.w("Handler already registered",c,a,b),m=!0,!1});m||(f.push({element:c,path:a,handler:b,opgions:d}),c.addEventListener(a,e,!z||null!=d&&!1===d.passive?!1:{passive:!0}))}function d(c,a,b){let m=1,d=-1;h.each(f,function(f){this.element===
c&&this.path===a&&this.handler===b&&(m--,d=f)});-1!==d&&f.splice(d,1);0===m&&c.removeEventListener(a,e)}function b(c,a,b){const m=h(c);h.each(f,function(){this.element===c&&this.path===a&&this.handler.call(m,b,m)})}function k(c){h.each(f,function(){this.element===c&&(u.t("Removing event handler",this.element,this.path,this.handler),d(this.element,this.path,this.handler))})}function a(c){this._selection=[];"undefined"===typeof c&&(c=document.documentElement);if(c instanceof a)return c;if(c instanceof
HTMLCollection||c instanceof NodeList){const a=this._selection=[];h.each(c,function(c,b){a.push(b)})}else if(Array.isArray(c))this._selection=c;else if(c===window||c instanceof HTMLElement||c instanceof Node)this._selection=[c];else if("string"===typeof c)this._selection=document.documentElement.querySelectorAll(c);else if(null!==c)throw u.e("ZxQuery cannot wrap object of this type.",typeof c,c),Error("ZxQuery cannot wrap object of this type.");return this}const u=l("./Logger")("TaskQueue.js"),n=
l("./Util.js");let z=n.hasPassiveEvents();const f=[];a.prototype.length=function(){return this._selection.length};a.prototype.parent=function(c){return n.isNoU(c)?new a(this._selection[0].parentNode):new a(h.getClosest(this._selection[0],c))};a.prototype.children=function(c){return n.isNoU(c)?new a(this._selection[0].children):new a(this._selection[0].querySelectorAll(c))};a.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};a.prototype.get=
function(c){n.isNoU(c)&&(c=0);return this._selection[c]};a.prototype.eq=function(c){const b=this._selection;let f=b[c];1<arguments.length&&(f=[],h.each(arguments,function(c,a){null!=b[a]&&f.push(b[a])}));return new a(f)};a.prototype.find=function(c){return new a(this._selection[0].querySelectorAll(c))};a.prototype.each=function(c){h.each(this._selection,c);return this};a.prototype.attr=function(c,a){const b=this;if("object"===typeof c)h.each(c,function(c,a){b.each(function(b,f){n.dom.setAttribute(f,
c,a)})});else{if("undefined"==typeof a)return n.dom.getAttribute(this._selection[0],c);this.each(function(b,f){n.dom.setAttribute(this.get(),c,a)})}return this};a.prototype.trigger=function(c,a){let b;window.CustomEvent?b=new CustomEvent(c,{detail:a}):(b=document.createEvent("CustomEvent"),b.initCustomEvent(c,!0,!0,a));this.each(function(c,a){a.dispatchEvent(b)});return this};a.prototype.one=function(c,a){let b=!1;this.on(c,function(f,m){b||(b=!0,h(this).off(c,a),a.call(this,f,m,this))});return this};
a.prototype.on=function(c,a){const b=c.match(/\S+/g)||[];let f;"function"!==typeof a&&(f=a,a=f.handler);this.each(function(c,m){h.each(b,function(c,b){g(m,b,a,f)})});return this};a.prototype.off=function(c,a){const b=c.match(/\S+/g)||[];this.each(function(c,f){h.each(b,function(c,b){d(f,b,a)})});return this};a.prototype.reset=function(){this.each(function(c,a){k(a)});return this};a.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};a.prototype.position=
function(){return null!=this._selection[0]?h.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};a.prototype.css=function(c,a){const b=this;if("object"===typeof c)h.each(c,function(c,a){b.each(function(b,f){f.style[c]=a})});else{if(n.isNoU(a))return this._selection[0].style[c];b.each(function(b,f){f.style[c]=a})}return this};a.prototype.addClass=function(c){const a=c.match(/\S+/g)||[];h.each(this._selection,function(b,f){f.classList?h.each(a,function(c,a){f.classList.add(a)}):f.className+=" "+
c});return this};a.prototype.hasClass=function(c){return h.hasClass(this._selection[0],c)};a.prototype.removeClass=function(c){const a=c.match(/\S+/g)||[];h.each(this._selection,function(b,f){f.classList?h.each(a,function(c,a){f.classList.remove(a)}):f.className=f.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};a.prototype.prev=function(){return new a(this._selection[0].previousElementSibling)};a.prototype.next=function(){return new a(this._selection[0].nextElementSibling)};
a.prototype.html=function(c){if(n.isNoU(c))return this._selection[0].innerHTML;this.each(function(a,b){b.innerHTML=c});return this};a.prototype.checked=function(c){if(n.isNoU(c)){const c=this._selection[0].checked;return null!=c&&"false"!=c&&(c||"checked"==c)}this.each(function(a,b){b.checked=c});return this};a.prototype.value=function(c){if(n.isNoU(c))return this._selection[0].value;this.each(function(a,b){b.value=c});return this};a.prototype.append=function(c){"string"===typeof c?this._selection[0].innerHTML+=
c:this._selection[0].appendChild(c);return this};a.prototype.insert=function(c,a){c=this.children().get(c);null!==c?this._selection[0].insertBefore(a,c):this._selection[0].appendChild(a);return this};a.prototype.prepend=function(c){"string"===typeof c?this._selection[0].innerHTML=c+this._selection[0].innerHTML:this._selection[0].insertBefore(c,this._selection[0].firstElementChild);return this};a.prototype.detach=function(){const c=this._selection[0],a=c.parentNode;null!=a&&(c.__zuix_oldParent=a,c.__zuix_oldIndex=
Array.prototype.indexOf.call(a.children,c),a.removeChild(c),u.t("Detached from parent",a,c));return this};a.prototype.attach=function(){const c=this._selection[0];null!=c.parentNode&&null!=c.__zuix_oldParent&&c.parentNode.removeChild(c);null==c.parentNode&&null!=c.__zuix_oldParent&&(h(c.__zuix_oldParent).insert(c.__zuix_oldIndex,c),c.__zuix_oldParent=null,delete c.__zuix_oldParent,delete c.__zuix_oldIndex);return this};a.prototype.display=function(c){if(n.isNoU(c))return this._selection[0].style.display;
h.each(this._selection,function(a,b){b.style.display=c});return this};a.prototype.visibility=function(c){if(n.isNoU(c))return this._selection[0].style.visibility;h.each(this._selection,function(a,b){b.style.visibility=c});return this};a.prototype.show=function(c){return this.display(null==c?"":c)};a.prototype.hide=function(){return this.display("none")};const h=function(c){return new a(c)};h.find=function(c){return h().find(c)};h.each=function(c,a){const b=null==c?0:Object.keys(c).length;if(0<b){let f=
0;for(let d in c)if(c.hasOwnProperty(d)){let e=c[d];e instanceof Element&&(e=h(e));if(!1===a.call(e,d,c[d],e))break;f++;if(f>=b)break}}return this};h.ajax=function(c){let a;a=n.isNoU(c)||n.isNoU(c.url)?c:c.url;const b=new XMLHttpRequest;b.onload=function(){200===b.status?n.isFunction(c.success)&&c.success(b.responseText):n.isFunction(c.error)&&c.error(b,b.statusText,b.status);n.isFunction(c.then)&&c.then(b)};b.onerror=function(a,b,f){n.isFunction(c.error)&&c.error(a,b,f)};"function"==typeof c.beforeSend&&
c.beforeSend(b);try{b.open("GET",a),b.send()}catch(O){n.isFunction(c.error)&&c.error(b,b.statusText,b.status,O)}return this};h.hasClass=function(c,a){a=a.match(/\S+/g)||[];let b=!1;h.each(a,function(a,f){if(b=c.classList?c.classList.contains(f):(new RegExp("(^| )"+f+"( |$)","gi")).test(c.className))return!1});return b};h.classExists=function(c){c=c.match(/\S+/g)||[];let a=!1;h.each(c,function(c,b){c=document.styleSheets;if(null!=c)for(let f=0;f<c.length;f++)try{const d=c[f].rules||c[f].cssRules;if(null!=
d)for(let c=0;c<d.length;c++)if(d[c].selectorText===b){a=!0;break}}catch(r){if("SecurityError"!==r.name&&"InvalidAccessError"!==r.name)throw r;}});return a};h.wrapElement=function(c,a){c=document.createElement(c);"string"===typeof a?c.innerHTML=a:c.appendChild(a);return c};h.wrapCss=function(c,a,b){const f=/(([a-zA-Z0-9\240-\377=:-_\n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let d="",e;a=a.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"");do if((e=f.exec(a))&&1<e.length){var m=e[2];if(null!=m&&0<m.length){m=
m.replace(/\n/g,"");const a=m.split(",");let f=!1;h.each(a,function(e,h){"."===h.trim()||":host"===h.trim()?d+="\n[z-component]"+c+" ":"@"===h.trim()[0]?(d+=h+" ",h.trim().toLowerCase().startsWith("@media")&&(f=!0)):d=b?d+("\n"+h.trim()+c+" "):d+("\n[z-component]"+c+"\n"+h.trim()+" ");e<a.length-1&&(d+=", ")});f?(m=h.wrapCss(c,e[1].substring(e[2].length).replace(/^{([^\0]*?)}$/,"$1"),b),d+="{\n  "+m+"\n}"):d+=e[1].substring(e[2].length)+"\n"}else u.w("z$.wrapCss was unable to parse rule.",m,e)}while(e);
""!==d&&(a=d);return a};h.appendCss=function(c,a,b){const f=document.head||document.getElementsByTagName("head")[0];let d=null;n.isNoU(a)?(a=document.getElementById(b),null!=a&&f.removeChild(a)):f.removeChild(a);"string"===typeof c?(d=document.createElement("style"),d.type="text/css",d.id=b,d.styleSheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c))):c instanceof Element&&(d=c);n.isNoU(d)||f.appendChild(d);return d};h.replaceCssVars=function(c,a){const b=new RegExp(/\B\$var\[(.*[^\[\]])]/g);
let f="",d=0,e=0,h;for(;h=b.exec(c);){let b=h[0];if(1<h.length){var m=h[1];let c=a;if(0<m.indexOf(".")){m=m.split(".");for(let a=0;a<m.length-1&&(c=c[m[a]],"undefined"!==typeof c);a++);"undefined"!==typeof c&&(b=c[m[m.length-1]],d++)}else"undefined"!==typeof c[m]&&(b=c[m],d++)}f+=c.substr(e,h.index-e)+b;e=h.index+h[0].length}0<d&&(c=f+=c.substr(e));return c};h.replaceBraces=function(c,a){const b=new RegExp(/{?{.*?}?}/g);let f="",d=0,e=0;for(var h;h=b.exec(c);){if("string"===typeof h[0]&&(0===h[0].trim().length||
0<=h[0].indexOf("\n"))){h=c.substr(e,h.index-e)+h[0];f+=h;e+=h.length;continue}let b=h[0];if("function"===typeof a){const c=a(h[0]);n.isNoU(c)||(b=c,d++)}f+=c.substr(e,h.index-e)+b;e=h.index+h[0].length}return 0<d?f+=c.substr(e):null};h.getClosest=function(c,a){for(c=c.parentNode;c&&c!==document;c=c.parentNode)if(c.matches(a))return c;return null};h.getPosition=function(c,a){var b;{var f=b=0,d=c.getBoundingClientRect();let a=c;for(;a;){if("body"===a.tagName.toLowerCase()){const c=a.scrollTop||document.documentElement.scrollTop;
b+=a.offsetLeft-(a.scrollLeft||document.documentElement.scrollLeft)+a.clientLeft;f+=a.offsetTop-c+a.clientTop}else b+=a.offsetLeft-a.scrollLeft+a.clientLeft,f+=a.offsetTop-a.scrollTop+a.clientTop;a=a.offsetParent}b={x:b,y:f,rect:d}}b.visible=!1;d=c.offsetParent;if(null!=d){if(d!==document.body){for(f=d.offsetParent;null!=f&&null!==f.offsetParent&&f.offsetHeight===f.scrollHeight;)f=f.offsetParent;null!=f&&(d=f)}f=d.getBoundingClientRect();d===document.body&&(f={x:f.x,y:f.y,width:document.documentElement.offsetWidth||
document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight});null==a&&(a=0);d=c.getBoundingClientRect();a=!(d.left-1>f.right-a||d.right+1<f.left+a||d.top-1>f.bottom-a||d.bottom+1<f.top+a);b.visible=a;b.frame={dx:(d.left+d.width/2-f.left)/f.width,dy:(d.top+d.height/
2-f.top)/f.height};c=h(c);!a&&c.hasClass("--ui--visible")?(c.removeClass("--ui--visible"),b.event="exit"):a?a&&(c.hasClass("--ui--visible")?b.event="scroll":(b.event="enter",c.addClass("--ui--visible"))):b.event="off-scroll"}return b};h.ZxQuery=a;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=
(this.document||this.ownerDocument).querySelectorAll(a);let c=a.length;for(;0<=--c&&a.item(c)!==this;);return-1<c});(function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};const b=document.createEvent("CustomEvent");b.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return b}if("function"===typeof window.CustomEvent)return!1;a.prototype=window.Event.prototype;window.CustomEvent=a})();String.prototype.hashCode=function(){let a=0;if(0===this.length)return a;for(let c=0;c<this.length;c++){let b=
this.charCodeAt(c);a=(a<<5)-a+b;a|=0}return a};String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return this.substr(!b||0>b?0:+b,a.length)===a});t.exports=h},{"./Logger":2,"./Util.js":7}],9:[function(l,t,w){l=l("./zuix/Zuix.js");"object"===typeof t&&t.exports?t.exports=l.call(this):this.zuix=l.call(this)},{"./zuix/Zuix.js":16}],10:[function(l,t,w){t.exports=function(e){return null}},{}],11:[function(l,t,w){function e(f,d){d=d.observableTarget||d;switch(f.tagName.toLowerCase()){case "img":f.src=
a.isNoU(d.src)?a.isNoU(d.innerHTML)?d:d.innerHTML:d.src;d.alt&&(f.alt=d.alt);break;case "a":f.href=a.isNoU(d.href)?a.isNoU(d.innerHTML)?d:d.innerHTML:d.getAttribute("href");d.title&&(f.title=d.title);a.isNoU(d.href)||a.isNoU(d.innerHTML)||""===d.innerHTML.trim()||(f.innerHTML=d.innerHTML);break;case "input":f.value=a.isNoU(d.value)?a.isNoU(d.innerHTML)?d:d.innerHTML:d.value;break;default:if(f.innerHTML=a.isNoU(d.innerHTML)?d:d.innerHTML,null!=d.attributes)for(let c=0;c<d.attributes.length;c++){const e=
d.attributes[c];e.specified&&e.name!==b.dataUiField&&("+"===e.value[0]&&f.hasAttribute(e.name)&&(e.value=f.getAttribute(e.name)+" "+e.value.substring(1)),a.dom.setAttribute(f,e.name,e.value))}}}function g(f,d,c){n=f;this._options=null;this.contextId=null==d||null==d.contextId?null:d.contextId;this.componentId=null;this.trigger=function(a,b,f){"function"===typeof c&&c(a,b,f)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=
[];this._c=null;this._modelListener=Object.assign({context:null,get:function(a,c,b,f){},set:function(c,f,d,h,g){c instanceof Element&&(h=h.split(".")[0],d=c);const m=k(this.context.view());if(m.get()){let k=m.find(a.dom.queryAttribute(b.dataBindTo,h));null==k.get()&&(k=m.find(a.dom.queryAttribute(b.dataUiField,h)));k.get()&&e(k.get(),d);this.context._c&&"function"===typeof this.context._c.update&&this.context._c.update(c,f,d,h,g)}}},{context:this});this._viewObserver=new u(this);this.options(d);return this}
const d=l("../helpers/Logger")("ComponentContext.js"),b=l("./OptionAttributes"),k=l("../helpers/ZxQuery"),a=l("../helpers/Util"),u=l("./ViewObserver");let n=null;const z=[];window._controllerOnlyAttribute="_ctrl_";window._cssIdAttribute="_css_";g.prototype.dispose=function(){this._viewObserver.stop();a.isNoU(this._c)||(a.isNoU(this._c.view())||(this._c.view().attr(b.dataUiComponent,null),this._c.view().reset(),a.isNoU(this._c._fieldCache)||k.each(this._c._fieldCache,function(a,c){c.reset()})),a.isFunction(this._c.destroy)&&
this._c.destroy.call(this,this));this.model(null);this._c.view().detach();const f=this._container;null!=f&&null!=f.parentNode&&f.parentNode.removeChild(f)};g.prototype.container=function(a){if(null==a)return this._container;a instanceof k.ZxQuery&&(a=a.get());this._container=a;return this};g.prototype.view=function(f){if("undefined"===typeof f)return this._view;if(null===f)throw Error("View cannot be set to null.");f instanceof k.ZxQuery&&(f=f.get());if(f===this._view)return this;this._viewObserver.stop();
const e=this.getCssId();if(null!=this._view){var c="*"+a.dom.cssNot(b.dataUiLoad).getAll()+a.dom.cssNot(b.dataUiInclude).getAll();k(this._view).attr(e,null).find(c).each(function(a,c){this.attr(e,null)})}d.t(this.componentId,"view:attach","timer:view:start");"string"===typeof f?(f={content:f},this.trigger(this,"html:parse",f),f=f.content,c=k.wrapElement("div",f),null!=c.firstElementChild&&(null!=a.dom.getAttribute(c.firstElementChild,b.dataUiView)?1===c.children.length&&(f=c.firstElementChild.innerHTML):
f=c.innerHTML),null!=this._container?(this._view=this._container,this._view.innerHTML+=f):null!=this._view?this._view.innerHTML=f:this._view=c,k(this._view).find("script").each(function(a,c){"true"!==this.attr(b.zuixLoaded)&&(this.attr(b.zuixLoaded,"true"),eval.call(window,c.innerHTML))}),this.trigger(this,"view:process",k(this._view))):null!=this._container?(this._view=k.wrapElement("div",f.outerHTML).firstElementChild,a.dom.setAttribute(this._view,b.dataUiView,null),this._container.appendChild(this._view),
this._view=this._container):this._view=f;f=k(this._view);f.find(a.dom.queryAttribute(b.dataUiLoad)).each(function(a,c){this.attr(b.dataUiLoaded,"false")});!1!==this._options.css&&(f.attr(e,""),null!=this._container||null!=this._style?(c="*"+a.dom.cssNot(b.dataUiLoad).getAll()+a.dom.cssNot(b.dataUiInclude).getAll(),f.find(c).each(function(a,c){this.attr(e,"")}),this._viewObserver.start(),f.attr(_controllerOnlyAttribute,null)):f.attr(_controllerOnlyAttribute,""));this.modelToView();d.t(this.componentId,
"view:attach","timer:view:stop");return this};g.prototype.style=function(a){if("undefined"===typeof a)return this._style;d.t(this.componentId,"view:style","timer:view:start");if(null==a||a instanceof Element)this._css=a instanceof Element?a.innerText:a,this._style=k.appendCss(a,this._style,this.componentId);else if("string"===typeof a){this._css=a;a={content:a};this.trigger(this,"css:parse",a);a=a.content;let b="";!0===this.options().resetCss&&(b="p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}");
const c="["+this.getCssId()+"]";a=k.wrapCss(c,b+"\n"+a,!0===this.options().encapsulation);this._style=k.appendCss(a,this._style,this.componentId)}d.t(this.componentId,"view:style","timer:view:stop");return this};g.prototype.model=function(b){if("undefined"===typeof b)return this._model;if(this._model===b)return this;null!==this._model&&"function"!==typeof this._model&&n.observable(this._model).unsubscribe(this._modelListener);this._model=b;null!=b&&("function"!==typeof b&&(this._model=n.observable(b).subscribe(this._modelListener).proxy),
this.modelToView(),null!=this._c&&a.isFunction(this._c.update)&&this._c.update.call(this._c,null,null,null,null,this._c));return this};g.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};g.prototype.options=function(a){if(null==a)return this._options;const b=this._options=this._options||{};Object.assign(b,a);this.componentId=b.componentId||this.componentId;null==z[this.componentId]&&(z[this.componentId]=z.length,z.length++);this.container(b.container);
this.view(b.view);"undefined"!==typeof b.css&&this.style(b.css);this.controller(b.controller);this.model(b.model);return this};g.prototype.on=function(a,b){this._c.on(a,b);return this};g.prototype.loadCss=function(b,e){const c=this;a.isNoU(b)&&(b={});a.isNoU(b.caching)||(e=b.caching);let f=c.componentId+".css";a.isNoU(b.path)||(f=b.path);e||(f+="?"+(new Date).getTime());k.ajax({url:n.getResourcePath(f),success:function(d){c.style(d);a.isFunction(b.success)&&b.success.call(c,d,c)},error:function(f){d.e(f,
c);a.isFunction(b.error)&&b.error.call(c,f,c)},then:function(){a.isFunction(b.then)&&b.then.call(c,c)}});return this};g.prototype.loadHtml=function(f,e){const c=this;let h=c.componentId;a.isNoU(f)&&(f={});a.isNoU(f.caching)||(e=f.caching);a.isNoU(f.path)||(h=f.path);var g=n.store("zuix.inlineViews");null==g&&(g=[],n.store("zuix.inlineViews",g));if(null!=g[h])c.view(g[h]),a.isFunction(f.success)&&f.success.call(c,g[h],c),a.isFunction(f.then)&&f.then.call(c,c);else{const m=k().find(a.dom.queryAttribute(b.dataUiView,
h,a.dom.cssNot(b.dataUiComponent)));0<m.length()?(e=m.get(0),g[h]=e.innerHTML,c.view()===e||null!=c.container()&&c.container().contains(e)?(m.attr(b.dataUiView,null),c._view=e,this.trigger(this,"view:process",k(c.view()))):c.view(e.innerHTML),a.isFunction(f.success)&&f.success.call(c,e.innerHTML,c),a.isFunction(f.then)&&f.then.call(c,c)):(g=a.isNoU(f.cext)?".html":f.cext,h==c.componentId&&(h+=g+(e?"":"?"+(new Date).getTime())),k.ajax({url:n.getResourcePath(h),success:function(b){c.view(b);a.isFunction(f.success)&&
f.success.call(c,b,c)},error:function(b){d.e(b,c);a.isFunction(f.error)&&f.error.call(c,b,c)},then:function(){a.isFunction(f.then)&&f.then.call(c,c)}}))}return this};g.prototype.viewToModel=function(){d.t(this.componentId,"view:model","timer:vm:start");const f={};k(this._view).find(a.dom.queryAttribute(b.dataUiField)).each(function(d,c){if(0<this.parent("pre,code").length())return!0;d=this.attr(b.dataUiField);c=!a.isNoU(c.innerHTML)&&a.isIE()?c.cloneNode(!0):c;if(0<d.indexOf(".")){d=d.split(".");
let a=f;for(let b=0;b<d.length-1;b++)"undefined"===typeof a[d[b]]&&(a[d[b]]={}),a=a[d[b]];a[d[d.length-1]]=c}else f[d]=c});this._model=n.observable(f).subscribe(this._modelListener).proxy;d.t(this.componentId,"view:model","timer:vm:stop");return this};g.prototype.modelToView=function(){d.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){const d=this;k(this._view).find(a.dom.queryAttribute(b.dataUiField)).each(function(f,c){if(0<this.parent("pre,code").length())return!0;
f=this.attr(b.dataBindTo);null==f&&(f=this.attr(b.dataUiField));const g=k(d._view);if("function"===typeof d._model)d._model.call(g,this,f,g);else{const b=a.propertyFromPath(d._model,f);"function"===typeof b?b.call(g,this,f,g):null!=b&&e(c,b)}})}d.t(this.componentId,"model:view","timer:mv:stop");return this};g.prototype.getCssId=function(){return _cssIdAttribute+z[this.componentId]};t.exports=g},{"../helpers/Logger":2,"../helpers/Util":7,"../helpers/ZxQuery":8,"./OptionAttributes":14,"./ViewObserver":15}],
12:[function(l,t,w){function e(){}function g(a,b){null!=a&&(K=!a);null!=b&&(L=b);return!A&&!K}function d(a){null==a&&(a=document);E.indexOf(a)||E.push(a)}function b(a){for(let b=0;b<H.length;b++){const c=H[b];if(c.element===a)return c.waiting}return null}function k(a){null==a&&0<E.length&&(a=E.unshift());a instanceof D.ZxQuery&&(a=a.get());b(a);var c=q.dom.queryAttribute(p.dataUiLoad,null,q.dom.cssNot(p.dataUiLoaded))+","+q.dom.queryAttribute(p.dataUiInclude,null,q.dom.cssNot(p.dataUiLoaded));c=D(a).find(c);
c=Array.prototype.slice.call(c._selection);H.push({element:a,waiting:c});a=[];for(var d=0;d<c.length;d++){var e=c[d],v=+q.dom.getAttribute(e,p.dataUiPriority);isNaN(v)&&(v=0);let b=0;var F=e.parentNode;let f=!1;for(;null!=F&&F!==document;){b++;if(null!=q.dom.getAttribute(F,p.dataUiView)){f=!0;break}F=F.parentNode}f||(F=new M,F.element=e,F.priority=v+1E3*b,a.push(F))}c=0;for(d=0;d<a.length;d++){e=!1;for(v=0;v<y.length;v++)if(a[d].element===y[v].element){e=!0;break}e||(e=a[d].element,v=q.dom.getAttribute(e,
p.dataUiOptions),f(e,v),y.push(a[d]),c++)}r.t("componentize:count",y.length,c);(0===c||0===E.length&&0===y.length)&&B.trigger(this,"componentize:end")}function a(){y.sort(function(a,b){return a.priority-b.priority});let a=null,b=0<y.length?y.shift():null;for(;null!=b&&null!=b.element;){const c=O(b.element);g()&&c?(b.lazy=!0,b.visible=D.getPosition(b.element,L).visible):(b.lazy=!1,b.visible=!0);if(null!=b.element&&b.visible){a={item:b,cancelable:b.lazy};break}if(0<y.length)b=y.shift();else break}return a}
function u(b){k(b);b=a();null!=b&&N.append([b])}function n(a){var b=D(a);if(null!=b.attr(p.dataUiLoaded)||0<b.parent("pre,code").length())return!1;b.attr(p.dataUiLoaded,"true");let c=b.attr(p.dataUiOptions);q.isNoU(c)?c={}:(c=q.propertyFromPath(window,c),c=q.cloneObject(c)||{});var f=b.attr(p.dataUiContext);if(!q.isNoU(f)){var v=B.context(f);null!==v&&(c=v.options());c.contextId=f}q.isNoU(c.view)&&!b.isEmpty()?(c.view=a,c.viewDeferred=!0):q.isNoU(c.view)&&q.isNoU(c.container)&&b.isEmpty()&&(c.container=
a);f=b.attr(p.dataUiLoad);if(q.isNoU(f))if(f=b.attr(p.dataUiInclude),null!=f)f=z(f),b.attr(p.dataUiInclude,f),b.attr(p.dataUiComponent,""),q.isNoU(c.controller)&&(c.controller=function(){});else return!1;else f=z(f),b.attr(p.dataUiLoad,f);v=b.attr(p.dataBindModel);!q.isNoU(v)&&0<v.length&&(c.model=q.propertyFromPath(window,v));b=b.attr(p.dataUiPriority);q.isNoU(b)||(c.priority=+b);D(a).one("component:ready",function(){d(a);u(a)});B.load(f,c);return!0}function z(a){if("@"===a[0]){let b=B.store("config"),
c="https://zuixjs.github.io/zkit/lib/";null!=b&&null!=b[location.host]&&(b=b[location.host]);if(null!=b)switch(typeof b.libraryPath){case "object":D.each(b.libraryPath,function(b,d){return a.startsWith(b+"/")?(c=d,!1):!0});break;case "string":c=b.libraryPath}a=c+a.substring(a.indexOf("/")+1)}return a}function f(a,b){"string"===typeof b&&(b=q.propertyFromPath(window,b));null!=a&&null!=b&&(null!=b.lazyLoad&&q.dom.setAttribute(a,p.dataUiLazyload,b.lazyLoad.toString().toLowerCase()),null!=b.contextId&&
q.dom.setAttribute(a,p.dataUiContext,b.contextId.toString().toLowerCase()),null!=b.componentId&&q.dom.setAttribute(a,p.dataUiLoad,b.componentId.toString().toLowerCase()))}function h(a){for(let b=0;b<x.length;b++){const c=x[b];if(c.element===a)return c}return null}function c(a){a={element:a};x.push(a);return a}function m(a){for(let b=0;b<C.length;b++){const c=C[b];if(c.element===a)return c}return null}function G(a){a={element:a};C.push(a);return a}function O(a){if("false"===q.dom.getAttribute(a,p.dataUiLazyload))return!1;
let b=h(a);if(null==b){var d=q.dom.queryAttribute(p.dataUiLazyload,"scroll")+","+q.dom.queryAttribute(p.dataUiLazyload,"true");d=D.getClosest(a.parentNode,d);if(null!=d)return b=c(a),a=m(d),null==a&&(a=G(d),"scroll"===q.dom.getAttribute(d,p.dataUiLazyload)&&function(a,b){let c=(new Date).getTime();D(b===document.body?window:b).on("scroll",function(){const a=(new Date).getTime();100<a-c&&(c=a,u(b))})}(this,d)),!0;if("true"===q.dom.getAttribute(a,p.dataUiLazyload))return b=c(a),!0}else return!0;return!1}
const p=l("./OptionAttributes");e.prototype.componentize=function(a,c){B.trigger(this,"componentize:begin");if(null!=c){const d=b(a);null==d?H.push({element:a,waiting:[c]}):d.push(c)}else d(a);u(a);return this};e.prototype.applyOptions=function(a,b){f(a,b);return this};e.prototype.resolvePath=function(a){return z(a)};e.prototype.willLoadMore=function(){return 0<y.length||0<E.length};e.prototype.lazyLoad=function(a,b){return g(a,b)};e.prototype.dequeue=function(a){for(let b=0;b<y.length;b++)if(y[b].element===
a){y.splice(b,1);break}};e.prototype.setHost=function(a){B=a;return this};t.exports=function(){return new e};const r=l("../helpers/Logger")("ComponentContext.js"),q=l("../helpers/Util"),D=l("../helpers/ZxQuery"),E=[],y=[],x=[],C=[],M=function(){return{element:null,priority:0,visible:!0,lazy:!1}},N=l("./../helpers/AsynChain")({doWork:function(a,b){D(a.element).one("component:ready",function(){b()});return n(a.element)},willBreak:function(){return!1},status:function(a){switch(a){case "done":u()}}});
let K=!1,L=1,B=null,A=!1;navigator&&navigator.userAgent&&(A=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));A&&r.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");const H=[]},{"../helpers/Logger":2,"../helpers/Util":7,"../helpers/ZxQuery":8,"./../helpers/AsynChain":1,"./OptionAttributes":14}],13:[function(l,t,w){function e(d){const b=this;this._view=null;this.context=d;this._fieldCache=[];this.destroy=this.update=this.create=this.init=null;
this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(a,d){b._childNodes.push(d)})};this.restoreView=function(){0<this._childNodes.length&&(b.view().html(""),g.each(b._childNodes,function(a,d){b.view().append(d)}),this._childNodes.length=0)};this.on=function(a,b){this.addEvent(a,b);return this};this.mapEvent=function(a,b,d,f){null!=b&&(b.off(d,this.eventRouter),a[d]=f,b.on(d,this.eventRouter))};this.eventRouter=function(a){const e=b.view();"function"===
typeof d._behaviorMap[a.type]&&d._behaviorMap[a.type].call(e,a,a.detail,e);"function"===typeof d._eventMap[a.type]&&d._eventMap[a.type].call(e,a,a.detail,e)};const e=d.options();let a=null;if(null!=e.on)for(let d in e.on)e.on.hasOwnProperty(d)&&(a=e.on[d],b.addEvent(d,a));if(null!=e.behavior)for(let d in e.behavior)e.behavior.hasOwnProperty(d)&&(a=e.behavior[d],b.addBehavior(d,a));d.controller().call(this,this);return this}const g=l("../helpers/ZxQuery");e.prototype.addEvent=function(d,b){this.mapEvent(this.context._eventMap,
this.view(),d,b);return this};e.prototype.addBehavior=function(d,b){this.mapEvent(this.context._behaviorMap,this.view(),d,b);return this};e.prototype.field=function(d){return null};e.prototype.clearCache=function(){this._fieldCache.length=0};e.prototype.view=function(d){if(null!=this.context.view()||this._view!==this.context.view())this.clearCache(),this._view=g(this.context.view());if(null!=d)return this._view.find(d);if(null!==this._view)return this._view;throw Error("Not attached to a view yet.");
};e.prototype.model=function(d){if(null==d)return this.context.model();this.context.model(d);return this};e.prototype.options=function(){return this.context.options()};e.prototype.trigger=function(d,b,e){null==this.context._eventMap[d]&&!0!==e&&this.addEvent(d,null);!0===e?(e=this.context.container(),null==e&&(e=this.context.view()),null!=e&&g(e).trigger(d,b),this.context.trigger(this.context,d,b)):this.view().trigger(d,b);return this};e.prototype.expose=function(d,b){if("object"===typeof d){const b=
this;g.each(d,function(a,d){b.context[a]=d})}else this.context[d]=b;return this};e.prototype.loadCss=function(d){this.context.loadCss(d);return this};e.prototype.loadHtml=function(d){this.saveView();this.context.loadHtml(d);return this};e.prototype.log={};e.prototype.for=function(d){return this};t.exports=e},{"../helpers/ZxQuery":8}],14:[function(l,t,w){l=Object.freeze({dataBindModel:"z-model,data-bind-model",dataBindTo:"z-bind,data-bind-to",dataUiComponent:"z-component",dataUiContext:"z-context,data-ui-context",
dataUiField:"z-field,data-ui-field",dataUiInclude:"z-include,data-ui-include",dataUiLazyload:"z-lazy,data-ui-lazyload",dataUiLoad:"z-load,data-ui-load",dataUiLoaded:"z-loaded",dataUiOptions:"z-options,data-ui-options",dataUiPriority:"z-priority,data-ui-priority",dataUiView:"z-view,data-ui-view",zuixLoaded:"zuix-loaded"});t.exports=l},{}],15:[function(l,t,w){function e(b){const e=this._context=b;this._mutationObserver=null;this._mutationCallback=function(a,b){const k=d.dom.queryAttribute(g.dataUiComponent);
for(let b of a)"childList"===b.type&&b.addedNodes.forEach(function(a){if(a instanceof Element){let f=zuix.$(a).parent(k);if(!1!==e.options().css&&null==f.attr(_controllerOnlyAttribute)){if(f.get()===e._container||f.get()===e._view){var b=!1;for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name.startsWith(_cssIdAttribute)){b=!0;break}b||d.dom.setAttribute(a,e.getCssId(),"")}}else{b=0;do b++,f=f.parent(k);while(10>b&&null!=f.get()&&null!=f.attr(_controllerOnlyAttribute));if(f.get()){f=zuix.context(f);
b=!1;for(c=0;c<a.attributes.length;c++)if(a.attributes[c].name.startsWith(_cssIdAttribute)){b=!0;break}b||(d.dom.setAttribute(a,f.getCssId(),""),zuix.$(a).find("*").each(function(){this.attr(f.getCssId(),"")}))}}}})}}const g=l("./OptionAttributes"),d=l("../helpers/Util");e.prototype.start=function(){this.stop();this._mutationObserver=new MutationObserver(this._mutationCallback);this._mutationObserver.observe(this._context._view,{attributes:!1,childList:!0,subtree:!0})};e.prototype.stop=function(){null!=
this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)};t.exports=e},{"../helpers/Util":7,"./OptionAttributes":14}],16:[function(l,t,w){function e(){x.setHost(this);this._store=[];this._fieldCache=[];return this}function g(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return K[b]=a});return a}function d(a,b,c){r.isNoU(c)&&(c=this);null==c._fieldCache&&(c._fieldCache={});let v=null;"undefined"===typeof c._fieldCache[a]?(v=q(b).find(r.dom.queryAttribute(C.dataUiField,
a)),null!=v&&0<v.length()&&(c._fieldCache[a]=v,1===v.length()&&r.isNoU(v.field)&&(v.field=function(a){return d(a,v,v)}))):v=c._fieldCache[a];return v}function b(a){let b=zuix.store("config");null!=b&&null!=b[location.host]&&(b=b[location.host]);a=x.resolvePath(a);!a.startsWith("//")&&0>a.indexOf("://")&&(a=(null!=b&&null!=b.resourcePath?b.resourcePath:"")+a);return a}function k(a,b){let d=f(a.componentId);null!==d&&null==b.controller&&null==a.controller()&&(a.controller(d.controller),p.t(a.componentId+
":js","component:cached:js"));if(r.isNoU(b.view)){if(null!==d&&(null!=d.view&&(a.view(d.view),p.t(a.componentId+":html","component:cached:html")),!1!==b.css&&(b.css=!1,d.css_applied||(d.css_applied=!0,a.style(d.css),p.t(a.componentId+":css","component:cached:css")))),r.isNoU(a.view()))return H("resource-loader").queue(a.componentId+":html",function(){A[a.componentId]=this;a.loadHtml({cext:b.cext,caching:J,success:function(e){null==d&&(d=c(a));d.view=e;delete d.controller;!1!==b.css?(A[a.componentId].step(a.componentId+
":css"),a.loadCss({caching:J,success:function(a){d.css=a},error:function(b){p.e(b,a)},then:function(){h(a,A[a.componentId])}})):h(a,A[a.componentId])},error:function(c){p.e(c,a);r.isFunction(b.error)&&a.error.call(a,c,a)}})},b.priority),a}else a.view(b.view);null==a.controller()?H("resource-loader").queue(a.componentId+":js",function(){A[a.componentId]=this;h(a,A[a.componentId])},M.length):h(a);return a}function a(a){a=new E(zuix,a,n);M.push(a);return a}function u(a,b){let c=null;if(a instanceof q.ZxQuery)a=
a.get();else if("string"===typeof a){const b=q.find(r.dom.queryAttribute(C.dataUiContext,a));0<b.length()&&(a=b.get())}q.each(M,function(b,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||r.objectEquals(d.contextId,a))return c=d,!1});if("function"===typeof b&&(a instanceof Element||a instanceof q.ZxQuery))if(null!=c&&c.isReady)b.call(c,c);else q(a).one("component:ready",function(){c=zuix.context(this);b.call(c,c)});return c}function n(a,b,c){r.isFunction(N[b])&&N[b].call(a,c,a)}function z(a){null!=
a&&(J=a);return J}function f(a){let b=null;q.each(I,function(c,d){if(r.objectEquals(d.componentId,a))return b=d,!1});return b}function h(a,c){if("undefined"===typeof a.options().controller&&null===a.controller())if(p.d(a.componentId,"controller:load"),r.isNoU(c)||c.step(a.componentId+":js"),r.isFunction(K[a.componentId]))a.controller(K[a.componentId]),m(a,c);else{const d=function(c){const d=a.componentId+".js"+(J?"":"?"+(new Date).getTime());q.ajax({url:b(d),success:function(b){try{const c=b.indexOf("function"),
d=b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,d-4));const e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+11));const f=b.indexOf("//<--controller");0<f&&(b=b.substring(0,f));b+='\n//# sourceURL="'+a.componentId+'.js"\n';a.controller(O(b))}catch(Q){p.e(Error(),Q,b,a),r.isFunction(a.error)&&a.error.call(a,Q,a)}},error:function(b){p.e(b,Error(),a);r.isFunction(a.error)&&a.error.call(a,b,a)},then:function(){m(a,c)}})};r.isNoU(c)?H("resource-loader").queue(a.componentId+":js",function(){d(A[a.componentId]=
this)},a.options().priority):d(c)}else m(a,c)}function c(a){var b=a.view().innerHTML;b=q.wrapElement("div",b);b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};I.push(b);p.t(a.componentId,"bundle:added");return b}function m(a,b){A[a.componentId]=null;if(r.isNoU(a.view()))p.e(a.componentId,"component:view:undefined");else{let e=f(a.componentId);a.options().viewDeferred?p.w(a.componentId,"component:deferred:load"):null===e?e=c(a):null==e.controller&&(e.controller=a.controller());
null!=b&&b.callback(function(){p.d(a.componentId,"controller:create:deferred");G(a._c)});var d=q(a.view());null==d.attr(C.dataUiContext)&&d.attr(C.dataUiContext,a.contextId);p.d(a.componentId,"component:initializing");if(r.isFunction(a.controller())){d=a._c=new y(a);d.log=l("../helpers/Logger")(a.contextId);"function"===typeof d.init&&d.init();if(!r.isNoU(d.view()))if(null==d.view().attr(C.dataUiComponent)&&d.view().attr(C.dataUiComponent,""),r.isNoU(a.model())&&!r.isNoU(a.view())&&a.viewToModel(),
a.options().viewDeferred){a.options().viewDeferred=!1;d.saveView();null===e&&(e={componentId:a.componentId,controller:a.controller()},I.push(e),p.t(a.componentId,"bundle:added"),p.d(a.componentId,"component:deferred:load"));let c=-1;!1!==a.options().css&&(null==e.css?(-1===c&&(c=0),c++,a.loadCss({caching:J,success:function(b){null==e.css&&(e.css=b);p.d(a.componentId,"component:deferred:css",c)},then:function(){0===--c&&null!=b&&b.end()}})):a.style(e.css));!1!==a.options().html&&(null==e.view?(-1===
c&&(c=0),c++,a.loadHtml({cext:a.options().cext,caching:J,success:function(b){null==e.view&&(e.view=b);p.d(a.componentId,"component:deferred:html",c)},error:function(b){p.e(b,a);r.isFunction(a.options().error)&&a.options().error.call(a,b,a)},then:function(){0===--c&&null!=b&&b.end()}})):a.view(e.view));-1===c&&null!=b&&b.end()}else null!=b&&b.end();d.trigger("view:apply");null==b&&(p.d(a.componentId,"controller:create"),G(d))}else p.w(a.componentId,"component:controller:undefined")}}function G(a){p.t(a.context.componentId,
"controller:init","timer:init:start");a.view().find(r.dom.queryAttribute(C.dataUiLoaded,"false",r.dom.cssNot(C.dataUiComponent))).each(function(a,b){this.attr(C.dataUiLoaded,null)});a.field=function(b){b=d(b,a.view(),a);b.on=function(b,c,d,e){if("string"===typeof c){const b=c;c=function(){a.trigger(b,d,e)}}return q.ZxQuery.prototype.on.call(this,b,c)};return b};r.isFunction(a.create)&&a.create();a.trigger("view:create");r.isFunction(a.context.ready)&&a.context.ready.call(a.context,a.context);a.trigger("component:ready",
a.view(),!0);a.context.isReady=!0;p.t(a.context.componentId,"controller:init","timer:init:stop");p.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=B[a.context.componentId]){const b=B[a.context.componentId];B[a.context.componentId]=null;let c;for(;null!=b&&null!=(c=b.shift());)k(c.c,c.o)}zuix.componentize(a.view())}function O(a){let b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(S){p.e(this,S,a)}return b}const p=l("../helpers/Logger")("Zuix.js"),r=l("../helpers/Util"),
q=l("../helpers/ZxQuery"),D=l("../helpers/TaskQueue");w=l("../helpers/ObjectObserver");const E=l("./ComponentContext"),y=l("./ContextController"),x=l("./Componentizer")(),C=l("./OptionAttributes");l("./ComponentCache");const M=[],N=[],K={},L=[],B={},A=[],H=function(a){r.isNoU(L[a])&&(L[a]=new D(function(a,b,c){n(a,b,c)}));return L[a]};let I=[],P=0,J=!0;const R=new w;e.prototype.field=function(a,b){return d.call(this,a,b)};e.prototype.load=function(b,c){{b=x.resolvePath(b);let d;r.isNoU(c)?(c={},d=
new E(zuix,c,n)):(c.componentId=b,r.isNoU(c.contextId)?(!1===c&&(c={}),c.contextId="zuix-ctx-"+ ++P,d=a(c)):(d=u(c.contextId),null!==d?d.options(c):d=a(c)));d.componentId!=b&&(d.componentId=b);r.isFunction(c.ready)&&(d.ready=c.ready);r.isFunction(c.error)&&(d.error=c.error);null==A[b]?(A[b]=!0,c=k(d,c)):(null==B[b]&&(B[b]=[]),B[b].push({c:d,o:c}),c=d)}return c};e.prototype.unload=function(a){if(a instanceof Element){const b=a;a=zuix.context(b);x.dequeue(b)}r.isNoU(a)||a.dispose();return this};e.prototype.controller=
function(a){return g.call(this,a)};e.prototype.context=function(a,b){return u.call(this,a,b)};e.prototype.createComponent=function(b,c){null==c&&(c={});r.isNoU(c.contextId)&&(c.contextId="zuix-ctx-"+ ++P);if(null!=u(c.contextId))throw Error("Context arelady exists.");c.container=document.createElement("div");c.componentId=b;x.applyOptions(c.container,c);return a(c)};e.prototype.trigger=function(a,b,c){n(a,b,c);return this};e.prototype.hook=function(a,b){r.isNoU(b)?delete N[a]:N[a]=b;return this};
e.prototype.using=function(a,b,c){b=x.resolvePath(b);a=a.toLowerCase();const d=a+"-"+b.hashCode();if("component"===a)a=u(d),null==a?zuix.load(b,{contextId:d,view:"",priority:-10,ready:function(a){"function"===typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{const e="style"===a;if(0===q.find(a+'[id="'+d+'"]').length()){const g=document.head||document.getElementsByTagName("head")[0],h=document.createElement(a);h.type=e?"text/css":"text/javascript";h.id=d;g.appendChild(h);
const k=function(a){e?h.styleSheet?h.styleSheet.cssText=a:h.appendChild(document.createTextNode(a)):h.innerText?h.innerText=a:h.appendChild(document.createTextNode(a));c&&c(b,d)},l="_res/"+a+"/"+d;a=f(l);null!=a?k(e?a.css:a.controller):q.ajax({url:b,success:function(a){I.push({componentId:l,view:null,css:e?a:null,controller:e?null:a,using:b});k(a)},error:function(){g.removeChild(h);c&&c(b)}})}else c&&c(b,d)}};e.prototype.lazyLoad=function(a,b){if(null!=a)x.lazyLoad(a,b);else return x.lazyLoad();return this};
e.prototype.httpCaching=function(a){if(null!=a)z(a);else return z();return this};e.prototype.componentize=function(a){x.componentize(a);return this};e.prototype.store=function(a,b){null!=b&&(this._store[a]=b);return this._store[a]};e.prototype.getResourcePath=function(a){return b(a)};e.prototype.observable=function(a){return R.observable(a)};e.prototype.bundle=function(a,b){if(r.isNoU(a))return I;if(a&&"boolean"===typeof a){p.t("bundle:start");const c=x.lazyLoad();x.lazyLoad(!1);x.componentize();
"function"===typeof b&&(a=function(a){setTimeout(function(){x.willLoadMore()?(p.t("bundle:wait"),a(a)):(p.t("bundle:end"),x.lazyLoad(c),b())},1E3)},a(a))}else{for(let b=0;b<a.length;b++)a[b].css_applied&&delete a[b].css_applied,"string"===typeof a[b].controller&&(a[b].controller=eval(a[b].controller));I=a}return this};e.prototype.$=q;e.prototype.TaskQueue=D;e.prototype.ObjectObserver=w;e.prototype.ZxQuery=q.ZxQuery;e.prototype.dumpCache=function(){return I};e.prototype.dumpContexts=function(){return M};
t.exports=function(a){const b=new e;"loading"!=document.readyState?b.componentize():document.addEventListener("DOMContentLoaded",function(){b.componentize()});p.monitor(function(a,c){r.isFunction(b.monitor)&&b.monitor(a,Array.prototype.slice.call(c))});return b}},{"../helpers/Logger":2,"../helpers/ObjectObserver":3,"../helpers/TaskQueue":6,"../helpers/Util":7,"../helpers/ZxQuery":8,"./ComponentCache":10,"./ComponentContext":11,"./Componentizer":12,"./ContextController":13,"./OptionAttributes":14}]},
{},[9])(9)});
//# sourceMappingURL=zuix.min.js.map
