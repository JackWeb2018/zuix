{"version":3,"file":"zuix.min.js","lineCount":56,"mappings":"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","sources":[" [synthetic:base] "," [synthetic:util/findinternal] "," [synthetic:util/defineproperty] "," [synthetic:util/global] "," [synthetic:util/polyfill] "," [synthetic:es6/array/find] "," [synthetic:es6/symbol] "," [synthetic:es6/util/iteratorfromarray] "," [synthetic:es6/array/keys] ","src/js/zuix.js"],"names":["Zuix","ComponentContext","options","_options","contextId","util","isNoU","behavior","_controller","_style","_css","_view","_model","_container","componentId","_eventMap","_behaviorMap","_c","ContextController","context","self","view","this.view","model","this.model","expose","this.expose","methodName","handler","this.behavior","mapEvent","this.mapEvent","eventMap","target","eventPath","handler_fn","t","z$","off","eventRouter","on","_fieldCache","api","event","refresh","destroy","pause","resume","create","trigger","this.trigger","eventData","addEvent","this.on","invoke","this.invoke","command","isFunction","this.eventRouter","e","type","call","detail","ep","bp","addBehavior","controller","callback","field","fieldName","container","find","get","componentize","element","tasker","requestLock","each","getAttribute","loadInline","lazyLoad","getClosest","visible","_lazyLoaders","indexOf","push","getPosition","position","_lazyQueued","queued","splice","releaseLock","lockLater","v","attr","parent","length","console","log","propertyFromPath","window","cloneObject","isEmpty","options.controller","load","_contextSeqNum","createContext","getContext","cachedComponent","getCachedComponent","ready","error","inlineView","queue","task","ajax","url","getTime","Date","success","viewHtml","end","css","loadViewCss","loadController","err","unload","removeAttribute","_contextRoot","k","Node","objectEquals","cached","_componentCache","viewCss","style","ctrlJs","il","substring","ih","getController","createComponent","html","innerHTML","outerHTML","c","wrapElement","setAttribute","updateModelView","javascriptCode","instance","ctx","_eval","triggerHook","path","data","_hooksCallbacks","hooks","TaskQueue","_t","_worker","_taskList","_requests","taskQueue","_t.taskQueue","tid","fn","status","check","_t.check","clearTimeout","setTimeout","taskCheck","_t.taskCheck","next","i","ZQuery","_selection","document","documentElement","HTMLCollection","NodeList","Array","isArray","HTMLElement","querySelectorAll","prototype","ComponentContext.prototype.options","ComponentContext.prototype.ready","ComponentContext.prototype.error","ComponentContext.prototype.on","a","b","ComponentContext.prototype.invoke","apiMethodName","ComponentContext.prototype.model","ComponentContext.prototype.updateModelView","boundField","boundData","tagName","toLowerCase","src","value","ComponentContext.prototype.style","Element","innerText","appendCss","wrapCss","hookData","content","ComponentContext.prototype.view","firstElementChild","appendChild","addClass","removeClass","ComponentContext.prototype.controller","ComponentContext.prototype.container","ContextController.prototype.addEvent","ContextController.prototype.addBehavior","ContextController.prototype.field","globalSearch","f","el","clearCache","ContextController.prototype.clearCache","eval","obj","x","y","undefined","constructor","Function","RegExp","valueOf","Object","p","keys","every","o","s","replace","split","n","ref","temp","key","TaskQueue.prototype.queue","TaskQueue.prototype.requestLock","_taskerLock","TaskQueue.prototype.releaseLock","TaskQueue.prototype.lockLater","delay","_taskerTimeout","ZQuery.prototype.length","ZQuery.prototype.parent","filter","parentNode","children","ZQuery.prototype.children","ZQuery.prototype.get","eq","ZQuery.prototype.eq","ZQuery.prototype.find","selector","ZQuery.prototype.each","iterationCallback","ZQuery.prototype.css","val","ZQuery.prototype.attr","ZQuery.prototype.trigger","CustomEvent","createEvent","initCustomEvent","dispatchEvent","one","ZQuery.prototype.one","eventHandler","fired","ZQuery.prototype.on","events","match","addEventListener","ZQuery.prototype.off","removeEventListener","ZQuery.prototype.isEmpty","ZQuery.prototype.addClass","className","classes","classList","add","hasClass","ZQuery.prototype.hasClass","cls","contains","test","ZQuery.prototype.removeClass","remove","join","prev","ZQuery.prototype.prev","previousElementSibling","ZQuery.prototype.next","nextElementSibling","ZQuery.prototype.html","htmlText","display","ZQuery.prototype.display","mode","show","ZQuery.prototype.show","hide","ZQuery.prototype.hide","what","z$.find","z$.each","items","len","z$.ajax","opt","xhr","XMLHttpRequest","open","onload","xhr.onload","responseText","send","z$.wrapElement","containerTag","createElement","z$.wrapCss","wrapperRule","wrapReX","r","result","wrappedCss","exec","index","z$.appendCss","head","getElementsByTagName","styleSheet","cssText","createTextNode","removeChild","z$.getClosest","elem","matches","z$.getPosition","isInView","scrollY","scrollTop","offsetLeft","scrollLeft","clientLeft","offsetTop","clientTop","offsetParent","z$.isInView","rect","getBoundingClientRect","bottom","right","left","innerWidth","clientWidth","top","innerHeight","clientHeight","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","ownerDocument","item","zuix","hook","$","dumpCache","dumpContexts","root","factory","define","amd","module","exports"],"sourcesContent":[null,null,null,null,null,null,null,null,null,"/**\n * @license\n * Copyright 2015-2017 G-Labs. All Rights Reserved.\n *         https://genielabs.github.io/zuix\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n *\n *  ZUIX, Javascript library for component-based development.\n *        https://genielabs.github.io/zuix\n *\n * @author Generoso Martello <generoso@martello.com>\n */\n\n/**\n * @class Zuix\n * @constructor\n */\nfunction Zuix() {\n    \"use strict\";\n\n    /**\n     * Component Cache object.\n     * @typedef {{\n     *      componentId: string The id of the cached component,\n     *      view: ContextView The view,\n     *      controller: ContextControllerCallback The function of the controller controller.\n     * }} ComponentCache\n     */\n\n    /**\n     * @protected\n     * @type {!Array<ComponentCache>}\n     */\n    var _componentCache = [];\n\n    /**\n     * Describes the types of objects used in a ComponentContext.\n     *\n     * @callback ContextReadyCallback\n     * @param {ComponentContext} context\n     *\n     * @callback ContextErrorCallback\n     * @param {ComponentContext} context\n     * @param {Object} error\n     *\n     * @callback EventCallback\n     * @param {string} event path\n     * @param {Object} data\n     *\n     * @typedef {!{string, function}} EventMapping\n     *\n     * @typedef {{\n     *    data: Object|undefined,\n     *    locales: Object|undefined\n     * }} ContextModel\n     *\n     * @typedef {Element|string} ContextView\n     *\n     * @typedef {Element|string} ViewContainer\n     *\n     * @typedef {{\n     *    contextId: Object|undefined The context id,\n     *    container: Node|undefined The container element,\n     *    componentId: string|undefined The component identifier,\n     *    model: ContextModel|undefined The data model,\n     *    view: ContextView|undefined The view element,\n     *    css: Element|string|undefined,\n     *    controller: ContextControllerCallback|undefined The controller handler,\n     *    on: Array.<EventMapping>|EventCallback|undefined The events handling map,\n     *    behavior: Array.<EventMapping>|EventCallback|undefined The behaviors handling map,\n     *    ready: ContextReadyCallback|undefined The ready callback, called once the component is succesfully loaded,\n     *    error: ContextErrorCallback|undefined The error callback, called when error occurs\n     * }} ContextOptions\n     *\n     */\n\n    /**\n     * @protected\n     * @type {!Array<ComponentContext>}\n     */\n    var _contextRoot = [];\n\n    /***\n     * TODO: describe this class...\n     *\n     * @param {ContextOptions} options The context options.\n     * @returns {ComponentContext} The component context instance.\n     * @constructor\n     */\n    function ComponentContext(options) {\n\n        this._options = null;\n        this.contextId = util.isNoU(options) || util.isNoU(options.contextId) ? null : options.contextId;\n        this.componentId = null;\n\n        /** @protected */\n        this._container = null;\n\n        /** @protected */\n        this._model = null;\n        /** @protected */\n        this._view = null;\n        /** @protected */\n        this._css = null;\n        /** @protected */\n        this._style = null;\n        /**\n         * @protected\n         * @type {ContextControllerCallback}\n         */\n        this._controller = null;\n\n        /**\n         * Define the local behavior handler for this context instance only.\n         * Any global behavior matching the same `componentId` will be overridden.\n         *\n         * @function behavior\n         * @param handler_fn {function}\n         */\n        this.behavior = null;\n\n        /** @protected */\n        this._eventMap = [];\n        /** @protected */\n        this._behaviorMap = [];\n\n        /**\n         * @protected\n         * @type {ContextController}\n         */\n        this._c = null;\n\n        this.options(options);\n\n        return this;\n    }\n\n    ComponentContext.prototype.options = function (options) {\n        if (util.isNoU(options))\n            return this._options;\n        this._options = options;\n        if (!util.isNoU(options)) {\n            if (!util.isNoU(options.componentId))\n                this.componentId = options.componentId;\n            this.container(options.container);\n            this.view(options.view);\n            if (typeof options.css !== 'undefined')\n                this.style(options.css);\n            this.controller(options.controller);\n            this.model(options.model);\n        }\n        return this;\n    };\n\n    /**\n     * TODO: describe\n     * @event ComponentContext#ready\n     * @param {ComponentContext} context The component context instance.\n     */\n    ComponentContext.prototype.ready = function (context) {\n    };\n\n    /**\n     * TODO: describe\n     * @event ComponentContext#error\n     * @param {ComponentContext} context The component context instance.\n     * @param {Object} error The error object\n     */\n    ComponentContext.prototype.error = function (context, error) {\n    };\n\n\n    /**\n     * TODO: describe\n     * @param a\n     * @param b\n     */\n    ComponentContext.prototype.on = function (a, b) {\n        // TODO: throw error if _c (controller instance) is not yet ready\n        return this._c.on(a, b);\n    };\n\n    /**\n     * TODO: describe\n     * @param apiMethodName {string}\n     * @param options {Object}\n     */\n    ComponentContext.prototype.invoke = function (apiMethodName, options) {\n        // TODO: throw error if _c (controller instance) is not yet ready\n        return this._c.invoke(apiMethodName, options)\n    };\n\n    /***\n     *\n     * @param {ContextModel|undefined} [model]\n     * @returns {ComponentContext|Object}\n     */\n    ComponentContext.prototype.model = function (model) {\n        if (typeof model === 'undefined') return this._model;\n        else this._model = model;\n        this.updateModelView();\n        return this;\n    };\n\n    /** @protected */\n    ComponentContext.prototype.updateModelView = function () {\n        if (!util.isNoU(this._view) && !util.isNoU(this._model)) {\n            var _t = this;\n            z$(this._view).find('[data-ui-field]').each(function (a, b) {\n                var field = z$(this);\n                var boundField = field.attr('data-bind-to');\n                if (util.isNoU(boundField))\n                    boundField = field.attr('data-ui-field');\n                if (util.isFunction(_t._model))\n                    (_t._model).call(_t._view, this, boundField);\n                else {\n                    var boundData = util.propertyFromPath(_t._model, boundField);\n                    if (util.isFunction(boundData)) {\n                        (boundData).call(_t._view, this, boundField);\n                    } else if (!util.isNoU(boundData)) {\n                        // try to guess target property\n                        switch (this.tagName.toLowerCase()) {\n                            // TODO: complete binding cases\n                            case 'img':\n                                this.src = boundData;\n                                break;\n                            case 'input':\n                                this.value = boundData;\n                                break;\n                            default:\n                                this.innerHTML = boundData;\n                        }\n                    }\n                }\n            });\n        }\n    };\n\n    /***\n     *\n     * @param {string|Element|undefined} [css]\n     * @returns {ComponentContext|Element}\n     */\n    ComponentContext.prototype.style = function (css) {\n        if (typeof css === 'undefined') return this._style;\n        if (css == null || css instanceof Element) {\n\n            this._css = (css instanceof Element) ? css.innerText : css;\n            this._style = z$.appendCss(css, this._style);\n\n        } else if (typeof css === 'string') {\n\n            // store original unparsed css (might be useful for debugging)\n            this._css = css;\n\n            // nest the CSS inside [data-ui-component='<componentId>']\n            // so that the style is only applied to this component type\n            css = z$.wrapCss('[data-ui-component=\"' + this.componentId + '\"]:not(.zuix-css-ignore)', css);\n\n            // trigger `css:parse` hook before assigning content to the view\n            var hookData = {content: css};\n            triggerHook(this, 'css:parse', hookData);\n            css = hookData.content;\n\n            // output css\n            this._style = z$.appendCss(css, this._style);\n\n        }\n        // TODO: should throw error if ```css``` is not a valid type\n        return this;\n    };\n    /***\n     *\n     * @param {ContextView|string|undefined} [view]\n     * @returns {ComponentContext|ContextView}\n     */\n    ComponentContext.prototype.view = function (view) {\n        if (typeof view === 'undefined') return this._view;\n        if (typeof view === 'string') {\n            // load view from HTML source\n\n            // trigger `html:parse` hook before assigning content to the view\n            var hookData = {content: view};\n            triggerHook(this, 'html:parse', hookData);\n            view = hookData.content;\n\n            if (!util.isNoU(this._container)) {\n                // append view content to the container\n                this._view = this._container;\n                this._view.innerHTML += view;\n            } else {\n                // TODO: orphan view is of no use? should throw an error\n                this._view = z$.wrapElement('div', view);\n            }\n\n            z$(this._view).find('script').each(function () {\n                if (this.getAttribute('zuix-loaded') !== 'true') {\n                    this.setAttribute('zuix-loaded', 'true');\n                    _eval.call(window, this.innerHTML);\n                    /*\n                     var clonedScript = document.createElement('script');\n                     clonedScript.setAttribute('zuix-loaded', 'true');\n                     clonedScript.onload = function () {\n                     // TODO: ...\n                     };\n                     if (!util.isNoU(this.type) && this.type.length > 0)\n                     clonedScript.type = this.type;\n                     if (!util.isNoU(this.text) && this.text.length > 0)\n                     clonedScript.text = this.text;\n                     if (!util.isNoU(this.src) && this.src.length > 0)\n                     clonedScript.src = this.src;\n                     this.parentNode.insertBefore(clonedScript, this);\n                     */\n                }\n            });\n\n            // trigger `view:process` hook when the view is ready to be processed\n            triggerHook(this, 'view:process', this._view);\n\n            // ZUIX Componentizer is the last executed hook (built-in)\n            componentize(this._view);\n\n            this.updateModelView();\n        } else {\n            // load inline view\n            if (!util.isNoU(this._container)) {\n                this._view = z$.wrapElement('div', view.outerHTML).firstElementChild;\n                this._view.removeAttribute('data-ui-view');\n                this._container.appendChild(this._view);\n                this._view = this._container;\n            } else this._view = view;\n        }\n\n        var v = z$(this._view);\n        if (this._options.css === false)\n        // disable local css styling for this instance\n            v.addClass('zuix-css-ignore');\n        else\n        // enable local css styling\n            v.removeClass('zuix-css-ignore');\n\n        return this;\n    };\n    /***\n     *\n     * @param {ContextControllerCallback|undefined} [controller]\n     * @returns {ComponentContext|ContextControllerCallback}\n     */\n    ComponentContext.prototype.controller = function (controller) {\n        if (typeof controller === 'undefined') return this._controller;\n        // TODO: should dispose previous context controller first\n        else this._controller = controller;\n        return this;\n    };\n    /***\n     *\n     * @param {ViewContainer} [container]\n     * @returns {ComponentContext|Node}\n     */\n    ComponentContext.prototype.container = function (container) {\n        if (util.isNoU(container)) return this._container;\n        else this._container = container;\n        return this;\n    };\n\n\n    /**\n     * TODO: complete JSDoc\n     *\n     * @returns {ContextController}\n     * @constructor\n     */\n    function ContextController(context) {\n        var self = this;\n\n        this.context = context;\n\n        // TODO: should improve/deprecate this.componentId?\n        this.componentId = context.componentId;\n        /** @type {ContextView} */\n        this.view = function () {\n            return context.view()\n        };\n        /** @type {ContextModel} */\n        this.model = function () {\n            return context.model()\n        };\n        /** @type {function} */\n        this.expose = function (methodName, handler) {\n            context[methodName] = handler;\n        };\n        /** @type {function} */\n        this.behavior = function () {\n            return context.behavior;\n        };\n\n        /** @protected */\n        this.mapEvent = function (eventMap, target, eventPath, handler_fn) {\n            if (!util.isNoU(target)) {\n                var t = z$(target);\n                t.off(eventPath, this.eventRouter);\n                eventMap[eventPath] = handler_fn;\n                t.on(eventPath, this.eventRouter);\n            } else {\n                // TODO: should report missing target\n            }\n        };\n\n        /** @protected */\n        this._fieldCache = [];\n\n        /** @type {function} */\n        this.create = null;\n        /** @type {function} */\n        this.resume = null;\n        /** @type {function} */\n        this.pause = null;\n        /** @type {function} */\n        this.destroy = null;\n        /** @type {function} */\n        this.refresh = null;\n        /** @type {function} */\n        this.event = null; // UI event stream handler (eventPath,eventValue)\n        /** @type {function} */\n        this.api = null; // handler for component API (command,options)\n\n        /** @type {function} */\n        this.trigger = function (eventPath, eventData) {\n            if (util.isNoU(context._eventMap[eventPath]))\n                this.addEvent(self.view(), eventPath, null);\n            // TODO: ...\n            z$(self.view()).trigger(eventPath, eventData);\n        };\n        /** @type {function} */\n        this.on = function (eventPath, handler_fn) {\n            this.addEvent(self.view(), eventPath, handler_fn);\n            // TODO: implement automatic event unbinding (off) in super().destroy()\n        };\n        /** @type {function} */\n        this.invoke = function (command, options) {\n            // used by consumers to invoke a component API command\n            if (util.isFunction(self.api))\n                self.api(command, options);\n        };\n        /** @type {function} */\n        this.eventRouter = function (e) {\n            //if (util.isFunction(self.behavior()))\n            //    self.behavior().call(self.view(), a, b);\n            if (util.isFunction(context._behaviorMap[e.type]))\n                context._behaviorMap[e.type].call(self.view(), e, e.detail);\n            if (util.isFunction(context._eventMap[e.type]))\n                context._eventMap[e.type].call(self.view(), e, e.detail);\n            // TODO: else-> should report anomaly\n        };\n        // create event map from context options\n        var options = context.options(), handler = null;\n        if (!util.isNoU(options.on)) {\n            for (var ep in options.on) {\n                handler = options.on[ep];\n                // TODO: should log.warn if k already exists\n                self.addEvent(self.view(), ep, handler);\n            }\n        }\n        // create behavior map from context options\n        if (!util.isNoU(options.behavior)) {\n            for (var bp in options.behavior) {\n                handler = options.behavior[bp];\n                // TODO: should log.warn if k already exists\n                self.addBehavior(self.view(), bp, handler);\n            }\n        }\n\n        context.controller().call(this, this);\n\n        return this;\n    }\n\n    // TODO: add jsDoc\n    ContextController.prototype.addEvent = function (target, eventPath, handler_fn) {\n        this.mapEvent(this.context._eventMap, target, eventPath, handler_fn);\n        return this;\n    };\n\n    // TODO: add jsDoc\n    ContextController.prototype.addBehavior = function (target, eventPath, handler_fn) {\n        this.mapEvent(this.context._behaviorMap, target, eventPath, handler_fn);\n        return this;\n    };\n\n    /***\n     * Search and cache this view elements.\n     *\n     * @param {!string} field Name of the `data-ui-field` to search\n     * @param {boolean} [globalSearch] Search a generic field attribute\n     * @returns {Node}\n     */\n    ContextController.prototype.field = function (field, globalSearch) {\n        var f = globalSearch ? '@' + field : field;\n        var el = null;\n        if (typeof this._fieldCache[f] === 'undefined') {\n            el = globalSearch ? z$(field).get(0) : z$(this.view()).find('[data-ui-field=' + field + ']').get(0);\n            if (!util.isNoU(el))\n                this._fieldCache[f] = el;\n        } else {\n            el = this._fieldCache[f];\n        }\n        return el;\n    };\n    ContextController.prototype.clearCache = function () {\n        this._fieldCache.length = 0;\n    };\n\n\n    // TODO: implement Config object for zuix\n    /** @protected\n     * @const\n     */\n    var _zuixFieldAttribute = 'data-ui-field';\n    // work-around for lint eval error\n    /** @protected\n     * @const\n     */\n    var _eval = eval;\n    //\n    /** @protected */\n    var _contextSeqNum = 0;\n\n    /** @protected */\n    var _lazyQueued = []; // Lazy loading - queued elements\n    /** @protected */\n    var _lazyLoaders = []; // \"data-ui-lazyload\" elements\n\n\n    /**\n     * TODO: describe\n     *\n     * @callback ContextControllerCallback\n     * @param {ContextController} ctx\n     */\n    /**\n     * TODO: describe\n     *\n     * @param callback {ContextControllerCallback}\n     * @returns {ContextControllerCallback}\n     */\n    function controller(callback) {\n        return callback;\n    }\n\n    /**\n     * Returns Node with `_zuixFieldAttribute` attribute matching `fieldName` .\n     *\n     * @param {!string} fieldName The class to check for.\n     * @param {!Node} [container] Starting DOM element for this search.\n     * @returns {Node}\n     */\n    function field(fieldName, container) {\n        return z$(container).find('[' + _zuixFieldAttribute + '=\"' + fieldName + '\"]').get(0);\n    }\n\n    /**\n     * TODO: describe\n     *\n     * @param [element] {Node}\n     */\n    function componentize(element) {\n        if (tasker.requestLock(componentize)) {\n            z$(element).find('[data-ui-load]:not([data-ui-loaded=true]),[data-ui-include]:not([data-ui-loaded=true])').each(function () {\n                // override lazy loading if 'forceload' is specified for the current element\n                if (this.getAttribute('data-ui-forceload') === 'true') {\n                    loadInline(this);\n                    return true;\n                }\n                // defer element loading if lazy loading is enabled and the element is not in view\n                var lazyLoad = z$.getClosest(this, '[data-ui-lazyload=true]');\n                if (lazyLoad !== null) {\n                    if (_lazyLoaders.indexOf(lazyLoad) == -1) {\n                        _lazyLoaders.push(lazyLoad);\n                        z$(lazyLoad).on('scroll', function () {\n                            componentize(lazyLoad);\n                        });\n                    }\n                    var position = z$.getPosition(this);\n                    if (!position.visible) {\n                        if (_lazyQueued.indexOf(this) == -1) {\n                            _lazyQueued.push(this);\n                        }\n                        // Not in view: defer element loading and\n                        // process next inline element\n                        return true;\n                    }\n                }\n                // proceed loading inline element\n                var queued = _lazyQueued.indexOf(this);\n                if (queued > -1)\n                    _lazyQueued.splice(queued, 1);\n                loadInline(this);\n            });\n            tasker.releaseLock(componentize);\n        } else tasker.lockLater(componentize, function() {\n                componentize(element);\n            }, 200);\n    }\n\n    /** @protected */\n    function loadInline(element) {\n        var v = z$(element);\n        if (v.attr('data-ui-loaded') === 'true' || v.parent('pre,code').length() > 0) {\n            console.log(\"ZUIX\", \"WARN\", \"Skipped\", element);\n            return;\n        }\n        v.attr('data-ui-loaded', 'true');\n        /** @type {ContextOptions} */\n        var options = v.attr('data-ui-options');\n        if (!util.isNoU(options)) {\n            options = util.propertyFromPath(window, options);\n            // copy passed options\n            options = util.cloneObject(options) || {};\n        } else options = {};\n\n        // Automatic view/container selection\n        if (util.isNoU(options.view) && !v.isEmpty())\n            options.view = element;\n        else if (util.isNoU(options.view) && util.isNoU(options.container) && v.isEmpty())\n            options.container = element;\n\n        var componentId = v.attr('data-ui-load');\n        if (util.isNoU(componentId)) {\n            // Static include should not have any controller\n            componentId = v.attr('data-ui-include');\n            v.attr('data-ui-component', componentId);\n            // disable controller auto-loading\n            if (util.isNoU(options.controller))\n                options.controller = function(){}; // null\n        }\n\n        // inline attributes have precedence over ```options```\n\n        var model = v.attr('data-bind-model');\n        if (!util.isNoU(model) && model.length > 0)\n            options.model = util.propertyFromPath(window, model);\n\n        // TODO: Behavior are also definable in \"data-ui-behavior\" attribute\n        // TODO: Events are also definable in \"data-ui-on\" attribute\n        // TODO: perhaps \"data-ui-ready\" and \"data-ui-error\" too\n        // util.propertyFromPath( ... )\n\n        load(componentId, options);\n    }\n\n    /**\n     * Loads a component with the given options.\n     *\n     * @param {!string} componentId The id/name of the component we want to load.\n     * @param {ContextOptions} [options] context options used to initialize the loaded component\n     * @returns {ComponentContext}\n     */\n    function load(componentId, options) {\n        // TODO: throw error on argument mismatch\n        // TODO: prevent load loops when including recursively a component\n\n        /** @type {ComponentContext} */\n        var context = null;\n        if (!util.isNoU(options)) {\n            // check if context has its unique id assigned\n            if (!util.isNoU(options.contextId)) {\n                // if it does, try to pick it from allocated contexts list\n                context = getContext(options.contextId);\n                if (context !== null) {\n                    context.options(options);\n                } else {\n                    // if no context is already allocated\n                    // with that id, then add a new one\n                    context = createContext(options);\n                }\n            } else {\n                if (options === false)\n                    options = {};\n                // generate contextId (this is a bit buggy, but it's quick)\n                options.contextId = 'zuix-ctx-' + (++_contextSeqNum);\n                context = createContext(options);\n            }\n        } else {\n            // empty context\n            options = {};\n            context = new ComponentContext(options);\n        }\n\n        // assign the given component (widget) to this context\n        if (context.componentId != componentId) {\n            context.componentId = componentId;\n            /*\n             TODO: to be fixed\n             if (!util.isNoU(context.view())) {\n             // TODO: implement this code in a context.detach() method\n             //context.controller().pause()\n             context.view().detach();\n             context.view(null);\n             }*/\n        }\n\n        // pick it from cache if found\n        var cachedComponent = getCachedComponent(context.componentId);\n        if (cachedComponent !== null && util.isNoU(context.controller()))\n            context.controller(cachedComponent.controller);\n\n        if (util.isFunction(options.ready))\n            context.ready = options.ready;\n        if (util.isFunction(options.error))\n            context.error = options.error;\n\n        if (util.isNoU(options.view)) {\n\n            if (cachedComponent !== null) {\n                context.view(cachedComponent.view);\n            } else {\n                // TODO: replace z$() with z$(options.container)\n                var inlineView = z$().find('[data-ui-view=\"' + context.componentId + '\"]');\n                if (inlineView.length() > 0)\n                    context.view(inlineView.get(0));\n            }\n\n            // if not able to inherit the view from the base cachedComponent\n            // or from an inline element, then load the view from web\n            if (util.isNoU(context.view())) {\n                // Load View\n                tasker.queue('html:' + context.componentId, function () {\n                    var task = this;\n                    z$.ajax({\n                        url: context.componentId + \".html?\" + new Date().getTime(),\n                        success: function (viewHtml) {\n                            context.view(viewHtml);\n                            task.end();\n                            // View CSS loading\n                            if (options.css !== false)\n                                loadViewCss(context, function () {\n                                    // Controller loading\n                                    loadController(context);\n                                });\n                            else loadController(context);\n                        },\n                        error: function (err) {\n                            task.end();\n                            console.log(err, context);\n                            if (util.isFunction(options.error))\n                                context.error(context, err);\n                        }\n                    });\n\n                });\n                // defer controller loading\n                return context;\n            }\n        } else {\n            context.view(options.view);\n        }\n        loadController(context);\n        return context;\n    }\n\n    /**\n     *\n     * @param context {ComponentContext}\n     */\n    function unload(context) {\n        if (!util.isNoU(context) && !util.isNoU(context._c)) {\n            if (!util.isNoU(context._c.view()))\n                context._c.view().removeAttribute('data-ui-component');\n\n            //context.unregisterEvents();\n            // TODO: unregister events and local context behavior\n            // TODO: detach view from parent if context.container is not null\n\n            if (util.isFunction(context._c.destroy))\n                context._c.destroy();\n        }\n    }\n\n    /***\n     *\n     * @param {Node|Object} contextId\n     * @returns {ComponentContext}\n     */\n    function getContext(contextId) {\n        var context = null;\n        z$.each(_contextRoot, function (k, v) {\n            if ((contextId instanceof Node && v.view() === contextId)\n                || util.objectEquals(v.contextId, contextId)) {\n                context = v;\n                return false;\n            }\n        });\n        return context;\n    }\n\n    function createContext(options) {\n        var context = new ComponentContext(options);\n        _contextRoot.push(context);\n        return context;\n    }\n\n    function removeContext(contextId) {\n        // TODO: removeContext\n    }\n\n    function removeCachedComponent(componentId) {\n        // TODO: removeCachedComponent\n    }\n\n    /***\n     *\n     * @param {Object} componentId\n     * @returns {ComponentCache}\n     */\n    function getCachedComponent(componentId) {\n        var cached = null;\n        z$.each(_componentCache, function (k, v) {\n            if (util.objectEquals(v.componentId, componentId)) {\n                cached = v;\n                return false;\n            }\n        });\n        return cached;\n    }\n\n\n    function loadViewCss(context, callback) {\n        // CSS is optional, so no error is thrown on load error\n        tasker.queue('css:' + context.componentId, function () {\n            var task = this;\n            z$.ajax({\n                url: context.componentId + \".css?\" + new Date().getTime(),\n                success: function (viewCss) {\n                    context.style(viewCss);\n                    task.end();\n                    if (util.isFunction(callback))\n                        callback.call(context);\n                },\n                error: function (err) {\n                    task.end();\n                    console.log(err, context);\n                    if (util.isFunction(callback))\n                        callback.call(context);\n                }\n            });\n\n        });\n\n\n    }\n\n    /***\n     *\n     * @param {ComponentContext} context\n     */\n    function loadController(context) {\n        if (typeof context.options().controller === 'undefined' && context.controller() === null) {\n            tasker.queue('js:' + context.componentId, function () {\n                var task = this;\n                z$.ajax({\n                    url: context.componentId + \".js?\" + new Date().getTime(),\n                    success: function (ctrlJs) {\n                        try {\n                            var il = ctrlJs.indexOf('.load');\n                            if (il > 1)\n                                ctrlJs = ctrlJs.substring(0, il - 4);\n                            var ih = ctrlJs.indexOf('.controller');\n                            if (ih > 1)\n                                ctrlJs = ctrlJs.substring(ih + 11);\n                            context.controller(getController(ctrlJs));\n                        } catch (e) {\n                            console.log(e, ctrlJs, context);\n                            if (util.isFunction(context.error))\n                                context.error(context, e);\n                            return;\n                        }\n                        createComponent(context);\n                        task.end();\n                    },\n                    error: function (err) {\n                        task.end();\n                        createComponent(context);\n                        console.log(err, context);\n                        if (util.isFunction(context.error))\n                            context.error(context, err);\n                    }\n                });\n            });\n        } else {\n            createComponent(context);\n        }\n    }\n\n    /***\n     *\n     * @param context {ComponentContext}\n     */\n    function createComponent(context) {\n        if (!util.isNoU(context.view())) {\n            var cached = getCachedComponent(context.componentId);\n            if (cached === null) {\n                var html = (context.view() === context.container() ? context.view().innerHTML : context.view().outerHTML);\n                var c = z$.wrapElement('div', html);\n                _componentCache.push({\n                    componentId: context.componentId,\n                    view: c.innerHTML,\n                    controller: context.controller()\n                });\n            }\n            initComponent(context);\n        } else {\n            // TODO: report error\n        }\n    }\n\n    /***\n     *\n     * @param {ComponentContext} context\n     */\n    function initComponent(context) {\n        if (util.isFunction(context.controller())) {\n            /** @type {ContextController} */\n            var c = context._c = new ContextController(context);\n\n            if (!util.isNoU(c.view()))\n                c.view().setAttribute('data-ui-component', c.componentId);\n\n            // TODO: review/improve life-cycle\n\n            if (util.isFunction(c.create)) c.create();\n            c.trigger('view:create');\n\n            //if (util.isFunction(c.bind)) c.bind();\n            context.updateModelView();\n            //if (util.isFunction(c.refresh)) c.refresh();\n\n            if (util.isFunction(c.resume)) c.resume();\n        }\n        if (util.isFunction(context.ready))\n            context.ready(context);\n    }\n\n    /***\n     *\n     * @param javascriptCode string\n     * @returns {ContextControllerCallback}\n     */\n    // TODO: refactor this method name\n    function getController(javascriptCode) {\n        var instance = function (ctx) {\n        };\n        if (typeof javascriptCode === 'string')\n            instance = _eval(javascriptCode);\n        return instance;\n    }\n\n\n    // TODO: following code to be sorted/re-arranged\n\n\n    function triggerHook(context, path, data) {\n        // TODO: call all registered callback\n        if (util.isFunction(_hooksCallbacks[path]))\n            _hooksCallbacks[path].call(context, path, data);\n    }\n\n    var _hooksCallbacks = [];\n\n    function hooks(path, handler) {\n        if (util.isNoU(handler))\n            return _hooksCallbacks[path];\n        _hooksCallbacks[path] = handler;\n        return this;\n    }\n\n\n    // Generic utility class\n    var util = {\n\n        isNoU: function (obj) {\n            return (typeof obj === 'undefined' || obj === null);\n        },\n\n        isFunction: function (f) {\n            return typeof f === 'function';\n        },\n\n        objectEquals: function (x, y) {\n            if (x === null || x === undefined || y === null || y === undefined) {\n                return x === y;\n            }\n            // after this just checking type of one would be enough\n            if (x.constructor !== y.constructor) {\n                return false;\n            }\n            // if they are functions, they should exactly refer to same one (because of closures)\n            if (x instanceof Function) {\n                return x === y;\n            }\n            // if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n            if (x instanceof RegExp) {\n                return x === y;\n            }\n            if (x === y || x.valueOf() === y.valueOf()) {\n                return true;\n            }\n            if (Array.isArray(x) && x.length !== y.length) {\n                return false;\n            }\n\n            // if they are dates, they must had equal valueOf\n            if (x instanceof Date) {\n                return false;\n            }\n\n            // if they are strictly equal, they both need to be object at least\n            if (!(x instanceof Object)) {\n                return false;\n            }\n            if (!(y instanceof Object)) {\n                return false;\n            }\n\n            // recursive object equality check\n            var p = Object.keys(x);\n            return Object.keys(y).every(function (i) {\n                    return p.indexOf(i) !== -1;\n                }) &&\n                p.every(function (i) {\n                    return util.objectEquals(x[i], y[i]);\n                });\n        },\n\n        propertyFromPath: function (o, s) {\n            if (typeof s !== 'string') return;\n            s = s.replace(/\\[(\\w+)]/g, '.$1'); // convert indexes to properties\n            s = s.replace(/^\\./, '');           // strip a leading dot\n            var a = s.split('.');\n            var ref = o;\n            for (var i = 0, n = a.length; i < n; ++i) {\n                var k = a[i];\n                if (typeof ref[k] !== 'undefined') {\n                    ref = ref[k];\n                } else {\n                    return;\n                }\n            }\n            return ref;\n        },\n\n        cloneObject: function cloneObject(obj) {\n            if (obj === null || typeof obj !== 'object') {\n                return obj;\n            }\n            // give temp the original obj's constructor\n            var temp = obj.constructor();\n            for (var key in obj)\n                temp[key] = cloneObject(obj[key]);\n            return temp;\n        }\n\n    };\n\n\n    /**\n     * Task Queue Manager\n     *\n     * @class TaskQueue\n     * @constructor\n     */\n    function TaskQueue() {\n        var _t = this;\n        _t._worker = null;\n        _t._taskList = [];\n        _t._requests = [];\n        _t.taskQueue = function (tid, fn) {\n            _t._taskList.push({\n                tid: tid,\n                fn: fn,\n                status: 0,\n                end: function () {\n                    this.status = 2;\n                }\n            });\n            _t.check();\n        };\n        _t.check = function () {\n            if (_t._worker != null)\n                clearTimeout(_t._worker);\n            _t._worker = setTimeout(function () {\n                _t.taskCheck();\n            }, 10);\n        };\n        _t.taskCheck = function () {\n            var next = -1;\n            for (var i = 0; i < _t._taskList.length; i++) {\n                if (next != -2 && _t._taskList[i].status == 0) {\n                    next = i;\n                }\n                else if (_t._taskList[i].status == 1) {\n                    next = -2;\n                    _t.check();\n                    triggerHook(_t, 'load:step', {\n                        task: _t._taskList[i].tid\n                    });\n                    return;\n                }\n                else if (_t._taskList[i].status == 2) {\n                    triggerHook(this, 'load:next', {\n                        task: _t._taskList[i].tid\n                    });\n                    _t._taskList.splice(i, 1);\n                    _t.check();\n                    return;\n                }\n            }\n\n            if (next >= 0) {\n                _t._taskList[next].status = 1;\n                (_t._taskList[next].fn).call(_t._taskList[next]);\n                _t.check();\n                triggerHook(_t, 'load:begin', {\n                    task: _t._taskList[next].tid\n                });\n            } else {\n                triggerHook(_t, 'load:end');\n            }\n        }\n\n    }\n    TaskQueue.prototype.queue = function(tid, fn) {\n        return this.taskQueue(tid, fn);\n    };\n    TaskQueue.prototype.requestLock = function(obj) {\n        if (!util.isNoU(obj._taskerLock))\n            return false;\n        obj._taskerLock = true;\n        return true;\n    };\n    TaskQueue.prototype.releaseLock = function(obj) {\n        // prevent flooding\n        setTimeout(function () {\n            delete obj._taskerLock;\n        }, 100);\n    };\n    TaskQueue.prototype.lockLater = function(obj, handler, delay) {\n        var _t = this;\n        if (util.isNoU(obj._taskerLock))\n            handler();\n        else {\n            if (util.isNoU(obj._taskerTimeout)) {\n                obj._taskerTimeout = true;\n                obj._taskerTimeout = setTimeout(function () {\n                    delete obj._taskerTimeout;\n                    _t.lockLater(obj, handler, delay);\n                }, delay);\n            }\n        }\n        return true;\n    };\n\n    var tasker = new TaskQueue();\n\n\n\n    /**\n     * ZQuery, a very small subset of jQuery-like functions\n     * internally used in Zuix\n     * @class ZQuery\n     * @param element {ZQuery|Array<Node>|Node|NodeList|string|undefined}\n     * @return {ZQuery}\n     * @constructor\n     */\n    function ZQuery(element) {\n        /** @protected */\n        this._selection = [];\n\n        if (typeof element === 'undefined')\n            element = document.documentElement;\n\n        if (element instanceof ZQuery)\n            return element;\n        else if (element instanceof HTMLCollection || element instanceof NodeList || Array.isArray(element))\n            this._selection = element;\n        else if (element instanceof HTMLElement || element instanceof Node)\n            this._selection = [element];\n        else if (typeof element === 'string')\n            this._selection = document.documentElement.querySelectorAll(element);\n        else if (element !== null) { //if (typeof element === 'string') {\n            console.log(typeof element);\n            throw(element);\n        }\n        return this;\n    }\n\n    ZQuery.prototype.length = function () {\n        return this._selection.length;\n    };\n\n    ZQuery.prototype.parent = function (filter) {\n        if (!util.isNoU(filter))\n            return new ZQuery(z$.getClosest(this._selection[0], filter));\n        return new ZQuery(this._selection[0].parentNode);\n    };\n    ZQuery.prototype.children = function (filter) {\n        // TODO: implement filtering\n        if (!util.isNoU(filter))\n            return new ZQuery(this._selection[0].querySelectorAll(filter));\n        return new ZQuery(this._selection[0].children);\n    };\n    ZQuery.prototype.get = function (i) {\n        if (util.isNoU(i))\n            i = 0;\n        return this._selection[i];\n    };\n    ZQuery.prototype.eq = function (i) {\n        return new ZQuery(this._selection[i]);\n    };\n    ZQuery.prototype.find = function (selector) {\n        return new ZQuery(this._selection[0].querySelectorAll(selector));\n    };\n    ZQuery.prototype.each = function (iterationCallback) {\n        z$.each(this._selection, iterationCallback);\n        return this;\n    };\n    ZQuery.prototype.css = function (attr, val) {\n        if (util.isNoU(val))\n            return this._selection[0].style[attr];\n        else\n            this.each(function (k, v) {\n                this.style[attr] = val;\n            });\n        return this;\n    };\n    ZQuery.prototype.attr = function (attr, val) {\n        if (util.isNoU(val))\n            return this._selection[0].getAttribute(attr);\n        else\n            this.each(function (k, v) {\n                this.setAttribute(attr, val);\n            });\n        return this;\n    };\n    ZQuery.prototype.trigger = function (eventPath, eventData) {\n        var event;\n        if (window.CustomEvent) {\n            event = new CustomEvent(eventPath, {detail: eventData});\n        } else {\n            event = document.createEvent('CustomEvent');\n            event.initCustomEvent(eventPath, true, true, eventData);\n        }\n        this.each(function (k, v) {\n            this.dispatchEvent(event);\n        });\n        return this;\n    };\n    ZQuery.prototype.one = function (eventPath, eventHandler) {\n        var fired = false;\n        this.on(eventPath, function (a, b) {\n            if (fired) return;\n            fired = true;\n            z$(this).off(eventPath, eventHandler);\n            (eventHandler).call(this, a, b);\n        });\n        return this;\n    };\n    ZQuery.prototype.on = function (eventPath, eventHandler) {\n        var events = eventPath.match(/\\S+/g) || [];\n        this.each(function (k, v) {\n            var _t = this;\n            z$.each(events, function (k, v) {\n                _t.addEventListener(v, eventHandler, false);\n            });\n        });\n        return this;\n    };\n    ZQuery.prototype.off = function (eventPath, eventHandler) {\n        var events = eventPath.match(/\\S+/g) || [];\n        this.each(function (k, v) {\n            var _t = this;\n            z$.each(events, function (k, v) {\n                _t.removeEventListener(v, eventHandler);\n            });\n        });\n        return this;\n    };\n    ZQuery.prototype.isEmpty = function () {\n        return (this._selection[0].innerHTML.replace(/\\s/g, '').length === 0);\n    };\n    // TODO: the following methods could be deprecated\n    ZQuery.prototype.css = function (attr, val) {\n        if (util.isNoU(val))\n            return this._selection[0].style[attr];\n        else\n            this.each(function (k, v) {\n                this.style[attr] = val;\n            });\n        return this;\n    };\n    ZQuery.prototype.addClass = function (className) {\n        var classes = className.match(/\\S+/g) || [];\n        z$.each(this._selection, function (k, v) {\n            if (this.classList) {\n                var _t = this;\n                z$.each(classes, function (k, v) {\n                    _t.classList.add(v);\n                });\n            } else this.className += ' ' + className;\n        });\n        return this;\n    };\n    ZQuery.prototype.hasClass = function (className) {\n        var classes = className.match(/\\S+/g) || [];\n        var success = false;\n        var cls = this._selection[0];\n        z$.each(classes, function (k, v) {\n            if (cls)\n                success = cls.classList.contains(v);\n            else\n                success = (new RegExp('(^| )' + v + '( |$)', 'gi').test(cls.className));\n            if (success) return false;\n        });\n        return success;\n    };\n    ZQuery.prototype.removeClass = function (className) {\n        var classes = className.match(/\\S+/g) || [];\n        z$.each(this._selection, function (k, v) {\n            if (this.classList) {\n                var _t = this;\n                z$.each(classes, function (k, v) {\n                    _t.classList.remove(v);\n                });\n            } else this.className = this.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n        });\n        return this;\n    };\n    ZQuery.prototype.prev = function () {\n        return new ZQuery(this._selection[0].previousElementSibling);\n    };\n    ZQuery.prototype.next = function () {\n        return new ZQuery(this._selection[0].nextElementSibling);\n    };\n    ZQuery.prototype.html = function (htmlText) {\n        if (util.isNoU(htmlText))\n            return this._selection[0].innerHTML;\n        else\n            this.each(function (k, v) {\n                this.innerHTML = htmlText;\n            });\n        return this;\n    };\n    ZQuery.prototype.display = function (mode) {\n        z$.each(this._selection, function (k, v) {\n            this.style.display = mode;\n        });\n        return this;\n    };\n    ZQuery.prototype.show = function () {\n        return this.display('');\n    };\n    ZQuery.prototype.hide = function () {\n        return this.display('none');\n    };\n\n    // ZQuery object factory and static methods\n    var z$ = function (what) {\n        return new ZQuery(what);\n    };\n    z$.find = function (filter) {\n        return z$().find(filter);\n    };\n    z$.each = function (items, iterationCallback) {\n        for (var i = 0, len = items.length; i < len; i++)\n            if (iterationCallback.call(items[i], i, items[i]) === false)\n                break;\n        return this;\n    };\n    z$.ajax = function ajax(opt) {\n        var url;\n        if (!util.isNoU(opt) && !util.isNoU(opt.url))\n            url = opt.url;\n        else\n            url = opt;\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n        xhr.onload = function () {\n            if (xhr.status === 200) {\n                if (util.isFunction(opt.success)) opt.success(xhr.responseText);\n            }\n            else {\n                if (util.isFunction(opt.error)) opt.error(xhr);\n            }\n        };\n        xhr.send();\n        return this;\n    };\n    z$.wrapElement = function (containerTag, element) {\n        //$(element).wrap($('<'+containerTag+'/>'));\n        //return element;\n        /** @type Element */\n        var container = document.createElement(containerTag);\n        if (typeof element === 'string')\n            container.innerHTML = element;\n        else\n        // TODO: test this, it may not work\n            container.appendChild(element);\n        return container;\n    };\n    z$.wrapCss = function (wrapperRule, css) {\n        var wrapReX = /([.,\\w])([^/{};]+)({)/g;\n        var r, result = null, wrappedCss = '';\n        while (r = wrapReX.exec(css)) {\n            if (result != null)\n                wrappedCss += wrapperRule + ' ' + css.substring(result.index, r.index);\n            result = r;\n        }\n        if (result != null)\n            wrappedCss += wrapperRule + ' ' + css.substring(result.index);\n        if (wrappedCss != '') {\n            css = wrappedCss;\n        }\n        return css;\n    };\n    z$.appendCss = function (css, target) {\n        var style = null, head;\n        if (typeof css === 'string') {\n            // output css\n            head = document.head || document.getElementsByTagName('head')[0];\n            style = document.createElement('style');\n            style.type = 'text/css';\n            if (style.styleSheet)\n                style.styleSheet.cssText = css;\n            else\n                style.appendChild(document.createTextNode(css));\n        } else if (css instanceof Element) style = css;\n        // remove previous style node\n        if (!util.isNoU(target))\n            head.removeChild(target);\n        if (!util.isNoU(style))\n            head.appendChild(style);\n        return style;\n    };\n    z$.getClosest = function (elem, selector) {\n        // Get closest match\n        for (; elem && elem !== document; elem = elem.parentNode) {\n            if (elem.matches(selector)) return elem;\n        }\n        return null;\n    };\n    z$.getPosition = function (el) {\n        var visible = z$.isInView(el);\n        var x = 0, y = 0;\n        while (el) {\n            if (el.tagName == \"BODY\") {\n                // deal with browser quirks with body/window/document and page scroll\n                var scrollX = el.scrollLeft || document.documentElement.scrollLeft;\n                var scrollY = el.scrollTop || document.documentElement.scrollTop;\n                x += (el.offsetLeft - scrollX + el.clientLeft);\n                y += (el.offsetTop - scrollY + el.clientTop);\n            } else {\n                // for all other non-BODY elements\n                x += (el.offsetLeft - el.scrollLeft + el.clientLeft);\n                y += (el.offsetTop - el.scrollTop + el.clientTop);\n            }\n            el = el.offsetParent;\n        }\n        return {\n            x: x,\n            y: y,\n            visible: visible\n        };\n    };\n    z$.isInView = function(el) {\n        var rect = el.getBoundingClientRect();\n        return rect.bottom > 0 && rect.right > 0\n            && rect.left < (window.innerWidth || document.documentElement.clientWidth) /* or $(window).width() */\n            && rect.top < (window.innerHeight || document.documentElement.clientHeight); /* or $(window).height() */\n    };\n    // Element.matches() polyfill\n    if (!Element.prototype.matches) {\n        Element.prototype.matches =\n            Element.prototype.matchesSelector ||\n            Element.prototype.mozMatchesSelector ||\n            Element.prototype.msMatchesSelector ||\n            Element.prototype.oMatchesSelector ||\n            Element.prototype.webkitMatchesSelector ||\n            function (s) {\n                var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n                    i = matches.length;\n                while (--i >= 0 && matches.item(i) !== this) {\n                }\n                return i > -1;\n            };\n    }\n\n\n\n    // Public ```zuix``` interface\n\n    /** @global */\n    this.zuix = this.zuix || {\n\n            /* Component loading methods */\n            controller: controller,\n            load: load,\n            unload: unload,\n            componentize: componentize,\n            context: getContext,\n\n            /* Zuix hooks */\n            hook: function (p, v) {\n                hooks(p, v);\n                return this;\n            },\n\n            /* Utility methods */\n            $: z$,\n            field: field,\n\n            /* Access to classes proto */\n            TaskQueue: TaskQueue,\n            ZQuery: ZQuery,\n\n            /* Dev utility methods */\n            dumpCache: function () {\n                console.log(\"ZUIX\", \"Component Cache\", _componentCache);\n            },\n            dumpContexts: function () {\n                console.log(\"ZUIX\", \"Loaded Component Instances\", _contextRoot);\n            }\n\n        };\n\n    // TODO: add zuix.options to configure stuff like\n    // TODO: the css/html/js lookup base path (each individually own prop)\n\n    return this.zuix;\n}\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['zuix'], function () {\n            return (root.zuix = (factory).call(root));\n        });\n    } else if (typeof module === 'object' && module.exports) {\n        // Node\n        module.exports = (factory).call(root);\n    } else {\n        // Browser globals\n        root.zuix = (factory).call(root);\n    }\n}(this, Zuix));"]}