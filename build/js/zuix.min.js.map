{"version":3,"file":"zuix.min.js","lineCount":39,"mappings":"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","sources":[" [synthetic:base] "," [synthetic:util/findinternal] "," [synthetic:util/defineproperty] "," [synthetic:util/global] "," [synthetic:util/polyfill] "," [synthetic:es6/array/find] "," [synthetic:es6/symbol] "," [synthetic:es6/util/iteratorfromarray] "," [synthetic:es6/array/keys] ","src/js/zuix.js"],"names":["Zuix","ComponentContext","options","_options","contextId","util","isNoU","_c","behavior","_controller","_view","_model","_container","componentId","ContextController","context","self","view","this.view","model","this.model","expose","this.expose","methodName","handler","this.behavior","_fieldCache","api","event","refresh","destroy","pause","resume","create","trigger","this.trigger","eventPath","eventData","_eventMap","addEvent","on","this.on","handler_fn","invoke","this.invoke","command","isFunction","eventRouter","this.eventRouter","a","b","_behaviorMap","type","call","addBehavior","controller","callback","field","fieldName","container","document","$","find","include","resource","_contextSeqNum","write","zuix","load","auto","markdown","ready","ctx","append","error","err","data","componentize","element","each","attr","parent","length","console","log","_className","propertyFromPath","window","taskQueue","tid","fn","_taskList","push","status","setTimeout","taskCheck","next","i","splice","loadBegin","loadEnd","_contextRoot","getContext","cachedComponent","getCachedComponent","inlineView","eq","promise","ajax","url","getTime","Date","dataType","success","viewHtml","loadController","then","unload","removeAttr","k","v","objectEquals","cached","_componentCache","ctrlJs","il","indexOf","substring","ih","getController","e","createComponent","clone","html","detach","one","c","javascriptCode","instance","_eval","prototype","ComponentContext.prototype.options","ComponentContext.prototype.ready","ComponentContext.prototype.error","ComponentContext.prototype.on","ComponentContext.prototype.invoke","apiMethodName","ComponentContext.prototype.model","ComponentContext.prototype.view","showdown","makeHtml","Converter","block","addClass","Prism","highlightElement","componentHandler","upgradeElements","ComponentContext.prototype.controller","ComponentContext.prototype.container","ContextController.prototype.addEvent","target","off","ContextController.prototype.addBehavior","ContextController.prototype.field","globalSearch","f","el","clearCache","ContextController.prototype.clearCache","eval","obj","x","y","undefined","constructor","Function","RegExp","valueOf","Array","isArray","Object","p","keys","every","o","s","replace","split","n","ref","h","dumpCache","dumpContexts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,"/**\n * @license\n * Copyright 2015-2017 G-Labs. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Javascript UI components enhancer. A lite MVC library.\n * Find more details about zuix here:\n *   https://github.com/genielabs/zuix-mvc-js\n *\n * @author Generoso Martello <generoso@martello.com>\n */\n\n/**\n * @class Zuix\n * @constructor\n */\n(function Zuix() {\n    \"use strict\";\n\n    /**\n     * Component Cache object.\n     * @typedef {{\n     *      componentId: string The id of the cached component,\n     *      view: ContextView The view,\n     *      controller: ContextControllerCallback The function of the controller controller.\n     * }} ComponentCache\n     */\n\n    /**\n     * @protected\n     * @type {!Array<ComponentCache>}\n     */\n    var _componentCache = [];\n\n    /**\n     * Describes the types of objects used in a ComponentContext.\n     *\n     * @callback ContextReadyCallback\n     * @param {ComponentContext} context\n     *\n     * @callback ContextErrorCallback\n     * @param {ComponentContext} context\n     * @param {Object} error\n     *\n     * @callback EventCallback\n     * @param {jQuery.Event} event\n     * @param {Object} data\n     *\n     * @typedef {!{string, function}} EventMapping\n     *\n     * @typedef {{\n     *    data: Object|undefined,\n     *    locales: Object|undefined\n     * }} ContextModel\n     *\n     * @typedef {jQuery|HTMLElement|string} ContextView\n     *\n     * @typedef {jQuery|HTMLElement|string} ViewContainer\n     *\n     * @typedef {{\n     *    contextId: Object|undefined,\n     *    container: jQuery|undefined,\n     *    componentId: string|undefined,\n     *    model: ContextModel|undefined,\n     *    view: ContextView|undefined,\n     *    controller: ContextControllerCallback|undefined,\n     *    auto: Object|undefined,\n     *    on: Array.<EventMapping>|EventCallback|undefined,\n     *    behavior: Array.<EventMapping>|EventCallback|undefined,\n     *    ready: ContextReadyCallback|undefined,\n     *    error: ContextErrorCallback|undefined\n     * }} ContextOptions\n     *\n     */\n\n    /**\n     * @protected\n     * @type {!Array<ComponentContext>}\n     */\n    var _contextRoot = [];\n\n    /***\n     * TODO: describe this class...\n     *\n     * @param {ContextOptions} options The context options.\n     * @returns {ComponentContext} The component context instance.\n     * @constructor\n     */\n    function ComponentContext(options) {\n\n        this._options = null;\n        this.contextId = util.isNoU(options) || util.isNoU(options.contextId) ? null : options.contextId;\n        this.componentId = null;\n\n        /** @protected */\n        this._container = null;\n\n        /** @protected */\n        this._model = null;\n        /** @protected */\n        this._view = null;\n        /**\n         * @protected\n         * @type {ContextControllerCallback}\n         */\n        this._controller = null;\n\n        /**\n         * Define the local behavior handler for this context instance only.\n         * Any global behavior matching the same `componentId` will be overridden.\n         *\n         * @function behavior\n         * @param handler_fn {function}\n         */\n        this.behavior = null;\n\n        /**\n         * @protected\n         * @type {ContextController}\n         */\n        this._c = null;\n\n        this.options(options);\n\n        return this;\n    }\n\n    ComponentContext.prototype.options = function (options) {\n        if (util.isNoU(options))\n            return this._options;\n        this._options = options;\n        if (!util.isNoU(options)) {\n            if (!util.isNoU(options.componentId))\n              this.componentId = options.componentId;\n            this.container(options.container);\n            this.model(options.model);\n            this.view(options.view);\n            this.controller(options.controller);\n        }\n        return this;\n    };\n\n    /**\n     * TODO: describe\n     * @event ComponentContext#ready\n     * @param {ComponentContext} context The component context instance.\n     */\n    ComponentContext.prototype.ready = function (context) {\n    };\n\n    /**\n     * TODO: describe\n     * @event ComponentContext#error\n     * @param {ComponentContext} context The component context instance.\n     * @param {Object} error The error object\n     */\n    ComponentContext.prototype.error = function (context, error) {\n    };\n\n\n    /**\n     * TODO: describe\n     * @param a\n     * @param b\n     */\n    ComponentContext.prototype.on = function (a, b) {\n        // TODO: throw error if _c (controller instance) is not yet ready\n        return this._c.on(a, b);\n    };\n\n    /**\n     * TODO: describe\n     * @param apiMethodName {string}\n     * @param options {Object}\n     */\n    ComponentContext.prototype.invoke = function (apiMethodName, options) {\n        // TODO: throw error if _c (controller instance) is not yet ready\n        return this._c.invoke(apiMethodName, options)\n    };\n\n    /***\n     *\n     * @param {ContextModel} [model]\n     * @returns {ComponentContext|Object}\n     */\n    ComponentContext.prototype.model = function (model) {\n        if (util.isNoU(model)) return this._model;\n        else this._model = model;\n        return this;\n    };\n    /***\n     *\n     * @param {ContextView} [view]\n     * @returns {ComponentContext|ContextView}\n     */\n    ComponentContext.prototype.view = function (view) {\n        if (typeof view === 'undefined') return this._view;\n        if (typeof view === 'string') {\n\n            // TODO: turn all of these into viewHandle plugins as optional dependencies\n\n            // ShowDown - Markdown compiler\n            if (this.options().markdown === true && !util.isNoU(showdown))\n                view = new showdown.Converter().makeHtml(view);\n\n            this._view = $('<div/>').append(view);\n\n            // Prism code syntax highlighter\n            this._view.find('code').each(function (i, block) {\n                $(block).addClass('language-javascript');\n                Prism.highlightElement(block);\n            });\n\n            // Material Design Light  DOM upgrade\n            if (componentHandler)\n                componentHandler.upgradeElements(this._view[0]);\n\n            // Zuix componentizer\n            componentize(this._view);\n\n        } else this._view = view;\n        return this;\n    };\n    /***\n     *\n     * @param {ContextControllerCallback} [controller]\n     * @returns {ComponentContext|ContextControllerCallback}\n     */\n    ComponentContext.prototype.controller = function (controller) {\n        if (util.isNoU(controller)) return this._controller;\n        else this._controller = controller;\n        return this;\n    };\n    /***\n     *\n     * @param {ViewContainer} [container]\n     * @returns {ComponentContext|jQuery}\n     */\n    ComponentContext.prototype.container = function (container) {\n        if (util.isNoU(container)) return this._container;\n        else this._container = $(container);\n        return this;\n    };\n\n    ComponentContext.prototype._eventMap = [];\n    ComponentContext.prototype._behaviorMap = [];\n\n    /**\n     * TODO: complete JSDoc\n     *\n     * @returns {ContextController}\n     * @constructor\n     */\n    function ContextController(context) {\n        var self = this;\n\n        this.context = context;\n\n        // TODO: should improve/deprecate this.componentId?\n        this.componentId = context.componentId;\n        /** @type {ContextView} */\n        this.view = function () {\n            return context.view()\n        };\n        /** @type {ContextModel} */\n        this.model = function () {\n            return context.model()\n        };\n        /** @type {function} */\n        this.expose = function (methodName, handler) {\n            context[methodName] = handler;\n        };\n        /** @type {function} */\n        this.behavior = function () {\n            return context.behavior;\n        };\n\n        /** @protected */\n        this._fieldCache = [];\n\n        /** @type {function} */\n        this.create = null;\n        /** @type {function} */\n        this.resume = null;\n        /** @type {function} */\n        this.pause = null;\n        /** @type {function} */\n        this.destroy = null;\n        /** @type {function} */\n        this.refresh = null;\n        /** @type {function} */\n        this.event = null; // UI event stream handler (eventPath,eventValue)\n        /** @type {function} */\n        this.api = null; // handler for component API (command,options)\n\n        /** @type {function} */\n        this.trigger = function (eventPath, eventData) {\n            if (util.isNoU(context._eventMap[eventPath]))\n                this.addEvent(self.view(), eventPath, null);\n            // TODO: ...\n            self.view().trigger(eventPath, eventData);\n        };\n        /** @type {function} */\n        this.on = function (eventPath, handler_fn) {\n            this.addEvent(self.view(), eventPath, handler_fn);\n            // TODO: implement automatic event unbinding (off) in super().destroy()\n        };\n        /** @type {function} */\n        this.invoke = function (command, options) {\n            // used by consumers to invoke a component API command\n            if (util.isFunction(self.api))\n                self.api(command, options);\n        };\n        /** @type {function} */\n        this.eventRouter = function (a, b) {\n            //if (util.isFunction(self.behavior()))\n            //    self.behavior().call(self.view(), a, b);\n            if (util.isFunction(context._behaviorMap[a.type]))\n                context._behaviorMap[a.type].call(self.view(), a, b);\n            if (util.isFunction(context._eventMap[a.type]))\n                context._eventMap[a.type].call(self.view(), a, b);\n            // TODO: else-> should report anomaly\n        };\n        // create event map from context options\n        var options = context.options();\n        if (!util.isNoU(options.on))\n        {\n            for(var eventPath in options.on) {\n                var handler = options.on[eventPath];\n                // TODO: should log.warn if k already exists\n                self.addEvent(self.view(), eventPath, handler);\n            }\n        }\n        // create behavior map from context options\n        if (!util.isNoU(options.behavior))\n        {\n            for(var eventPath in options.behavior) {\n                var handler = options.behavior[eventPath];\n                // TODO: should log.warn if k already exists\n                self.addBehavior(self.view(), eventPath, handler);\n            }\n        }\n\n        context.controller().call(this, this);\n\n        return this;\n    }\n\n    ContextController.prototype.addEvent = function (target, eventPath, handler_fn) {\n        if (!util.isNoU(target)) {\n            target.off(eventPath, this.eventRouter);\n            this.context._eventMap[eventPath] = handler_fn;\n            target.on(eventPath, this.eventRouter);\n        } else {\n            // TODO: should report missing view\n        }\n    };\n    ContextController.prototype.addBehavior = function (target, eventPath, handler_fn) {\n        if (!util.isNoU(target)) {\n            target.off(eventPath, this.eventRouter);\n            this.context._behaviorMap[eventPath] = handler_fn;\n            target.on(eventPath, this.eventRouter);\n        } else {\n            // TODO: should report missing view\n        }\n    };\n\n    /***\n     * Search and cache this view elements.\n     *\n     * @param {!string} field Name of the `data-ui-field` to search\n     * @param {boolean} [globalSearch] Search a generic field attribute\n     * @returns {Element|jQuery}\n     */\n    ContextController.prototype.field = function (field, globalSearch) {\n        var f = globalSearch ? '@' + field : field;\n        var el = null;\n        if (typeof this._fieldCache[f] === 'undefined') {\n            el = globalSearch ? $(field) : this.view().find('[data-ui-field=' + field + ']');\n            if (el.length)\n                this._fieldCache[f] = el;\n        } else {\n            el = this._fieldCache[f];\n        }\n        return el;\n    };\n    ContextController.prototype.clearCache = function () {\n        this._fieldCache.length = 0;\n    };\n\n\n    // TODO: implement Config object for zuix\n    /** @protected\n     * @const\n     */\n    var _zuixFieldAttribute = 'data-ui-field';\n    // work-around for lint eval error\n    /** @protected\n     * @const\n     */\n    var _eval = eval;\n    //\n    /** @protected */\n    var _contextSeqNum = 0;\n\n\n    /** @event loadBegin */\n    var loadBegin = null;\n    /** @event loadEnd */\n    var loadEnd = null;\n\n\n    /**\n     * TODO: describe\n     *\n     * @callback ContextControllerCallback\n     * @param {ContextController} ctx\n     */\n    /**\n     * TODO: describe\n     *\n     * @param callback {ContextControllerCallback}\n     * @returns {ContextControllerCallback}\n     */\n    function controller(callback) {\n        return callback;\n    }\n\n    /**\n     * Returns jQuery elements with `_zuixFieldAttribute` attribute matching `fieldName` .\n     *\n     * @param {!string} fieldName The class to check for.\n     * @param {!Element|!jQuery|!HTMLElement|!HTMLDocument} [container] Starting DOM element for this search.\n     * @returns {jQuery}\n     */\n    function field(fieldName, container) {\n        if (util.isNoU(container))\n            container = document;\n        return $(container).find('[' + _zuixFieldAttribute + '=\"' + fieldName + '\"]');\n    }\n\n    /**\n     * TODO: describe\n     *\n     * @param resource\n     * @param container\n     * @param callback\n     */\n    function include(resource, container, callback) {\n        if (container === null) {\n            var fieldName = 'zuix-include-' + (++_contextSeqNum);\n            document.write('<div data-ui-include=\"' + (resource) + '\" data-ui-field=\"' + fieldName + '\" />');\n            container = zuix.field(fieldName);\n        }\n        // TODO: add js markdown support\n        load(resource, {\n            auto: false,\n            markdown: true,\n            ready: function (/** @type {ComponentContext} */ ctx) {\n                $(container).append(ctx.view());\n                if (util.isFunction(callback))\n                    callback(ctx);\n            },\n            error: function (ctx, err) {\n                // TODO: report error\n                $(container).append($('<p>').append('ERROR zuix.include'));\n                $(container).append($('<p>').append(data));\n                if (util.isFunction(callback))\n                    callback(ctx, err);\n            }\n        });\n    }\n\n\n    /**\n     * TODO: describe\n     *\n     * @param [element] {jQuery|HTMLElement|HTMLDocument}\n     */\n    function componentize(element) {\n        // TODO: add 'data-ui-loaded=\"true\"' attribute after loading\n        // to prevent loading twice\n        if (util.isNoU(element))\n            element = document;\n        $(element).find('[data-ui-load]').each(function () {\n            var componentId = $(this).attr('data-ui-load');\n            if ($(this).attr('data-ui-loaded') === true || $(this).parent('pre,code').length) {\n                console.log(_className, \"WARN\", \"Skipped\", this);\n                return;\n            }\n            $(this).attr('data-ui-loaded', true);\n            /** @type {ContextOptions} */\n            var options;\n            if (!util.isNoU($(this).attr('data-ui-options')))\n                options = util.propertyFromPath(window, $(this).attr('data-ui-options'));\n            else\n                options = {};\n            options.view = $(this);\n\n\n            // TODO: Behavior are also definable in \"data-ui-behavior\" attribute\n            // TODO: Events are also definable in \"data-ui-on\" attribute\n            // util.propertyFromPath( ... )\n\n\n            if (!util.isNoU($(this).attr('data-ui-ready')))\n                options.ready = util.propertyFromPath(window, $(this).attr('data-ui-ready'));\n            if (!util.isNoU($(this).attr('data-ui-error')))\n                options.error = util.propertyFromPath(window, $(this).attr('data-ui-error'));\n            if (!util.isNoU($(this).attr('data-ui-container')))\n                options.container = $(this).attr('data-ui-container');\n            if (!util.isNoU($(this).attr('data-ui-model')))\n                options.model = util.propertyFromPath(window, $(this).attr('data-ui-model'));\n            if (!util.isNoU($(this).attr('data-ui-view')))\n                options.view = $(this).attr('data-ui-view');\n            if (!util.isNoU($(this).attr('data-ui-controller')))\n                options.controller = util.propertyFromPath(window, $(this).attr('data-ui-controller'));\n\n            load(componentId, options);\n        });\n    }\n\n\n    // TODO: make of it a class\n    var _taskList = [];\n\n    function taskQueue(tid, fn) {\n        _taskList.push({tid: tid, fn: fn, status: 0});\n        setTimeout(function () {\n            taskCheck();\n        }, 1);\n    }\n\n    function taskCheck() {\n        var next = -1;\n        for (var i = 0; i < _taskList.length; i++) {\n            if (next != -2 && _taskList[i].status == 0) {\n                next = i;\n            }\n            else if (_taskList[i].status == 1) {\n                console.log(\"... waiting task \", _taskList[i].tid);\n                next = -2;\n                setTimeout(taskCheck, 10);\n//                if (util.isFunction(this.loadProgress))\n//                    this.loadProgress();\n                return;\n            }\n            else if (_taskList[i].status == 2) {\n                console.log(\"Completed task \", _taskList[i].tid, next);\n                _taskList.splice(i, 1);\n                setTimeout(taskCheck, 10);\n//                if (util.isFunction(this.loadProgress))\n//                    this.loadProgress();\n                return;\n            }\n        }\n\n        if (next >= 0) {\n            _taskList[next].status = 1;\n            (_taskList[next].fn).call(_taskList[next]);\n            console.log(\"Started task \", _taskList[next].tid);\n            if (util.isFunction(loadBegin))\n                loadBegin();\n            setTimeout(taskCheck, 10);\n        } else {\n            if (util.isFunction(loadEnd))\n                loadEnd();\n        }\n    }\n\n\n    // TODO: implement <componentId>.css and <componentId>.model.js loading\n    // TODO: implement LESS.js css pre-processing for <component>.css files\n    // TODO: (supporting nested rules for local component styles definitions)\n\n\n    /**\n     * Loads a component with the given options.\n     *\n     * @param {!string} componentId The id/name of the component we want to load.\n     * @param {ContextOptions} [options] context options used to initialize the loaded component\n     * @returns {ComponentContext}\n     */\n    function load(componentId, options) {\n        // TODO: throw error on argument mismatch\n\n        /** @type {ComponentContext} */\n        var context = null;\n        if (!util.isNoU(options)) {\n            // check if context has its unique id assigned\n            if (!util.isNoU(options.contextId)) {\n                // if it does, try to pick it from allocated contexts list\n                context = getContext(options.contextId);\n                if (context !== null) {\n                    context.options(options);\n                } else {\n                    // if no context is already allocated\n                    // with that id, then add a new one\n                    context = new ComponentContext(options);\n                    _contextRoot.push(context);\n                }\n            } else {\n                if (options === false) {\n                    options = {};\n                    options.auto = false;\n                }\n                // generate contextId (this is a bit buggy, but it's quick)\n                options.contextId = 'zuix-ctx-' + (++_contextSeqNum);\n                context = new ComponentContext(options);\n                _contextRoot.push(context);\n            }\n        } else {\n            // empty context\n            options = {};\n            context = new ComponentContext(options);\n        }\n\n        // assign the given component (widget) to this context\n        if (context.componentId != componentId) {\n            context.componentId = componentId;\n            /*\n             TODO: to be fixed\n             if (!util.isNoU(context.view())) {\n             // TODO: implement this code in a context.detach() method\n             //context.controller().pause()\n             context.view().detach();\n             context.view(null);\n             }*/\n        }\n\n        // pick it from cache if found\n        var cachedComponent = getCachedComponent(context.componentId);\n        if (cachedComponent !== null && util.isNoU(context.controller()))\n            context.controller(cachedComponent.controller);\n\n        if (util.isFunction(options.ready))\n            context.ready = options.ready;\n        if (util.isFunction(options.error))\n            context.error = options.error;\n\n        if (util.isNoU(options.view)) {\n\n            if (cachedComponent !== null) {\n                context.view(cachedComponent.view);\n            } else {\n                // TODO: replace $(document) with $(options.container)\n                var inlineView = $(document).find('[data-ui-view=\"' + context.componentId + '\"]');\n                if (inlineView.length >= 1)\n                    context.view(inlineView.eq(0));\n            }\n\n            // if not able to inherit the view from the base cachedComponent\n            // or from an inline element, then load the view from web\n            if (util.isNoU(context.view())) {\n                taskQueue('html:' + context.componentId, function () {\n                    var promise = this;\n                    $.ajax({\n                        url: context.componentId + \".html?\" + new Date().getTime(),\n                        dataType: 'text',\n                        type: 'GET',\n                        success: function (viewHtml) {\n                            context.view(viewHtml);\n                            loadController(context);\n                        },\n                        error: function (err) {\n                            console.log(err);\n                            if (util.isFunction(options.error))\n                                context.error(context, err);\n                        }\n                    }).then(function () {\n                        promise.status = 2;\n                    });\n\n                });\n                // defer controller loading\n                return context;\n            }\n        } else {\n            context.view(options.view);\n        }\n        loadController(context);\n        return context;\n    }\n\n    /**\n     *\n     * @param context {ComponentContext}\n     */\n    function unload(context) {\n        if (!util.isNoU(context) && !util.isNoU(context._c)) {\n            if (!util.isNoU(context._c.view()))\n                context._c.view().removeAttr('data-ui-component');\n\n            //context.unregisterEvents();\n            // TODO: unregister events and local context behavior\n            // TODO: detach view from parent if context.container is not null\n\n            if (util.isFunction(context._c.destroy))\n                context._c.destroy();\n        }\n    }\n\n    /**\n     * Define the behavior handler for the component matching `componentId`.\n     * All active contexts implementing `componentId` will be affected.\n     *\n     * @param componentId {Object}\n     * @param handler_fn {function}\n     */\n    function behavior(componentId, handler_fn) {\n        // TODO: behavior\n    }\n\n    /***\n     *\n     * @param {Object} contextId\n     * @returns {ComponentContext}\n     */\n    function getContext(contextId) {\n        var context = null;\n        $.each(_contextRoot, function (k, v) {\n            if (util.objectEquals(v.contextId, contextId)) {\n                context = v;\n                return false;\n            }\n        });\n        return context;\n    }\n\n    function removeContext(contextId) {\n        // TODO: removeContext\n    }\n\n    function removeCachedComponent(componentId) {\n        // TODO: removeCachedComponent\n    }\n\n    /***\n     *\n     * @param {Object} componentId\n     * @returns {ComponentCache}\n     */\n    function getCachedComponent(componentId) {\n        var cached = null;\n        $.each(_componentCache, function (k, v) {\n            if (util.objectEquals(v.componentId, componentId)) {\n                cached = v;\n                return false;\n            }\n        });\n        return cached;\n    }\n\n    /***\n     *\n     * @param {ComponentContext} context\n     */\n    function loadController(context) {\n        if (context.controller() === null && context.options().auto !== false) {\n            taskQueue('js:' + context.componentId, function () {\n                var promise = this;\n                $.ajax({\n                    url: context.componentId + \".js?\" + new Date().getTime(),\n                    dataType: 'text',\n                    type: 'GET',\n                    success: function (ctrlJs) {\n                        try {\n                            var il = ctrlJs.indexOf('.load');\n                            if (il > 1)\n                                ctrlJs = ctrlJs.substring(0, il - 4);\n                            var ih = ctrlJs.indexOf('.controller');\n                            if (ih > 1)\n                                ctrlJs = ctrlJs.substring(ih + 11);\n                            context.controller(getController(ctrlJs));\n                        } catch (e) {\n                            console.log(ctrlJs);\n                            console.log(e);\n                            if (util.isFunction(context.error))\n                                context.error(context, e);\n                            return;\n                        }\n                        createComponent(context);\n                    },\n                    error: function (err) {\n                        console.log(err);\n                        if (util.isFunction(context.error))\n                            context.error(context, err);\n                    }\n                }).then(function () {\n                    promise.status = 2;\n                });\n            });\n        } else {\n            createComponent(context);\n        }\n    }\n\n    /***\n     *\n     * @param context {ComponentContext}\n     */\n    function createComponent(context) {\n        if (!util.isNoU(context.view())) {\n            var cached = getCachedComponent(context.componentId);\n            if (cached === null) {\n                _componentCache.push({\n                    componentId: context.componentId,\n                    view: $('<div>').append(context.view().clone()).html(),\n                    controller: context.controller()\n                });\n            }\n\n            if (!util.isNoU(context.container())) {\n                context.view().detach();\n                context.container().append(context.view());\n            }\n\n            context.view().one('create', function () {\n                initComponent(context);\n            });\n\n            context.view().trigger('create');\n        } else {\n            // TODO: report error\n        }\n    }\n\n    /***\n     *\n     * @param {ComponentContext} context\n     */\n    function initComponent(context) {\n        if (util.isFunction(context.controller())) {\n            /** @type {ContextController} */\n            var c = context._c = new ContextController(context);\n\n            if (!util.isNoU(c.view()))\n                c.view().attr('data-ui-component', c.componentId);\n\n            if (util.isFunction(c.create)) c.create();\n            //if (util.isFunction(c.bind)) c.bind();\n            if (util.isFunction(c.resume)) c.resume();\n            if (util.isFunction(c.refresh)) c.refresh();\n        }\n        if (util.isFunction(context.ready))\n            context.ready(context);\n    }\n\n    /***\n     *\n     * @param javascriptCode string\n     * @returns {ContextControllerCallback}\n     */\n    // TODO: refactor this method name\n    function getController(javascriptCode) {\n        var instance = function (ctx) {\n        };\n        if (typeof javascriptCode === 'string')\n            instance = _eval(javascriptCode);\n        return instance;\n    }\n\n    // Generic utility class\n    var util = {\n\n        isNoU: function (obj) {\n            return (typeof obj === 'undefined' || obj === null);\n        },\n\n        isFunction: function (f) {\n            return typeof f === 'function';\n        },\n\n        objectEquals: function (x, y) {\n            if (x === null || x === undefined || y === null || y === undefined) {\n                return x === y;\n            }\n            // after this just checking type of one would be enough\n            if (x.constructor !== y.constructor) {\n                return false;\n            }\n            // if they are functions, they should exactly refer to same one (because of closures)\n            if (x instanceof Function) {\n                return x === y;\n            }\n            // if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n            if (x instanceof RegExp) {\n                return x === y;\n            }\n            if (x === y || x.valueOf() === y.valueOf()) {\n                return true;\n            }\n            if (Array.isArray(x) && x.length !== y.length) {\n                return false;\n            }\n\n            // if they are dates, they must had equal valueOf\n            if (x instanceof Date) {\n                return false;\n            }\n\n            // if they are strictly equal, they both need to be object at least\n            if (!(x instanceof Object)) {\n                return false;\n            }\n            if (!(y instanceof Object)) {\n                return false;\n            }\n\n            // recursive object equality check\n            var p = Object.keys(x);\n            return Object.keys(y).every(function (i) {\n                    return p.indexOf(i) !== -1;\n                }) &&\n                p.every(function (i) {\n                    return util.objectEquals(x[i], y[i]);\n                });\n        },\n\n        propertyFromPath: function (o, s) {\n            if (typeof s !== 'string') return;\n            s = s.replace(/\\[(\\w+)]/g, '.$1'); // convert indexes to properties\n            s = s.replace(/^\\./, '');           // strip a leading dot\n            var a = s.split('.');\n            var ref = o;\n            for (var i = 0, n = a.length; i < n; ++i) {\n                var k = a[i];\n                if (typeof ref[k] !== 'undefined') {\n                    ref = ref[k];\n                } else {\n                    return;\n                }\n            }\n            return ref;\n        }\n\n    };\n\n    // Public Interface\n\n    this.zuix = this.zuix || {\n\n        /* component loading */\n        controller: controller,\n        load: load,\n        unload: unload,\n        componentize: componentize,\n        include: include,\n\n        /* events */\n\n        /**\n         * @param h {loadBegin}\n         * @listens handler\n         */\n        loadBegin: function (h) {\n            loadBegin = h;\n            return this;\n        },\n        /**\n         * @param h {loadEnd}\n         * @listens handler\n         */\n        loadEnd: function (h) {\n            loadEnd = h;\n            return this;\n        },\n\n        /* utility methods */\n\n        field: field,\n\n        /* dev utility methods */\n        dumpCache: function () {\n            console.log(\"ZUIX\", \"Component Cache\", _componentCache);\n        },\n        dumpContexts: function () {\n            console.log(\"ZUIX\", \"Loaded Component Instances\", _contextRoot);\n        }\n\n    };\n\n    return zuix;\n}.call(this));\n\n//var zuix = Zuix.call(this);"]}